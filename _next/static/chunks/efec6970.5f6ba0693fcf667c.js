"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{4444:function(h,u,d){d.d(u,{O:function(){return v}});var p=function(h){var u={};function r(d){if(u[d])return u[d].exports;var p=u[d]={i:d,l:!1,exports:{}};return h[d].call(p.exports,p,p.exports,r),p.l=!0,p.exports}return r.m=h,r.c=u,r.d=function(h,u,d){r.o(h,u)||Object.defineProperty(h,u,{enumerable:!0,get:d})},r.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},r.t=function(h,u){if(1&u&&(h=r(h)),8&u||4&u&&"object"==typeof h&&h&&h.__esModule)return h;var d=Object.create(null);if(r.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:h}),2&u&&"string"!=typeof h)for(var p in h)r.d(d,p,(function(u){return h[u]}).bind(null,p));return d},r.n=function(h){var u=h&&h.__esModule?function(){return h.default}:function(){return h};return r.d(u,"a",u),u},r.o=function(h,u){return Object.prototype.hasOwnProperty.call(h,u)},r.p="",r(r.s=70)}([function(h,u,d){h.exports=d(64)()},function(h,u,d){(function(u){var r=function(h){return h&&h.Math==Math&&h};h.exports=r("object"==typeof globalThis&&globalThis)||r(window)||r("object"==typeof self&&self)||r("object"==typeof u&&u)||Function("return this")()}).call(this,d(31))},function(h,u){h.exports=function(h){try{return!!h()}catch(h){return!0}}},function(h,u){var d={}.hasOwnProperty;h.exports=function(h,u){return d.call(h,u)}},function(h,u,d){var p=d(2);h.exports=!p(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(h,u){h.exports=function(h){return"object"==typeof h?null!==h:"function"==typeof h}},function(h,u,d){var p=d(4),v=d(17),g=d(11);h.exports=p?function(h,u,d){return v.f(h,u,g(1,d))}:function(h,u,d){return h[u]=d,h}},function(h,u,d){h.exports=d(62)},function(h,u,d){var p=d(12),v=d(14);h.exports=function(h){return p(v(h))}},function(h,u,d){var p=d(1),v=d(6);h.exports=function(h,u){try{v(p,h,u)}catch(d){p[h]=u}return u}},function(h,u,d){var p=d(4),v=d(32),g=d(11),b=d(8),w=d(15),E=d(3),x=d(16),L=Object.getOwnPropertyDescriptor;u.f=p?L:function(h,u){if(h=b(h),u=w(u,!0),x)try{return L(h,u)}catch(h){}if(E(h,u))return g(!v.f.call(h,u),h[u])}},function(h,u){h.exports=function(h,u){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:u}}},function(h,u,d){var p=d(2),v=d(13),g="".split;h.exports=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return"String"==v(h)?g.call(h,""):Object(h)}:Object},function(h,u){var d={}.toString;h.exports=function(h){return d.call(h).slice(8,-1)}},function(h,u){h.exports=function(h){if(null==h)throw TypeError("Can't call method on "+h);return h}},function(h,u,d){var p=d(5);h.exports=function(h,u){var d,v;if(!p(h))return h;if(u&&"function"==typeof(d=h.toString)&&!p(v=d.call(h))||"function"==typeof(d=h.valueOf)&&!p(v=d.call(h))||!u&&"function"==typeof(d=h.toString)&&!p(v=d.call(h)))return v;throw TypeError("Can't convert object to primitive value")}},function(h,u,d){var p=d(4),v=d(2),g=d(33);h.exports=!p&&!v(function(){return 7!=Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a})},function(h,u,d){var p=d(4),v=d(16),g=d(18),b=d(15),w=Object.defineProperty;u.f=p?w:function(h,u,d){if(g(h),u=b(u,!0),g(d),v)try{return w(h,u,d)}catch(h){}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(h[u]=d.value),h}},function(h,u,d){var p=d(5);h.exports=function(h){if(!p(h))throw TypeError(String(h)+" is not an object");return h}},function(h,u,d){var p=d(20),v=Function.toString;"function"!=typeof p.inspectSource&&(p.inspectSource=function(h){return v.call(h)}),h.exports=p.inspectSource},function(h,u,d){var p=d(1),v=d(9),g=p["__core-js_shared__"]||v("__core-js_shared__",{});h.exports=g},function(h,u,d){var p=d(38),v=d(20);(h.exports=function(h,u){return v[h]||(v[h]=void 0!==u?u:{})})("versions",[]).push({version:"3.6.5",mode:p?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(h,u){var d=0,p=Math.random();h.exports=function(h){return"Symbol("+String(void 0===h?"":h)+")_"+(++d+p).toString(36)}},function(h,u){h.exports={}},function(h,u,d){var p=d(25),v=Math.min;h.exports=function(h){return h>0?v(p(h),9007199254740991):0}},function(h,u){var d=Math.ceil,p=Math.floor;h.exports=function(h){return isNaN(h=+h)?0:(h>0?p:d)(h)}},function(h,u,d){var p=d(50).forEach,v=d(58),g=d(59),b=v("forEach"),w=g("forEach");h.exports=b&&w?[].forEach:function(h){return p(this,h,arguments.length>1?arguments[1]:void 0)}},function(h,u,d){var p=d(2);h.exports=!!Object.getOwnPropertySymbols&&!p(function(){return!String(Symbol())})},function(h,u,d){window,h.exports=function(h){var u={};function r(d){if(u[d])return u[d].exports;var p=u[d]={i:d,l:!1,exports:{}};return h[d].call(p.exports,p,p.exports,r),p.l=!0,p.exports}return r.m=h,r.c=u,r.d=function(h,u,d){r.o(h,u)||Object.defineProperty(h,u,{enumerable:!0,get:d})},r.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},r.t=function(h,u){if(1&u&&(h=r(h)),8&u||4&u&&"object"==typeof h&&h&&h.__esModule)return h;var d=Object.create(null);if(r.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:h}),2&u&&"string"!=typeof h)for(var p in h)r.d(d,p,(function(u){return h[u]}).bind(null,p));return d},r.n=function(h){var u=h&&h.__esModule?function(){return h.default}:function(){return h};return r.d(u,"a",u),u},r.o=function(h,u){return Object.prototype.hasOwnProperty.call(h,u)},r.p="",r(r.s=32)}([function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var h=this;return this._event||(this._event=function(u){return h._listeners.push(u),{dispose:function(){if(!h._disposed){for(var d=0;d<h._listeners.length;d++)if(h._listeners[d]===u)return void h._listeners.splice(d,1)}}}}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(h,u){for(var d=[],p=0;p<this._listeners.length;p++)d.push(this._listeners[p]);for(p=0;p<d.length;p++)d[p].call(void 0,h,u)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();u.EventEmitter=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(14);u.IBufferService=p.createDecorator("BufferService"),u.ICoreMouseService=p.createDecorator("CoreMouseService"),u.ICoreService=p.createDecorator("CoreService"),u.ICharsetService=p.createDecorator("CharsetService"),u.IDirtyRowService=p.createDecorator("DirtyRowService"),u.IInstantiationService=p.createDecorator("InstantiationService"),u.ILogService=p.createDecorator("LogService"),u.IOptionsService=p.createDecorator("OptionsService"),u.IUnicodeService=p.createDecorator("UnicodeService")},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(h){return h.dispose()}),this._disposables.length=0},e.prototype.register=function(h){this._disposables.push(h)},e.prototype.unregister=function(h){var u=this._disposables.indexOf(h);-1!==u&&this._disposables.splice(u,1)},e}();u.Disposable=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.DEFAULT_COLOR=256,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(14);u.ICharSizeService=p.createDecorator("CharSizeService"),u.ICoreBrowserService=p.createDecorator("CoreBrowserService"),u.IMouseService=p.createDecorator("MouseService"),u.IRenderService=p.createDecorator("RenderService"),u.ISelectionService=p.createDecorator("SelectionService"),u.ISoundService=p.createDecorator("SoundService")},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(7),b=d(3),w=function(h){function t(){var u=null!==h&&h.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.combinedData="",u}return v(t,h),t.fromCharData=function(h){var u=new t;return u.setFromCharData(h),u},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?g.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(h){this.fg=h[b.CHAR_DATA_ATTR_INDEX],this.bg=0;var u=!1;if(h[b.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(2===h[b.CHAR_DATA_CHAR_INDEX].length){var d=h[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){var p=h[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(d-55296)+p-56320+65536|h[b.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=h[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[b.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=h[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[b.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(d(6).AttributeData);u.CellData=w},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this.fg=0,this.bg=0}return e.toColorRGB=function(h){return[h>>>16&255,h>>>8&255,255&h]},e.fromColorRGB=function(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]},e.prototype.clone=function(){var h=new e;return h.fg=this.fg,h.bg=this.bg,h},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return -1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return -1}},e}();u.AttributeData=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.stringFromCodePoint=function(h){return h>65535?String.fromCharCode(55296+((h-=65536)>>10))+String.fromCharCode(h%1024+56320):String.fromCharCode(h)},u.utf32ToString=function(h,u,d){void 0===u&&(u=0),void 0===d&&(d=h.length);for(var p="",v=u;v<d;++v){var g=h[v];g>65535?(g-=65536,p+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):p+=String.fromCharCode(g)}return p};var p=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(h,u){var d=h.length;if(!d)return 0;var p=0,v=0;this._interim&&(56320<=(b=h.charCodeAt(v++))&&b<=57343?u[p++]=1024*(this._interim-55296)+b-56320+65536:(u[p++]=this._interim,u[p++]=b),this._interim=0);for(var g=v;g<d;++g){var b,w=h.charCodeAt(g);if(55296<=w&&w<=56319){if(++g>=d)return this._interim=w,p;56320<=(b=h.charCodeAt(g))&&b<=57343?u[p++]=1024*(w-55296)+b-56320+65536:(u[p++]=w,u[p++]=b)}else u[p++]=w}return p},e}();u.StringToUtf32=p;var v=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(h,u){var d=h.length;if(!d)return 0;var p,v,g,b,w=0,E=0,x=0;if(this.interim[0]){var L=!1,k=this.interim[0];k&=192==(224&k)?31:224==(240&k)?15:7;for(var T=0,F=void 0;(F=63&this.interim[++T])&&T<4;)k<<=6,k|=F;for(var W=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,q=W-T;x<q;){if(x>=d)return 0;if(128!=(192&(F=h[x++]))){x--,L=!0;break}this.interim[T++]=F,k<<=6,k|=63&F}L||(2===W?k<128?x--:u[w++]=k:3===W?k<2048||k>=55296&&k<=57343||(u[w++]=k):k<65536||k>1114111||(u[w++]=k)),this.interim.fill(0)}for(var N=d-4,U=x;U<d;){for(;!(!(U<N)||128&(p=h[U])||128&(v=h[U+1])||128&(g=h[U+2])||128&(b=h[U+3]));)u[w++]=p,u[w++]=v,u[w++]=g,u[w++]=b,U+=4;if((p=h[U++])<128)u[w++]=p;else if(192==(224&p)){if(U>=d)return this.interim[0]=p,w;if(128!=(192&(v=h[U++]))||(E=(31&p)<<6|63&v)<128){U--;continue}u[w++]=E}else if(224==(240&p)){if(U>=d)return this.interim[0]=p,w;if(128!=(192&(v=h[U++]))){U--;continue}if(U>=d)return this.interim[0]=p,this.interim[1]=v,w;if(128!=(192&(g=h[U++]))){U--;continue}if((E=(15&p)<<12|(63&v)<<6|63&g)<2048||E>=55296&&E<=57343)continue;u[w++]=E}else if(240==(248&p)){if(U>=d)return this.interim[0]=p,w;if(128!=(192&(v=h[U++]))){U--;continue}if(U>=d)return this.interim[0]=p,this.interim[1]=v,w;if(128!=(192&(g=h[U++]))){U--;continue}if(U>=d)return this.interim[0]=p,this.interim[1]=v,this.interim[2]=g,w;if(128!=(192&(b=h[U++]))){U--;continue}if((E=(7&p)<<18|(63&v)<<12|(63&g)<<6|63&b)<65536||E>1114111)continue;u[w++]=E}}return w},e}();u.Utf8ToUtf32=v},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=function(h,u,d,p){h.addEventListener(u,d,p);var v=!1;return{dispose:function(){v||(v=!0,h.removeEventListener(u,d,p))}}}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.CHAR_ATLAS_CELL_SPACING=1},function(h,u,d){var p,v,g,b,w;function a(h){var u=h.toString(16);return u.length<2?"0"+u:u}function c(h,u){return h<u?(u+.05)/(h+.05):(h+.05)/(u+.05)}Object.defineProperty(u,"__esModule",{value:!0}),(w=p=u.channels||(u.channels={})).toCss=function(h,u,d,p){return void 0!==p?"#"+a(h)+a(u)+a(d)+a(p):"#"+a(h)+a(u)+a(d)},w.toRgba=function(h,u,d,p){return void 0===p&&(p=255),(h<<24|u<<16|d<<8|p)>>>0},(v=u.color||(u.color={})).blend=function(h,u){var d=(255&u.rgba)/255;if(1===d)return{css:u.css,rgba:u.rgba};var v=u.rgba>>24&255,g=u.rgba>>16&255,b=u.rgba>>8&255,w=h.rgba>>24&255,E=h.rgba>>16&255,x=h.rgba>>8&255,L=w+Math.round((v-w)*d),k=E+Math.round((g-E)*d),T=x+Math.round((b-x)*d);return{css:p.toCss(L,k,T),rgba:p.toRgba(L,k,T)}},v.ensureContrastRatio=function(h,u,d){var p=b.ensureContrastRatio(h.rgba,u.rgba,d);if(p)return b.toColor(p>>24&255,p>>16&255,p>>8&255)},v.opaque=function(h){var u=(255|h.rgba)>>>0,d=b.toChannels(u),v=d[0],g=d[1],w=d[2];return{css:p.toCss(v,g,w),rgba:u}},(u.css||(u.css={})).toColor=function(h){return{css:h,rgba:(parseInt(h.slice(1),16)<<8|255)>>>0}},function(h){function t(h,u,d){var p=h/255,v=u/255,g=d/255;return .2126*(p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))}h.relativeLuminance=function(h){return t(h>>16&255,h>>8&255,255&h)},h.relativeLuminance2=t}(g=u.rgb||(u.rgb={})),function(h){function t(h,u,d){for(var p=h>>24&255,v=h>>16&255,b=h>>8&255,w=u>>24&255,E=u>>16&255,x=u>>8&255,L=c(g.relativeLuminance2(w,x,E),g.relativeLuminance2(p,v,b));L<d&&(w>0||E>0||x>0);)w-=Math.max(0,Math.ceil(.1*w)),E-=Math.max(0,Math.ceil(.1*E)),x-=Math.max(0,Math.ceil(.1*x)),L=c(g.relativeLuminance2(w,x,E),g.relativeLuminance2(p,v,b));return(w<<24|E<<16|x<<8|255)>>>0}function r(h,u,d){for(var p=h>>24&255,v=h>>16&255,b=h>>8&255,w=u>>24&255,E=u>>16&255,x=u>>8&255,L=c(g.relativeLuminance2(w,x,E),g.relativeLuminance2(p,v,b));L<d&&(w<255||E<255||x<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),E=Math.min(255,E+Math.ceil(.1*(255-E))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=c(g.relativeLuminance2(w,x,E),g.relativeLuminance2(p,v,b));return(w<<24|E<<16|x<<8|255)>>>0}h.ensureContrastRatio=function(h,u,d){var p=g.relativeLuminance(h>>8),v=g.relativeLuminance(u>>8);if(c(p,v)<d)return v<p?t(h,u,d):r(h,u,d)},h.reduceLuminance=t,h.increaseLuminance=r,h.toChannels=function(h){return[h>>24&255,h>>16&255,h>>8&255,255&h]},h.toColor=function(h,u,d){return{css:p.toCss(h,u,d),rgba:p.toRgba(h,u,d)}}}(b=u.rgba||(u.rgba={})),u.toPaddedHex=a,u.contrastRatio=c},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p="undefined"==typeof navigator,v=p?"node":navigator.userAgent,g=p?"node":navigator.platform;function s(h,u){return h.indexOf(u)>=0}u.isFirefox=!!~v.indexOf("Firefox"),u.isSafari=/^((?!chrome|android).)*safari/i.test(v),u.isMac=s(["Macintosh","MacIntel","MacPPC","Mac68K"],g),u.isIpad="iPad"===g,u.isIphone="iPhone"===g,u.isWindows=s(["Windows","Win16","Win32","WinCE"],g),u.isLinux=g.indexOf("Linux")>=0},function(h,u,d){var p,v;Object.defineProperty(u,"__esModule",{value:!0}),(p=u.C0||(u.C0={})).NUL="\x00",p.SOH="\x01",p.STX="\x02",p.ETX="\x03",p.EOT="\x04",p.ENQ="\x05",p.ACK="\x06",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF="\n",p.VT="\v",p.FF="\f",p.CR="\r",p.SO="\x0e",p.SI="\x0f",p.DLE="\x10",p.DC1="\x11",p.DC2="\x12",p.DC3="\x13",p.DC4="\x14",p.NAK="\x15",p.SYN="\x16",p.ETB="\x17",p.CAN="\x18",p.EM="\x19",p.SUB="\x1a",p.ESC="\x1b",p.FS="\x1c",p.GS="\x1d",p.RS="\x1e",p.US="\x1f",p.SP=" ",p.DEL="\x7f",(v=u.C1||(u.C1={})).PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8a",v.PLD="\x8b",v.PLU="\x8c",v.RI="\x8d",v.SS2="\x8e",v.SS3="\x8f",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9a",v.CSI="\x9b",v.ST="\x9c",v.OSC="\x9d",v.PM="\x9e",v.APC="\x9f"},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(3),v=d(9),g=d(23),b=d(6),w=d(26),E=d(10),x=function(){function e(h,u,d,p,v,g,b,w){this._container=h,this._alpha=p,this._colors=v,this._rendererId=g,this._bufferService=b,this._optionsService=w,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+u+"-layer"),this._canvas.style.zIndex=d.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var h;this._container.removeChild(this._canvas),null===(h=this._charAtlas)||void 0===h||h.dispose()},e.prototype._initCanvas=function(){this._ctx=w.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(h,u){},e.prototype.onSelectionChanged=function(h,u,d){void 0===d&&(d=!1)},e.prototype.setColors=function(h){this._refreshCharAtlas(h)},e.prototype._setTransparency=function(h){if(h!==this._alpha){var u=this._canvas;this._alpha=h,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,u),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(h){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=g.acquireCharAtlas(this._optionsService.options,this._rendererId,h,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(h){this._scaledCellWidth=h.scaledCellWidth,this._scaledCellHeight=h.scaledCellHeight,this._scaledCharWidth=h.scaledCharWidth,this._scaledCharHeight=h.scaledCharHeight,this._scaledCharLeft=h.scaledCharLeft,this._scaledCharTop=h.scaledCharTop,this._canvas.width=h.scaledCanvasWidth,this._canvas.height=h.scaledCanvasHeight,this._canvas.style.width=h.canvasWidth+"px",this._canvas.style.height=h.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype._fillCells=function(h,u,d,p){this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,d*this._scaledCellWidth,p*this._scaledCellHeight)},e.prototype._fillBottomLineAtCells=function(h,u,d){void 0===d&&(d=1),this._ctx.fillRect(h*this._scaledCellWidth,(u+1)*this._scaledCellHeight-window.devicePixelRatio-1,d*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(h,u,d){this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,window.devicePixelRatio*d,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(h,u,d,p){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(h*this._scaledCellWidth+window.devicePixelRatio/2,u*this._scaledCellHeight+window.devicePixelRatio/2,d*this._scaledCellWidth-window.devicePixelRatio,p*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(h,u,d,p){this._alpha?this._ctx.clearRect(h*this._scaledCellWidth,u*this._scaledCellHeight,d*this._scaledCellWidth,p*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,d*this._scaledCellWidth,p*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(h,u,d){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(d),this._ctx.fillText(h.getChars(),u*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},e.prototype._drawChars=function(h,u,d){var g,b,w=this._getContrastColor(h);w||h.isFgRGB()||h.isBgRGB()?this._drawUncachedChars(h,u,d,w):(h.isInverse()?(g=h.isBgDefault()?v.INVERTED_DEFAULT_COLOR:h.getBgColor(),b=h.isFgDefault()?v.INVERTED_DEFAULT_COLOR:h.getFgColor()):(b=h.isBgDefault()?p.DEFAULT_COLOR:h.getBgColor(),g=h.isFgDefault()?p.DEFAULT_COLOR:h.getFgColor()),g+=this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&g<8?8:0,this._currentGlyphIdentifier.chars=h.getChars()||p.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=h.getCode()||p.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=b,this._currentGlyphIdentifier.fg=g,this._currentGlyphIdentifier.bold=!!h.isBold(),this._currentGlyphIdentifier.dim=!!h.isDim(),this._currentGlyphIdentifier.italic=!!h.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,u*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(h,u,d))},e.prototype._drawUncachedChars=function(h,u,d,p){if(this._ctx.save(),this._ctx.font=this._getFont(!!h.isBold(),!!h.isItalic()),this._ctx.textBaseline="middle",h.isInverse()){if(p)this._ctx.fillStyle=p.css;else if(h.isBgDefault())this._ctx.fillStyle=E.color.opaque(this._colors.background).css;else if(h.isBgRGB())this._ctx.fillStyle="rgb("+b.AttributeData.toColorRGB(h.getBgColor()).join(",")+")";else{var g=h.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&g<8&&(g+=8),this._ctx.fillStyle=this._colors.ansi[g].css}}else if(p)this._ctx.fillStyle=p.css;else if(h.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(h.isFgRGB())this._ctx.fillStyle="rgb("+b.AttributeData.toColorRGB(h.getFgColor()).join(",")+")";else{var w=h.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&w<8&&(w+=8),this._ctx.fillStyle=this._colors.ansi[w].css}this._clipRow(d),h.isDim()&&(this._ctx.globalAlpha=v.DIM_OPACITY),this._ctx.fillText(h.getChars(),u*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},e.prototype._clipRow=function(h){this._ctx.beginPath(),this._ctx.rect(0,h*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(h,u){return(u?"italic":"")+" "+(h?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},e.prototype._getContrastColor=function(h){if(1!==this._optionsService.options.minimumContrastRatio){var u=this._colors.contrastCache.getColor(h.bg,h.fg);if(void 0!==u)return u||void 0;var d=h.getFgColor(),p=h.getFgColorMode(),v=h.getBgColor(),g=h.getBgColorMode(),b=!!h.isInverse(),w=!!h.isInverse();if(b){var x=d;d=v,v=x;var L=p;p=g,g=L}var k=this._resolveBackgroundRgba(g,v,b),T=this._resolveForegroundRgba(p,d,b,w),F=E.rgba.ensureContrastRatio(k,T,this._optionsService.options.minimumContrastRatio);if(F){var W={css:E.channels.toCss(F>>24&255,F>>16&255,F>>8&255),rgba:F};return this._colors.contrastCache.setColor(h.bg,h.fg,W),W}this._colors.contrastCache.setColor(h.bg,h.fg,null)}},e.prototype._resolveBackgroundRgba=function(h,u,d){switch(h){case 16777216:case 33554432:return this._colors.ansi[u].rgba;case 50331648:return u<<8;default:return d?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(h,u,d,p){switch(h){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&p&&u<8&&(u+=8),this._colors.ansi[u].rgba;case 50331648:return u<<8;default:return d?this._colors.background.rgba:this._colors.foreground.rgba}},e}();u.BaseRenderLayer=x},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.serviceRegistry=new Map,u.getServiceDependencies=function(h){return h.di$dependencies||[]},u.createDecorator=function(h){if(u.serviceRegistry.has(h))return u.serviceRegistry.get(h);var r=function(h,u,d){if(3!=arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");h.di$target===h?h.di$dependencies.push({id:r,index:d}):(h.di$dependencies=[{id:r,index:d}],h.di$target=h)};return r.toString=function(){return h},u.serviceRegistry.set(h,r),r}},function(h,u,d){function i(h,u,d,p){if(void 0===d&&(d=0),void 0===p&&(p=h.length),d>=h.length)return h;d=(h.length+d)%h.length,p=p>=h.length?h.length:(h.length+p)%h.length;for(var v=d;v<p;++v)h[v]=u;return h}Object.defineProperty(u,"__esModule",{value:!0}),u.fill=function(h,u,d,p){return h.fill?h.fill(u,d,p):i(h,u,d,p)},u.fillFallback=i,u.concat=function(h,u){var d=new h.constructor(h.length+u.length);return d.set(h),d.set(u,h.length),d}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(7),v=d(3),g=d(5),b=d(6);u.DEFAULT_ATTR_DATA=Object.freeze(new b.AttributeData);var w=function(){function e(h,u,d){void 0===d&&(d=!1),this.isWrapped=d,this._combined={},this._data=new Uint32Array(3*h);for(var p=u||g.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),b=0;b<h;++b)this.setCell(b,p);this.length=h}return e.prototype.get=function(h){var u=this._data[3*h+0],d=2097151&u;return[this._data[3*h+1],2097152&u?this._combined[h]:d?p.stringFromCodePoint(d):"",u>>22,2097152&u?this._combined[h].charCodeAt(this._combined[h].length-1):d]},e.prototype.set=function(h,u){this._data[3*h+1]=u[v.CHAR_DATA_ATTR_INDEX],u[v.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=u[1],this._data[3*h+0]=2097152|h|u[v.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=u[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[v.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(h){return this._data[3*h+0]>>22},e.prototype.hasWidth=function(h){return 12582912&this._data[3*h+0]},e.prototype.getFg=function(h){return this._data[3*h+1]},e.prototype.getBg=function(h){return this._data[3*h+2]},e.prototype.hasContent=function(h){return 4194303&this._data[3*h+0]},e.prototype.getCodePoint=function(h){var u=this._data[3*h+0];return 2097152&u?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&u},e.prototype.isCombined=function(h){return 2097152&this._data[3*h+0]},e.prototype.getString=function(h){var u=this._data[3*h+0];return 2097152&u?this._combined[h]:2097151&u?p.stringFromCodePoint(2097151&u):""},e.prototype.loadCell=function(h,u){var d=3*h;return u.content=this._data[d+0],u.fg=this._data[d+1],u.bg=this._data[d+2],2097152&u.content&&(u.combinedData=this._combined[h]),u},e.prototype.setCell=function(h,u){2097152&u.content&&(this._combined[h]=u.combinedData),this._data[3*h+0]=u.content,this._data[3*h+1]=u.fg,this._data[3*h+2]=u.bg},e.prototype.setCellFromCodePoint=function(h,u,d,p,v){this._data[3*h+0]=u|d<<22,this._data[3*h+1]=p,this._data[3*h+2]=v},e.prototype.addCodepointToCell=function(h,u){var d=this._data[3*h+0];2097152&d?this._combined[h]+=p.stringFromCodePoint(u):(2097151&d?(this._combined[h]=p.stringFromCodePoint(2097151&d)+p.stringFromCodePoint(u),d&=-2097152,d|=2097152):d=4194304|u,this._data[3*h+0]=d)},e.prototype.insertCells=function(h,u,d,p){if((h%=this.length)&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0),u<this.length-h){for(var v=new g.CellData,b=this.length-h-u-1;b>=0;--b)this.setCell(h+u+b,this.loadCell(h+b,v));for(b=0;b<u;++b)this.setCell(h+b,d)}else for(b=h;b<this.length;++b)this.setCell(b,d);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0)},e.prototype.deleteCells=function(h,u,d,p){if(h%=this.length,u<this.length-h){for(var v=new g.CellData,b=0;b<this.length-h-u;++b)this.setCell(h+b,this.loadCell(h+u+b,v));for(b=this.length-u;b<this.length;++b)this.setCell(b,d)}else for(b=h;b<this.length;++b)this.setCell(b,d);h&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0),0!==this.getWidth(h)||this.hasContent(h)||this.setCellFromCodePoint(h,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0)},e.prototype.replaceCells=function(h,u,d,p){for(h&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0),u<this.length&&2===this.getWidth(u-1)&&this.setCellFromCodePoint(u,0,1,(null==p?void 0:p.fg)||0,(null==p?void 0:p.bg)||0);h<u&&h<this.length;)this.setCell(h++,d)},e.prototype.resize=function(h,u){if(h!==this.length){if(h>this.length){var d=new Uint32Array(3*h);this.length&&(3*h<this._data.length?d.set(this._data.subarray(0,3*h)):d.set(this._data)),this._data=d;for(var p=this.length;p<h;++p)this.setCell(p,u)}else if(h){(d=new Uint32Array(3*h)).set(this._data.subarray(0,3*h)),this._data=d;var v=Object.keys(this._combined);for(p=0;p<v.length;p++){var g=parseInt(v[p],10);g>=h&&delete this._combined[g]}}else this._data=new Uint32Array(0),this._combined={};this.length=h}},e.prototype.fill=function(h){this._combined={};for(var u=0;u<this.length;++u)this.setCell(u,h)},e.prototype.copyFrom=function(h){for(var u in this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={},h._combined)this._combined[u]=h._combined[u];this.isWrapped=h.isWrapped},e.prototype.clone=function(){var h=new e(0);for(var u in h._data=new Uint32Array(this._data),h.length=this.length,this._combined)h._combined[u]=this._combined[u];return h.isWrapped=this.isWrapped,h},e.prototype.getTrimmedLength=function(){for(var h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0},e.prototype.copyCellsFrom=function(h,u,d,p,v){var g=h._data;if(v)for(var b=p-1;b>=0;b--)for(var w=0;w<3;w++)this._data[3*(d+b)+w]=g[3*(u+b)+w];else for(b=0;b<p;b++)for(w=0;w<3;w++)this._data[3*(d+b)+w]=g[3*(u+b)+w];var E=Object.keys(h._combined);for(w=0;w<E.length;w++){var x=parseInt(E[w],10);x>=u&&(this._combined[x-u+d]=h._combined[x])}},e.prototype.translateToString=function(h,u,d){void 0===h&&(h=!1),void 0===u&&(u=0),void 0===d&&(d=this.length),h&&(d=Math.min(d,this.getTrimmedLength()));for(var g="";u<d;){var b=this._data[3*u+0],w=2097151&b;g+=2097152&b?this._combined[u]:w?p.stringFromCodePoint(w):v.WHITESPACE_CELL_CHAR,u+=b>>22||1}return g},e}();u.BufferLine=w},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.promptLabel="Terminal input",u.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.CHARSETS={},u.DEFAULT_CHARSET=u.CHARSETS.B,u.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"\xb0",g:"\xb1",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"\xa3","~":"\xb7"},u.CHARSETS.A={"#":"\xa3"},u.CHARSETS.B=null,u.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},u.CHARSETS.C=u.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},u.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},u.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},u.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},u.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},u.CHARSETS.E=u.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},u.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},u.CHARSETS.H=u.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},u.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h,u){if(void 0===h&&(h=32),void 0===u&&(u=32),this.maxLength=h,this.maxSubParamsLength=u,u>256)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(h){var u=new e;if(!h.length)return u;for(var d=h[0]instanceof Array?1:0;d<h.length;++d){var p=h[d];if(p instanceof Array)for(var v=0;v<p.length;++v)u.addSubParam(p[v]);else u.addParam(p)}return u},e.prototype.clone=function(){var h=new e(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h},e.prototype.toArray=function(){for(var h=[],u=0;u<this.length;++u){h.push(this.params[u]);var d=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-d>0&&h.push(Array.prototype.slice.call(this._subParams,d,p))}return h},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>2147483647?2147483647:h}},e.prototype.addSubParam=function(h){if(this._digitIsSub=!0,this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>2147483647?2147483647:h,this._subParamsIdx[this.length-1]++}}},e.prototype.hasSubParams=function(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0},e.prototype.getSubParams=function(h){var u=this._subParamsIdx[h]>>8,d=255&this._subParamsIdx[h];return d-u>0?this._subParams.subarray(u,d):null},e.prototype.getSubParamsAll=function(){for(var h={},u=0;u<this.length;++u){var d=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-d>0&&(h[u]=this._subParams.slice(d,p))}return h},e.prototype.addDigit=function(h){var u;if(!(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var d=this._digitIsSub?this._subParams:this.params,p=d[u-1];d[u-1]=~p?Math.min(10*p+h,2147483647):h}},e}();u.Params=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(21),v=d(7),g=function(){function e(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return e.prototype.addHandler=function(h,u){void 0===this._handlers[h]&&(this._handlers[h]=[]);var d=this._handlers[h];return d.push(u),{dispose:function(){var h=d.indexOf(u);-1!==h&&d.splice(h,1)}}},e.prototype.setHandler=function(h,u){this._handlers[h]=[u]},e.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},e.prototype.setHandlerFallback=function(h){this._handlerFb=h},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},e.prototype._start=function(){var h=this._handlers[this._id];if(h)for(var u=h.length-1;u>=0;u--)h[u].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(h,u,d){var p=this._handlers[this._id];if(p)for(var g=p.length-1;g>=0;g--)p[g].put(h,u,d);else this._handlerFb(this._id,"PUT",v.utf32ToString(h,u,d))},e.prototype._end=function(h){var u=this._handlers[this._id];if(u){for(var d=u.length-1;d>=0&&!1===u[d].end(h);d--);for(d--;d>=0;d--)u[d].end(!1)}else this._handlerFb(this._id,"END",h)},e.prototype.start=function(){this.reset(),this._id=-1,this._state=1},e.prototype.put=function(h,u,d){if(3!==this._state){if(1===this._state)for(;u<d;){var p=h[u++];if(59===p){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+p-48}2===this._state&&d-u>0&&this._put(h,u,d)}},e.prototype.end=function(h){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(h)),this._id=-1,this._state=0)},e}();u.OscParser=g;var b=function(){function e(h){this._handler=h,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(h,u,d){this._hitLimit||(this._data+=v.utf32ToString(h,u,d),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(h){var u;return this._hitLimit?u=!1:h&&(u=this._handler(this._data)),this._data="",this._hitLimit=!1,u},e}();u.OscHandler=b},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.PAYLOAD_LIMIT=1e7},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(7),v=d(19),g=d(21),b=[],w=function(){function e(){this._handlers=Object.create(null),this._active=b,this._ident=0,this._handlerFb=function(){}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.addHandler=function(h,u){void 0===this._handlers[h]&&(this._handlers[h]=[]);var d=this._handlers[h];return d.push(u),{dispose:function(){var h=d.indexOf(u);-1!==h&&d.splice(h,1)}}},e.prototype.setHandler=function(h,u){this._handlers[h]=[u]},e.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},e.prototype.setHandlerFallback=function(h){this._handlerFb=h},e.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=b,this._ident=0},e.prototype.hook=function(h,u){if(this.reset(),this._ident=h,this._active=this._handlers[h]||b,this._active.length)for(var d=this._active.length-1;d>=0;d--)this._active[d].hook(u);else this._handlerFb(this._ident,"HOOK",u)},e.prototype.put=function(h,u,d){if(this._active.length)for(var v=this._active.length-1;v>=0;v--)this._active[v].put(h,u,d);else this._handlerFb(this._ident,"PUT",p.utf32ToString(h,u,d))},e.prototype.unhook=function(h){if(this._active.length){for(var u=this._active.length-1;u>=0&&!1===this._active[u].unhook(h);u--);for(u--;u>=0;u--)this._active[u].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",h);this._active=b,this._ident=0},e}();u.DcsParser=w;var E=function(){function e(h){this._handler=h,this._data="",this._hitLimit=!1}return e.prototype.hook=function(h){this._params=h.clone(),this._data="",this._hitLimit=!1},e.prototype.put=function(h,u,d){this._hitLimit||(this._data+=p.utf32ToString(h,u,d),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(h){var u;return this._hitLimit?u=!1:h&&(u=this._handler(this._data,this._params?this._params:new v.Params)),this._params=void 0,this._data="",this._hitLimit=!1,u},e}();u.DcsHandler=E},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(24),v=d(42),g=[];u.acquireCharAtlas=function(h,u,d,b,w){for(var E=p.generateConfig(b,w,h,d),x=0;x<g.length;x++){var L=(k=g[x]).ownedBy.indexOf(u);if(L>=0){if(p.configEquals(k.config,E))return k.atlas;1===k.ownedBy.length?(k.atlas.dispose(),g.splice(x,1)):k.ownedBy.splice(L,1);break}}for(x=0;x<g.length;x++){var k=g[x];if(p.configEquals(k.config,E))return k.ownedBy.push(u),k.atlas}var T={atlas:new v.DynamicCharAtlas(document,E),config:E,ownedBy:[u]};return g.push(T),T.atlas},u.removeTerminalFromCache=function(h){for(var u=0;u<g.length;u++){var d=g[u].ownedBy.indexOf(h);if(-1!==d){1===g[u].ownedBy.length?(g[u].atlas.dispose(),g.splice(u,1)):g[u].ownedBy.splice(d,1);break}}}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(3);u.generateConfig=function(h,u,d,p){var v={foreground:p.foreground,background:p.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:p.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:h,scaledCharHeight:u,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,colors:v}},u.configEquals=function(h,u){for(var d=0;d<h.colors.ansi.length;d++)if(h.colors.ansi[d].rgba!==u.colors.ansi[d].rgba)return!1;return h.devicePixelRatio===u.devicePixelRatio&&h.fontFamily===u.fontFamily&&h.fontSize===u.fontSize&&h.fontWeight===u.fontWeight&&h.fontWeightBold===u.fontWeightBold&&h.allowTransparency===u.allowTransparency&&h.scaledCharWidth===u.scaledCharWidth&&h.scaledCharHeight===u.scaledCharHeight&&h.colors.foreground===u.colors.foreground&&h.colors.background===u.colors.background},u.is256Color=function(h){return h<p.DEFAULT_COLOR}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(10),v=d(44),g=p.css.toColor("#ffffff"),b=p.css.toColor("#000000"),w=p.css.toColor("#ffffff"),E=p.css.toColor("#000000"),x={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};u.DEFAULT_ANSI_COLORS=function(){for(var h=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],u=[0,95,135,175,215,255],d=0;d<216;d++){var v=u[d/36%6|0],g=u[d/6%6|0],b=u[d%6];h.push({css:p.channels.toCss(v,g,b),rgba:p.channels.toRgba(v,g,b)})}for(d=0;d<24;d++){var w=8+10*d;h.push({css:p.channels.toCss(w,w,w),rgba:p.channels.toRgba(w,w,w)})}return h}();var L=function(){function e(h,d){this.allowTransparency=d;var L=h.createElement("canvas");L.width=1,L.height=1;var k=L.getContext("2d");if(!k)throw Error("Could not get rendering context");this._ctx=k,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new v.ColorContrastCache,this.colors={foreground:g,background:b,cursor:w,cursorAccent:E,selection:x,selectionOpaque:p.color.blend(b,x),ansi:u.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return e.prototype.onOptionsChange=function(h){"minimumContrastRatio"===h&&this._contrastCache.clear()},e.prototype.setTheme=function(h){void 0===h&&(h={}),this.colors.foreground=this._parseColor(h.foreground,g),this.colors.background=this._parseColor(h.background,b),this.colors.cursor=this._parseColor(h.cursor,w,!0),this.colors.cursorAccent=this._parseColor(h.cursorAccent,E,!0),this.colors.selection=this._parseColor(h.selection,x,!0),this.colors.selectionOpaque=p.color.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(h.black,u.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(h.red,u.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(h.green,u.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(h.yellow,u.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(h.blue,u.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(h.magenta,u.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(h.cyan,u.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(h.white,u.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(h.brightBlack,u.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(h.brightRed,u.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(h.brightGreen,u.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(h.brightYellow,u.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(h.brightBlue,u.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(h.brightMagenta,u.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(h.brightCyan,u.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(h.brightWhite,u.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},e.prototype._parseColor=function(h,u,d){if(void 0===d&&(d=this.allowTransparency),void 0===h)return u;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=h,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+h+" is invalid using fallback "+u.css),u;this._ctx.fillRect(0,0,1,1);var v=this._ctx.getImageData(0,0,1,1).data;if(255!==v[3]){if(!d)return console.warn("Color: "+h+" is using transparency, but allowTransparency is false. Using fallback "+u.css+"."),u;var g=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(h){return Number(h)}),b=g[0],w=g[1],E=g[2],x=g[3];return{rgba:p.channels.toRgba(b,w,E,Math.round(255*x)),css:h}}return{css:this._ctx.fillStyle,rgba:p.channels.toRgba(v[0],v[1],v[2],v[3])}},e}();u.ColorManager=L},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.throwIfFalsy=function(h){if(!h)throw Error("value must not be falsy");return h}},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(6),b=d(3),w=d(5),E=function(h){function t(u,d,p){var v=h.call(this)||this;return v.content=0,v.combinedData="",v.fg=u.fg,v.bg=u.bg,v.combinedData=d,v._width=p,v}return v(t,h),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(h){throw Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(g.AttributeData);u.JoinedCellData=E;var x=function(){function e(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}return e.prototype.registerCharacterJoiner=function(h){var u={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(u),u.id},e.prototype.deregisterCharacterJoiner=function(h){for(var u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===h)return this._characterJoiners.splice(u,1),!0;return!1},e.prototype.getJoinedCharacters=function(h){if(0===this._characterJoiners.length)return[];var u=this._bufferService.buffer.lines.get(h);if(!u||0===u.length)return[];for(var d=[],p=u.translateToString(!0),v=0,g=0,w=0,E=u.getFg(0),x=u.getBg(0),L=0;L<u.getTrimmedLength();L++)if(u.loadCell(L,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==E||this._workCell.bg!==x){if(L-v>1)for(var k=this._getJoinedRanges(p,w,g,u,v),T=0;T<k.length;T++)d.push(k[T]);v=L,w=g,E=this._workCell.fg,x=this._workCell.bg}g+=this._workCell.getChars().length||b.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1)for(k=this._getJoinedRanges(p,w,g,u,v),T=0;T<k.length;T++)d.push(k[T]);return d},e.prototype._getJoinedRanges=function(h,u,d,p,v){for(var g=h.substring(u,d),b=this._characterJoiners[0].handler(g),w=1;w<this._characterJoiners.length;w++)for(var E=this._characterJoiners[w].handler(g),x=0;x<E.length;x++)e._mergeRanges(b,E[x]);return this._stringRangesToCellRanges(b,p,v),b},e.prototype._stringRangesToCellRanges=function(h,u,d){var p=0,v=!1,g=0,w=h[0];if(w){for(var E=d;E<this._bufferService.cols;E++){var x=u.getWidth(E),L=u.getString(E).length||b.WHITESPACE_CELL_CHAR.length;if(0!==x){if(!v&&w[0]<=g&&(w[0]=E,v=!0),w[1]<=g){if(w[1]=E,!(w=h[++p]))break;w[0]<=g?(w[0]=E,v=!0):v=!1}g+=L}}w&&(w[1]=this._bufferService.cols)}},e._mergeRanges=function(h,u){for(var d=!1,p=0;p<h.length;p++){var v=h[p];if(d){if(u[1]<=v[0])return h[p-1][1]=u[1],h;if(u[1]<=v[1])return h[p-1][1]=Math.max(u[1],v[1]),h.splice(p,1),h;h.splice(p,1),p--}else{if(u[1]<=v[0])return h.splice(p,0,u),h;if(u[1]<=v[1])return v[0]=Math.min(u[0],v[0]),h;u[0]<v[1]&&(v[0]=Math.min(u[0],v[0]),d=!0)}}return d?h[h.length-1][1]=u[1]:h.push(u),h},e}();u.CharacterJoinerRegistry=x},function(h,u,d){function i(h,u){var d=u.getBoundingClientRect();return[h.clientX-d.left,h.clientY-d.top]}Object.defineProperty(u,"__esModule",{value:!0}),u.getCoordsRelativeToElement=i,u.getCoords=function(h,u,d,p,v,g,b,w){if(v){var E=i(h,u);if(E)return E[0]=Math.ceil((E[0]+(w?g/2:0))/g),E[1]=Math.ceil(E[1]/b),E[0]=Math.min(Math.max(E[0],1),d+(w?1:0)),E[1]=Math.min(Math.max(E[1],1),p),E}},u.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h){this._renderCallback=h}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.refresh=function(h,u,d){var p=this;this._rowCount=d,h=void 0!==h?h:0,u=void 0!==u?u:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,h):h,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return p._innerRefresh()}))},e.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},e}();u.RenderDebouncer=p},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=function(h){function t(){var u=null!==h&&h.apply(this,arguments)||this;return u._currentDevicePixelRatio=window.devicePixelRatio,u}return v(t,h),t.prototype.setListener=function(h){var u=this;this._listener&&this.clearListener(),this._listener=h,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(d(2).Disposable);u.ScreenDprMonitor=g},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.clone=function e(h,u){if(void 0===u&&(u=5),"object"!=typeof h)return h;var d=Array.isArray(h)?[]:{};for(var p in h)d[p]=u<=1?h[p]:h[p]?e(h[p],u-1):h[p];return d}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(5),v=d(33),g=d(17),b=d(0),w=d(81),E=function(){function e(h){this._core=new v.Terminal(h),this._addonManager=new w.AddonManager}return Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new T(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return new F(this._core)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return new L(this._core.buffers)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(h,u){this._verifyIntegers(h,u),this._core.resize(h,u)},e.prototype.open=function(h){this._core.open(h)},e.prototype.attachCustomKeyEventHandler=function(h){this._core.attachCustomKeyEventHandler(h)},e.prototype.registerLinkMatcher=function(h,u,d){return this._core.registerLinkMatcher(h,u,d)},e.prototype.deregisterLinkMatcher=function(h){this._core.deregisterLinkMatcher(h)},e.prototype.registerLinkProvider=function(h){return this._core.registerLinkProvider(h)},e.prototype.registerCharacterJoiner=function(h){return this._core.registerCharacterJoiner(h)},e.prototype.deregisterCharacterJoiner=function(h){this._core.deregisterCharacterJoiner(h)},e.prototype.registerMarker=function(h){return this._verifyIntegers(h),this._core.addMarker(h)},e.prototype.addMarker=function(h){return this.registerMarker(h)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(h,u,d){this._verifyIntegers(h,u,d),this._core.select(h,u,d)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(h,u){this._verifyIntegers(h,u),this._core.selectLines(h,u)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(h){this._verifyIntegers(h),this._core.scrollLines(h)},e.prototype.scrollPages=function(h){this._verifyIntegers(h),this._core.scrollPages(h)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(h){this._verifyIntegers(h),this._core.scrollToLine(h)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(h,u){this._core.write(h,u)},e.prototype.writeUtf8=function(h,u){this._core.write(h,u)},e.prototype.writeln=function(h,u){this._core.write(h),this._core.write("\r\n",u)},e.prototype.paste=function(h){this._core.paste(h)},e.prototype.getOption=function(h){return this._core.optionsService.getOption(h)},e.prototype.setOption=function(h,u){this._core.optionsService.setOption(h,u)},e.prototype.refresh=function(h,u){this._verifyIntegers(h,u),this._core.refresh(h,u)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(h){return this._addonManager.loadAddon(this,h)},Object.defineProperty(e,"strings",{get:function(){return g},enumerable:!0,configurable:!0}),e.prototype._verifyIntegers=function(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];h.forEach(function(h){if(h===1/0||isNaN(h)||h%1!=0)throw Error("This API only accepts integers")})},e}();u.Terminal=E;var x=function(){function e(h,u){this._buffer=h,this.type=u}return e.prototype.init=function(h){return this._buffer=h,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),e.prototype.getLine=function(h){var u=this._buffer.lines.get(h);if(u)return new k(u)},e.prototype.getNullCell=function(){return new p.CellData},e}(),L=function(){function e(h){var u=this;this._buffers=h,this._onBufferChange=new b.EventEmitter,this._normal=new x(this._buffers.normal,"normal"),this._alternate=new x(this._buffers.alt,"alternate"),this._buffers.onBufferActivate(function(){return u._onBufferChange.fire(u.active)})}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw Error("Active buffer is neither normal nor alternate")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!0,configurable:!0}),e}(),k=function(){function e(h){this._line=h}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!0,configurable:!0}),e.prototype.getCell=function(h,u){if(!(h<0||h>=this._line.length))return u?(this._line.loadCell(h,u),u):this._line.loadCell(h,new p.CellData)},e.prototype.translateToString=function(h,u,d){return this._line.translateToString(h,u,d)},e}(),T=function(){function e(h){this._core=h}return e.prototype.registerCsiHandler=function(h,u){return this._core.addCsiHandler(h,function(h){return u(h.toArray())})},e.prototype.addCsiHandler=function(h,u){return this.registerCsiHandler(h,u)},e.prototype.registerDcsHandler=function(h,u){return this._core.addDcsHandler(h,function(h,d){return u(h,d.toArray())})},e.prototype.addDcsHandler=function(h,u){return this.registerDcsHandler(h,u)},e.prototype.registerEscHandler=function(h,u){return this._core.addEscHandler(h,u)},e.prototype.addEscHandler=function(h,u){return this.registerEscHandler(h,u)},e.prototype.registerOscHandler=function(h,u){return this._core.addOscHandler(h,u)},e.prototype.addOscHandler=function(h,u){return this.registerOscHandler(h,u)},e}(),F=function(){function e(h){this._core=h}return e.prototype.register=function(h){this._core.unicodeService.register(h)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(h){this._core.unicodeService.activeVersion=h},enumerable:!0,configurable:!0}),e}()},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(34),b=d(35),w=d(36),E=d(12),x=d(37),L=d(39),k=d(49),T=d(50),F=d(11),W=d(8),q=d(17),N=d(53),U=d(54),z=d(55),K=d(56),V=d(58),G=d(0),Y=d(16),J=d(59),X=d(25),Z=d(60),$=d(1),Q=d(61),ee=d(4),et=d(62),er=d(63),ei=d(2),en=d(69),eo=d(70),es=d(71),ea=d(72),ec=d(73),el=d(74),eh=d(75),eu=d(76),ef=d(77),e_=d(78),ed=d(80),ep=window.document,ev=function(h){function t(u){void 0===u&&(u={});var d=h.call(this)||this;return d.browser=F,d.mouseEvents=0,d._keyDownHandled=!1,d._blankLine=null,d._onCursorMove=new G.EventEmitter,d._onData=new G.EventEmitter,d._onBinary=new G.EventEmitter,d._onKey=new G.EventEmitter,d._onLineFeed=new G.EventEmitter,d._onRender=new G.EventEmitter,d._onResize=new G.EventEmitter,d._onScroll=new G.EventEmitter,d._onSelectionChange=new G.EventEmitter,d._onTitleChange=new G.EventEmitter,d._onFocus=new G.EventEmitter,d._onBlur=new G.EventEmitter,d.onA11yCharEmitter=new G.EventEmitter,d.onA11yTabEmitter=new G.EventEmitter,d._instantiationService=new ec.InstantiationService,d.optionsService=new Q.OptionsService(u),d._instantiationService.setService($.IOptionsService,d.optionsService),d._bufferService=d._instantiationService.createInstance(er.BufferService),d._instantiationService.setService($.IBufferService,d._bufferService),d._logService=d._instantiationService.createInstance(es.LogService),d._instantiationService.setService($.ILogService,d._logService),d._coreService=d._instantiationService.createInstance(eo.CoreService,function(){return d.scrollToBottom()}),d._instantiationService.setService($.ICoreService,d._coreService),d._coreService.onData(function(h){return d._onData.fire(h)}),d._coreService.onBinary(function(h){return d._onBinary.fire(h)}),d._coreMouseService=d._instantiationService.createInstance(el.CoreMouseService),d._instantiationService.setService($.ICoreMouseService,d._coreMouseService),d._dirtyRowService=d._instantiationService.createInstance(ea.DirtyRowService),d._instantiationService.setService($.IDirtyRowService,d._dirtyRowService),d.unicodeService=d._instantiationService.createInstance(e_.UnicodeService),d._instantiationService.setService($.IUnicodeService,d.unicodeService),d._charsetService=d._instantiationService.createInstance(ed.CharsetService),d._instantiationService.setService($.ICharsetService,d._charsetService),d._setupOptionsListeners(),d._setup(),d._writeBuffer=new eh.WriteBuffer(function(h){return d._inputHandler.parse(h)}),d}return v(t,h),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var u,d,p,v;this._isDisposed||(h.prototype.dispose.call(this),null===(u=this._windowsMode)||void 0===u||u.dispose(),this._windowsMode=void 0,null===(d=this._renderService)||void 0===d||d.dispose(),this._customKeyEventHandler=null,this.write=function(){},null===(v=null===(p=this.element)||void 0===p?void 0:p.parentNode)||void 0===v||v.removeChild(this.element))},t.prototype._setup=function(){var h=this;this._customKeyEventHandler=null,this.insertMode=!1,this.bracketedPasteMode=!1,this._userScrolling=!1,this._inputHandler?this._inputHandler.reset():(this._inputHandler=new x.InputHandler(this,this._bufferService,this._charsetService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService,this.unicodeService,this._instantiationService),this._inputHandler.onRequestBell(function(){return h.bell()}),this._inputHandler.onRequestRefreshRows(function(u,d){return h.refresh(u,d)}),this._inputHandler.onRequestReset(function(){return h.reset()}),this._inputHandler.onCursorMove(function(){return h._onCursorMove.fire()}),this._inputHandler.onLineFeed(function(){return h._onLineFeed.fire()}),this.register(this._inputHandler)),this.linkifier||(this.linkifier=new k.Linkifier(this._bufferService,this._logService,this.optionsService,this.unicodeService)),this.linkifier2||(this.linkifier2=new eu.Linkifier2(this._bufferService)),this.options.windowsMode&&this._enableWindowsMode()},t.prototype._enableWindowsMode=function(){var h=this;if(!this._windowsMode){var u=[];u.push(this.onLineFeed(J.updateWindowsModeWrappedState.bind(null,this._bufferService))),u.push(this.addCsiHandler({final:"H"},function(){return J.updateWindowsModeWrappedState(h._bufferService),!1})),this._windowsMode={dispose:function(){u.forEach(function(h){return h.dispose()})}}}},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._setupOptionsListeners=function(){var h=this;this.optionsService.onOptionChange(function(u){var d,p,v,g,b;switch(u){case"fontFamily":case"fontSize":null===(d=h._renderService)||void 0===d||d.clear(),null===(p=h._charSizeService)||void 0===p||p.measure();break;case"cursorBlink":case"cursorStyle":h.refresh(h.buffer.y,h.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":h._renderService&&(h._renderService.clear(),h._renderService.onResize(h.cols,h.rows),h.refresh(0,h.rows-1));break;case"rendererType":h._renderService&&(h._renderService.setRenderer(h._createRenderer()),h._renderService.onResize(h.cols,h.rows));break;case"scrollback":h.buffers.resize(h.cols,h.rows),null===(v=h.viewport)||void 0===v||v.syncScrollArea();break;case"screenReaderMode":h.optionsService.options.screenReaderMode?!h._accessibilityManager&&h._renderService&&(h._accessibilityManager=new z.AccessibilityManager(h,h._renderService)):(null===(g=h._accessibilityManager)||void 0===g||g.dispose(),h._accessibilityManager=null);break;case"tabStopWidth":h.buffers.setupTabStops();break;case"theme":h._setTheme(h.optionsService.options.theme);break;case"windowsMode":h.optionsService.options.windowsMode?h._enableWindowsMode():(null===(b=h._windowsMode)||void 0===b||b.dispose(),h._windowsMode=void 0)}})},t.prototype._onTextAreaFocus=function(h){this.sendFocus&&this._coreService.triggerDataEvent(E.C0.ESC+"[I"),this.updateCursorStyle(h),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},t.prototype.blur=function(){return this.textarea.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(E.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._initGlobal=function(){var h=this;this._bindKeys(),this.register(W.addDisposableDomListener(this.element,"copy",function(u){h.hasSelection()&&w.copyHandler(u,h._selectionService)}));var t=function(u){return w.handlePasteEvent(u,h.textarea,h.bracketedPasteMode,h._coreService)};this.register(W.addDisposableDomListener(this.textarea,"paste",t)),this.register(W.addDisposableDomListener(this.element,"paste",t)),F.isFirefox?this.register(W.addDisposableDomListener(this.element,"mousedown",function(u){2===u.button&&w.rightClickHandler(u,h.textarea,h.screenElement,h._selectionService,h.options.rightClickSelectsWord)})):this.register(W.addDisposableDomListener(this.element,"contextmenu",function(u){w.rightClickHandler(u,h.textarea,h.screenElement,h._selectionService,h.options.rightClickSelectsWord)})),F.isLinux&&this.register(W.addDisposableDomListener(this.element,"auxclick",function(u){1===u.button&&w.moveTextAreaUnderMouseCursor(u,h.textarea,h.screenElement)}))},t.prototype._bindKeys=function(){var h=this;this.register(W.addDisposableDomListener(this.textarea,"keyup",function(u){return h._keyUp(u)},!0)),this.register(W.addDisposableDomListener(this.textarea,"keydown",function(u){return h._keyDown(u)},!0)),this.register(W.addDisposableDomListener(this.textarea,"keypress",function(u){return h._keyPress(u)},!0)),this.register(W.addDisposableDomListener(this.textarea,"compositionstart",function(){return h._compositionHelper.compositionstart()})),this.register(W.addDisposableDomListener(this.textarea,"compositionupdate",function(u){return h._compositionHelper.compositionupdate(u)})),this.register(W.addDisposableDomListener(this.textarea,"compositionend",function(){return h._compositionHelper.compositionend()})),this.register(this.onRender(function(){return h._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(u){return h._queueLinkification(u.start,u.end)}))},t.prototype.open=function(h){var u=this;if(!h)throw Error("Terminal requires a parent element.");ep.body.contains(h)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=h.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),h.appendChild(this.element);var d=ep.createDocumentFragment();this._viewportElement=ep.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),d.appendChild(this._viewportElement),this._viewportScrollArea=ep.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ep.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ep.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),d.appendChild(this.screenElement),this.textarea=ep.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",q.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(W.addDisposableDomListener(this.textarea,"focus",function(h){return u._onTextAreaFocus(h)})),this.register(W.addDisposableDomListener(this.textarea,"blur",function(){return u._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var p=this._instantiationService.createInstance(ef.CoreBrowserService,this.textarea);this._instantiationService.setService(ee.ICoreBrowserService,p),this._charSizeService=this._instantiationService.createInstance(et.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(ee.ICharSizeService,this._charSizeService),this._compositionView=ep.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(g.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(d),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new X.ColorManager(ep,this.options.allowTransparency),this.optionsService.onOptionChange(function(h){return u._colorManager.onOptionsChange(h)}),this._colorManager.setTheme(this._theme);var v=this._createRenderer();this._renderService=this._instantiationService.createInstance(Z.RenderService,v,this.rows,this.screenElement),this._instantiationService.setService(ee.IRenderService,this._renderService),this._renderService.onRender(function(h){return u._onRender.fire(h)}),this.onResize(function(h){return u._renderService.resize(h.cols,h.rows)}),this._soundService=this._instantiationService.createInstance(N.SoundService),this._instantiationService.setService(ee.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(en.MouseService),this._instantiationService.setService(ee.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(b.Viewport,function(h,d){return u.scrollLines(h,d)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove(function(){return u._renderService.onCursorMove()})),this.register(this.onResize(function(){return u._renderService.onResize(u.cols,u.rows)})),this.register(this.onBlur(function(){return u._renderService.onBlur()})),this.register(this.onFocus(function(){return u._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return u.viewport.syncScrollArea()})),this._selectionService=this._instantiationService.createInstance(T.SelectionService,function(h,d){return u.scrollLines(h,d)},this.element,this.screenElement),this._instantiationService.setService(ee.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange(function(){return u._onSelectionChange.fire()})),this.register(this._selectionService.onRedrawRequest(function(h){return u._renderService.onSelectionChanged(h.start,h.end,h.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(h){u.textarea.value=h,u.textarea.focus(),u.textarea.select()})),this.register(this.onScroll(function(){u.viewport.syncScrollArea(),u._selectionService.refresh()})),this.register(W.addDisposableDomListener(this._viewportElement,"scroll",function(){return u._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(U.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return u._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(W.addDisposableDomListener(this.element,"mousedown",function(h){return u._selectionService.onMouseDown(h)})),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new z.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(L.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(K.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(h){var u,d,p;this._theme=h,null===(u=this._colorManager)||void 0===u||u.setTheme(h),null===(d=this._renderService)||void 0===d||d.setColors(this._colorManager.colors),null===(p=this.viewport)||void 0===p||p.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var h=this,u=this,d=this.element;function i(h){var d,p,v=u._mouseService.getRawByteCoords(h,u.screenElement,u.cols,u.rows);if(!v)return!1;switch(h.overrideType||h.type){case"mousemove":p=32,void 0===h.buttons?(d=3,void 0!==h.button&&(d=h.button<3?h.button:3)):d=1&h.buttons?0:4&h.buttons?1:2&h.buttons?2:3;break;case"mouseup":p=0,d=h.button<3?h.button:3;break;case"mousedown":p=1,d=h.button<3?h.button:3;break;case"wheel":0!==h.deltaY&&(p=h.deltaY<0?0:1),d=4;break;default:return!1}return!(void 0===p||void 0===d||d>4)&&u._coreMouseService.triggerMouseEvent({col:v.x-33,row:v.y-33,button:d,action:p,ctrl:h.ctrlKey,alt:h.altKey,shift:h.shiftKey})}var p={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(u){return i(u),u.buttons||(h._document.removeEventListener("mouseup",p.mouseup),p.mousedrag&&h._document.removeEventListener("mousemove",p.mousedrag)),h.cancel(u)},s=function(u){return i(u),u.preventDefault(),h.cancel(u)},a=function(h){h.buttons&&i(h)},l=function(h){h.buttons||i(h)};this._coreMouseService.onProtocolChange(function(u){h.mouseEvents=u,u?("debug"===h.optionsService.options.logLevel&&h._logService.debug("Binding to mouse events:",h._coreMouseService.explainEvents(u)),h.element.classList.add("enable-mouse-events"),h._selectionService.disable()):(h._logService.debug("Unbinding from mouse events."),h.element.classList.remove("enable-mouse-events"),h._selectionService.enable()),8&u?p.mousemove||(d.addEventListener("mousemove",l),p.mousemove=l):(d.removeEventListener("mousemove",p.mousemove),p.mousemove=null),16&u?p.wheel||(d.addEventListener("wheel",s),p.wheel=s):(d.removeEventListener("wheel",p.wheel),p.wheel=null),2&u?p.mouseup||(p.mouseup=o):(h._document.removeEventListener("mouseup",p.mouseup),p.mouseup=null),4&u?p.mousedrag||(p.mousedrag=a):(h._document.removeEventListener("mousemove",p.mousedrag),p.mousedrag=null)}),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(W.addDisposableDomListener(d,"mousedown",function(u){if(u.preventDefault(),h.focus(),h.mouseEvents&&!h._selectionService.shouldForceSelection(u))return i(u),p.mouseup&&h._document.addEventListener("mouseup",p.mouseup),p.mousedrag&&h._document.addEventListener("mousemove",p.mousedrag),h.cancel(u)})),this.register(W.addDisposableDomListener(d,"wheel",function(u){if(p.wheel);else if(!h.buffer.hasScrollback){var d=h.viewport.getLinesScrolled(u);if(0===d)return;for(var v=E.C0.ESC+(h._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(u.deltaY<0?"A":"B"),g="",b=0;b<Math.abs(d);b++)g+=v;h._coreService.triggerDataEvent(g,!0)}})),this.register(W.addDisposableDomListener(d,"wheel",function(u){if(!p.wheel)return h.viewport.onWheel(u)?void 0:h.cancel(u)})),this.register(W.addDisposableDomListener(d,"touchstart",function(u){if(!h.mouseEvents)return h.viewport.onTouchStart(u),h.cancel(u)})),this.register(W.addDisposableDomListener(d,"touchmove",function(u){if(!h.mouseEvents)return h.viewport.onTouchMove(u)?void 0:h.cancel(u)}))},t.prototype.refresh=function(h,u){var d;null===(d=this._renderService)||void 0===d||d.refreshRows(h,u)},t.prototype._queueLinkification=function(h,u){var d;null===(d=this.linkifier)||void 0===d||d.linkifyRows(h,u)},t.prototype.updateCursorStyle=function(h){this._selectionService&&this._selectionService.shouldColumnSelect(h)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scroll=function(h,u){void 0===u&&(u=!1),(d=this._blankLine)&&d.length===this.cols&&d.getFg(0)===h.fg&&d.getBg(0)===h.bg||(d=this.buffer.getBlankLine(h,u),this._blankLine=d),d.isWrapped=u;var d,p=this.buffer.ybase+this.buffer.scrollTop,v=this.buffer.ybase+this.buffer.scrollBottom;if(0===this.buffer.scrollTop){var g=this.buffer.lines.isFull;v===this.buffer.lines.length-1?g?this.buffer.lines.recycle().copyFrom(d):this.buffer.lines.push(d.clone()):this.buffer.lines.splice(v+1,0,d.clone()),g?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var b=v-p+1;this.buffer.lines.shiftElements(p+1,b-1,-1),this.buffer.lines.set(v,d.clone())}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},t.prototype.scrollLines=function(h,u){if(h<0){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else h+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var d=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+h,this.buffer.ybase),0),d!==this.buffer.ydisp&&(u||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},t.prototype.scrollPages=function(h){this.scrollLines(h*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(h){var u=h-this.buffer.ydisp;0!==u&&this.scrollLines(u)},t.prototype.paste=function(h){w.paste(h,this.textarea,this.bracketedPasteMode,this._coreService)},t.prototype.attachCustomKeyEventHandler=function(h){this._customKeyEventHandler=h},t.prototype.addEscHandler=function(h,u){return this._inputHandler.addEscHandler(h,u)},t.prototype.addDcsHandler=function(h,u){return this._inputHandler.addDcsHandler(h,u)},t.prototype.addCsiHandler=function(h,u){return this._inputHandler.addCsiHandler(h,u)},t.prototype.addOscHandler=function(h,u){return this._inputHandler.addOscHandler(h,u)},t.prototype.registerLinkMatcher=function(h,u,d){var p=this.linkifier.registerLinkMatcher(h,u,d);return this.refresh(0,this.rows-1),p},t.prototype.deregisterLinkMatcher=function(h){this.linkifier.deregisterLinkMatcher(h)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(h){return this.linkifier2.registerLinkProvider(h)},t.prototype.registerCharacterJoiner=function(h){var u=this._renderService.registerCharacterJoiner(h);return this.refresh(0,this.rows-1),u},t.prototype.deregisterCharacterJoiner=function(h){this._renderService.deregisterCharacterJoiner(h)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),t.prototype.addMarker=function(h){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+h)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(h,u,d){this._selectionService.setSelection(h,u,d)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var h;null===(h=this._selectionService)||void 0===h||h.clearSelection()},t.prototype.selectAll=function(){var h;null===(h=this._selectionService)||void 0===h||h.selectAll()},t.prototype.selectLines=function(h,u){var d;null===(d=this._selectionService)||void 0===d||d.selectLines(h,u)},t.prototype._keyDown=function(h){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(h))return!1;if(!this._compositionHelper.keydown(h))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var u=V.evaluateKeyboardEvent(h,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(h),3===u.type||2===u.type){var d=this.rows-1;return this.scrollLines(2===u.type?-d:d),this.cancel(h,!0)}return 1===u.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,h)||(u.cancel&&this.cancel(h,!0),!u.key||(u.key!==E.C0.ETX&&u.key!==E.C0.CR||(this.textarea.value=""),this._onKey.fire({key:u.key,domEvent:h}),this.showCursor(),this._coreService.triggerDataEvent(u.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(h,!0)))},t.prototype._isThirdLevelShift=function(h,u){var d=h.isMac&&!this.options.macOptionIsMeta&&u.altKey&&!u.ctrlKey&&!u.metaKey||h.isWindows&&u.altKey&&u.ctrlKey&&!u.metaKey;return"keypress"===u.type?d:d&&(!u.keyCode||u.keyCode>47)},t.prototype._keyUp=function(h){this._customKeyEventHandler&&!1===this._customKeyEventHandler(h)||(16===h.keyCode||17===h.keyCode||18===h.keyCode||this.focus(),this.updateCursorStyle(h))},t.prototype._keyPress=function(h){var u;if(this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(h))return!1;if(this.cancel(h),h.charCode)u=h.charCode;else if(null===h.which||void 0===h.which)u=h.keyCode;else{if(0===h.which||0===h.charCode)return!1;u=h.which}return!(!u||(h.altKey||h.ctrlKey||h.metaKey)&&!this._isThirdLevelShift(this.browser,h)||(u=String.fromCharCode(u),this._onKey.fire({key:u,domEvent:h}),this.showCursor(),this._coreService.triggerDataEvent(u,!0),0))},t.prototype.bell=function(){var h=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){h.element.classList.remove("visual-bell-active")},200))},t.prototype.resize=function(h,u){var d,p;isNaN(h)||isNaN(u)||(h!==this.cols||u!==this.rows?(h<er.MINIMUM_COLS&&(h=er.MINIMUM_COLS),u<er.MINIMUM_ROWS&&(u=er.MINIMUM_ROWS),this.buffers.resize(h,u),this._bufferService.resize(h,u),this.buffers.setupTabStops(this.cols),null===(d=this._charSizeService)||void 0===d||d.measure(),null===(p=this.viewport)||void 0===p||p.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:h,rows:u})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var h=1;h<this.rows;h++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},t.prototype.is=function(h){return 0===(this.options.termName+"").indexOf(h)},t.prototype.handleTitle=function(h){this._onTitleChange.fire(h)},t.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var h,u,d=this._customKeyEventHandler,p=this._userScrolling;this._setup(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset(),null===(h=this._selectionService)||void 0===h||h.reset(),this._customKeyEventHandler=d,this._userScrolling=p,this.refresh(0,this.rows-1),null===(u=this.viewport)||void 0===u||u.syncScrollArea()},t.prototype.cancel=function(h,u){if(this.options.cancelEvents||u)return h.preventDefault(),h.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t.prototype.write=function(h,u){this._writeBuffer.write(h,u)},t.prototype.writeSync=function(h){this._writeBuffer.writeSync(h)},t}(ei.Disposable);u.Terminal=ev},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(4),b=d(1),w=function(){function e(h,u,d,p,v,g){this._textarea=h,this._compositionView=u,this._bufferService=d,this._optionsService=p,this._charSizeService=v,this._coreService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(h){var u=this;this._compositionView.textContent=h.data,this.updateCompositionElements(),setTimeout(function(){u._compositionPosition.end=u._textarea.value.length},0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(h){if(this._isComposing||this._isSendingComposition){if(229===h.keyCode||16===h.keyCode||17===h.keyCode||18===h.keyCode)return!1;this._finalizeComposition(!1)}return 229!==h.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(h){var u=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),h){var d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var h;u._isSendingComposition&&(u._isSendingComposition=!1,h=u._isComposing?u._textarea.value.substring(d.start,d.end):u._textarea.value.substring(d.start),u._coreService.triggerDataEvent(h,!0))},0)}else{this._isSendingComposition=!1;var p=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(p,!0)}},e.prototype._handleAnyTextareaChanges=function(){var h=this,u=this._textarea.value;setTimeout(function(){if(!h._isComposing){var d=h._textarea.value.replace(u,"");d.length>0&&h._coreService.triggerDataEvent(d,!0)}},0)},e.prototype.updateCompositionElements=function(h){var u=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var d=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),p=this._bufferService.buffer.y*d,v=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=v+"px",this._compositionView.style.top=p+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var g=this._compositionView.getBoundingClientRect();this._textarea.style.left=v+"px",this._textarea.style.top=p+"px",this._textarea.style.width=g.width+"px",this._textarea.style.height=g.height+"px",this._textarea.style.lineHeight=g.height+"px"}h||setTimeout(function(){return u.updateCompositionElements(!0)},0)}},e.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},p([v(2,b.IBufferService),v(3,b.IOptionsService),v(4,g.ICharSizeService),v(5,b.ICoreService)],e)}();u.CompositionHelper=w},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),g=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},b=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var w=d(2),E=d(8),x=d(4),L=d(1),k=function(h){function t(u,d,p,v,g,b,w){var x=h.call(this)||this;return x._scrollLines=u,x._viewportElement=d,x._scrollArea=p,x._bufferService=v,x._optionsService=g,x._charSizeService=b,x._renderService=w,x.scrollBarWidth=0,x._currentRowHeight=0,x._lastRecordedBufferLength=0,x._lastRecordedViewportHeight=0,x._lastRecordedBufferHeight=0,x._lastTouchY=0,x._lastScrollTop=0,x._wheelPartialScroll=0,x._refreshAnimationFrame=null,x._ignoreNextScrollEvent=!1,x.scrollBarWidth=x._viewportElement.offsetWidth-x._scrollArea.offsetWidth||15,x.register(E.addDisposableDomListener(x._viewportElement,"scroll",x._onScroll.bind(x))),setTimeout(function(){return x.syncScrollArea()},0),x}return v(t,h),t.prototype.onThemeChange=function(h){this._viewportElement.style.backgroundColor=h.background.css},t.prototype._refresh=function(h){var u=this;if(h)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return u._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(h){if(void 0===h&&(h=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===u&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(h)}else this._refresh(h)},t.prototype._onScroll=function(h){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(u,!0)}}},t.prototype._bubbleScroll=function(h,u){var d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&0!==this._viewportElement.scrollTop||u>0&&d<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)},t.prototype.onWheel=function(h){var u=this._getPixelsScrolled(h);return 0!==u&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(h,u))},t.prototype._getPixelsScrolled=function(h){if(0===h.deltaY)return 0;var u=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u},t.prototype.getLinesScrolled=function(h){if(0===h.deltaY)return 0;var u=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u},t.prototype._applyScrollModifier=function(h,u){var d=this._optionsService.options.fastScrollModifier;return"alt"===d&&u.altKey||"ctrl"===d&&u.ctrlKey||"shift"===d&&u.shiftKey?h*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:h*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(h){this._lastTouchY=h.touches[0].pageY},t.prototype.onTouchMove=function(h){var u=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,0!==u&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(h,u))},g([b(3,L.IBufferService),b(4,L.IOptionsService),b(5,x.ICharSizeService),b(6,x.IRenderService)],t)}(w.Disposable);u.Viewport=k},function(h,u,d){function i(h){return h.replace(/\r?\n/g,"\r")}function n(h,u){return u?"\x1b[200~"+h+"\x1b[201~":h}function o(h,u,d,p){h=n(h=i(h),d),p.triggerDataEvent(h,!0),u.value=""}function s(h,u,d){var p=d.getBoundingClientRect(),v=h.clientX-p.left-10,g=h.clientY-p.top-10;u.style.position="absolute",u.style.width="20px",u.style.height="20px",u.style.left=v+"px",u.style.top=g+"px",u.style.zIndex="1000",u.focus(),setTimeout(function(){u.style.position="",u.style.width="",u.style.height="",u.style.left="",u.style.top="",u.style.zIndex=""},200)}Object.defineProperty(u,"__esModule",{value:!0}),u.prepareTextForTerminal=i,u.bracketTextForPaste=n,u.copyHandler=function(h,u){h.clipboardData&&h.clipboardData.setData("text/plain",u.selectionText),h.preventDefault()},u.handlePasteEvent=function(h,u,d,p){h.stopPropagation(),h.clipboardData&&o(h.clipboardData.getData("text/plain"),u,d,p)},u.paste=o,u.moveTextAreaUnderMouseCursor=s,u.rightClickHandler=function(h,u,d,p,v){s(h,u,d),v&&!p.isClickInSelection(h)&&p.selectWordAtCursor(h),u.value=p.selectionText,u.select()}},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(12),b=d(18),w=d(38),E=d(2),x=d(15),L=d(7),k=d(16),T=d(0),F=d(3),W=d(5),q=d(6),N=d(20),U=d(22),z=d(4),K={"(":0,")":1,"*":2,"+":3,"-":1,".":2};function m(h,u){if(h>24)return u.setWinLines||!1;switch(h){case 1:return!!u.restoreWin;case 2:return!!u.minimizeWin;case 3:return!!u.setWinPosition;case 4:return!!u.setWinSizePixels;case 5:return!!u.raiseWin;case 6:return!!u.lowerWin;case 7:return!!u.refreshWin;case 8:return!!u.setWinSizeChars;case 9:return!!u.maximizeWin;case 10:return!!u.fullscreenWin;case 11:return!!u.getWinState;case 13:return!!u.getWinPosition;case 14:return!!u.getWinSizePixels;case 15:return!!u.getScreenSizePixels;case 16:return!!u.getCellSizePixels;case 18:return!!u.getWinSizeChars;case 19:return!!u.getScreenSizeChars;case 20:return!!u.getIconTitle;case 21:return!!u.getWinTitle;case 22:return!!u.pushTitle;case 23:return!!u.popTitle;case 24:return!!u.setWinLines}return!1}var V=function(){function e(h,u,d,p){this._bufferService=h,this._coreService=u,this._logService=d,this._optionsService=p,this._data=new Uint32Array(0)}return e.prototype.hook=function(h){this._data=new Uint32Array(0)},e.prototype.put=function(h,u,d){this._data=x.concat(this._data,h.subarray(u,d))},e.prototype.unhook=function(h){if(h){var u=L.utf32ToString(this._data);switch(this._data=new Uint32Array(0),u){case'"q':return this._coreService.triggerDataEvent(g.C0.ESC+'P1$r0"q'+g.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(g.C0.ESC+'P1$r61;1"p'+g.C0.ESC+"\\");case"r":var d=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(g.C0.ESC+"P1$r"+d+g.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(g.C0.ESC+"P1$r0m"+g.C0.ESC+"\\");case" q":var p={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return p-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(g.C0.ESC+"P1$r"+p+" q"+g.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",u),this._coreService.triggerDataEvent(g.C0.ESC+"P0$r"+g.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},e}(),G=function(h){function t(u,d,p,v,E,x,F,q,U,z,K){void 0===K&&(K=new w.EscapeSequenceParser);var G=h.call(this)||this;G._terminal=u,G._bufferService=d,G._charsetService=p,G._coreService=v,G._dirtyRowService=E,G._logService=x,G._optionsService=F,G._coreMouseService=q,G._unicodeService=U,G._instantiationService=z,G._parser=K,G._parseBuffer=new Uint32Array(4096),G._stringDecoder=new L.StringToUtf32,G._utf8Decoder=new L.Utf8ToUtf32,G._workCell=new W.CellData,G._windowTitle="",G._iconName="",G._windowTitleStack=[],G._iconNameStack=[],G._curAttrData=k.DEFAULT_ATTR_DATA.clone(),G._eraseAttrDataInternal=k.DEFAULT_ATTR_DATA.clone(),G._onRequestRefreshRows=new T.EventEmitter,G._onRequestReset=new T.EventEmitter,G._onRequestBell=new T.EventEmitter,G._onCursorMove=new T.EventEmitter,G._onLineFeed=new T.EventEmitter,G._onScroll=new T.EventEmitter,G.register(G._parser),G._parser.setCsiHandlerFallback(function(h,u){G._logService.debug("Unknown CSI code: ",{identifier:G._parser.identToString(h),params:u.toArray()})}),G._parser.setEscHandlerFallback(function(h){G._logService.debug("Unknown ESC code: ",{identifier:G._parser.identToString(h)})}),G._parser.setExecuteHandlerFallback(function(h){G._logService.debug("Unknown EXECUTE code: ",{code:h})}),G._parser.setOscHandlerFallback(function(h,u,d){G._logService.debug("Unknown OSC code: ",{identifier:h,action:u,data:d})}),G._parser.setDcsHandlerFallback(function(h,u,d){"HOOK"===u&&(d=d.toArray()),G._logService.debug("Unknown DCS code: ",{identifier:G._parser.identToString(h),action:u,payload:d})}),G._parser.setPrintHandler(function(h,u,d){return G.print(h,u,d)}),G._parser.setCsiHandler({final:"@"},function(h){return G.insertChars(h)}),G._parser.setCsiHandler({intermediates:" ",final:"@"},function(h){return G.scrollLeft(h)}),G._parser.setCsiHandler({final:"A"},function(h){return G.cursorUp(h)}),G._parser.setCsiHandler({intermediates:" ",final:"A"},function(h){return G.scrollRight(h)}),G._parser.setCsiHandler({final:"B"},function(h){return G.cursorDown(h)}),G._parser.setCsiHandler({final:"C"},function(h){return G.cursorForward(h)}),G._parser.setCsiHandler({final:"D"},function(h){return G.cursorBackward(h)}),G._parser.setCsiHandler({final:"E"},function(h){return G.cursorNextLine(h)}),G._parser.setCsiHandler({final:"F"},function(h){return G.cursorPrecedingLine(h)}),G._parser.setCsiHandler({final:"G"},function(h){return G.cursorCharAbsolute(h)}),G._parser.setCsiHandler({final:"H"},function(h){return G.cursorPosition(h)}),G._parser.setCsiHandler({final:"I"},function(h){return G.cursorForwardTab(h)}),G._parser.setCsiHandler({final:"J"},function(h){return G.eraseInDisplay(h)}),G._parser.setCsiHandler({prefix:"?",final:"J"},function(h){return G.eraseInDisplay(h)}),G._parser.setCsiHandler({final:"K"},function(h){return G.eraseInLine(h)}),G._parser.setCsiHandler({prefix:"?",final:"K"},function(h){return G.eraseInLine(h)}),G._parser.setCsiHandler({final:"L"},function(h){return G.insertLines(h)}),G._parser.setCsiHandler({final:"M"},function(h){return G.deleteLines(h)}),G._parser.setCsiHandler({final:"P"},function(h){return G.deleteChars(h)}),G._parser.setCsiHandler({final:"S"},function(h){return G.scrollUp(h)}),G._parser.setCsiHandler({final:"T"},function(h){return G.scrollDown(h)}),G._parser.setCsiHandler({final:"X"},function(h){return G.eraseChars(h)}),G._parser.setCsiHandler({final:"Z"},function(h){return G.cursorBackwardTab(h)}),G._parser.setCsiHandler({final:"`"},function(h){return G.charPosAbsolute(h)}),G._parser.setCsiHandler({final:"a"},function(h){return G.hPositionRelative(h)}),G._parser.setCsiHandler({final:"b"},function(h){return G.repeatPrecedingCharacter(h)}),G._parser.setCsiHandler({final:"c"},function(h){return G.sendDeviceAttributesPrimary(h)}),G._parser.setCsiHandler({prefix:">",final:"c"},function(h){return G.sendDeviceAttributesSecondary(h)}),G._parser.setCsiHandler({final:"d"},function(h){return G.linePosAbsolute(h)}),G._parser.setCsiHandler({final:"e"},function(h){return G.vPositionRelative(h)}),G._parser.setCsiHandler({final:"f"},function(h){return G.hVPosition(h)}),G._parser.setCsiHandler({final:"g"},function(h){return G.tabClear(h)}),G._parser.setCsiHandler({final:"h"},function(h){return G.setMode(h)}),G._parser.setCsiHandler({prefix:"?",final:"h"},function(h){return G.setModePrivate(h)}),G._parser.setCsiHandler({final:"l"},function(h){return G.resetMode(h)}),G._parser.setCsiHandler({prefix:"?",final:"l"},function(h){return G.resetModePrivate(h)}),G._parser.setCsiHandler({final:"m"},function(h){return G.charAttributes(h)}),G._parser.setCsiHandler({final:"n"},function(h){return G.deviceStatus(h)}),G._parser.setCsiHandler({prefix:"?",final:"n"},function(h){return G.deviceStatusPrivate(h)}),G._parser.setCsiHandler({intermediates:"!",final:"p"},function(h){return G.softReset(h)}),G._parser.setCsiHandler({intermediates:" ",final:"q"},function(h){return G.setCursorStyle(h)}),G._parser.setCsiHandler({final:"r"},function(h){return G.setScrollRegion(h)}),G._parser.setCsiHandler({final:"s"},function(h){return G.saveCursor(h)}),G._parser.setCsiHandler({final:"t"},function(h){return G.windowOptions(h)}),G._parser.setCsiHandler({final:"u"},function(h){return G.restoreCursor(h)}),G._parser.setCsiHandler({intermediates:"'",final:"}"},function(h){return G.insertColumns(h)}),G._parser.setCsiHandler({intermediates:"'",final:"~"},function(h){return G.deleteColumns(h)}),G._parser.setExecuteHandler(g.C0.BEL,function(){return G.bell()}),G._parser.setExecuteHandler(g.C0.LF,function(){return G.lineFeed()}),G._parser.setExecuteHandler(g.C0.VT,function(){return G.lineFeed()}),G._parser.setExecuteHandler(g.C0.FF,function(){return G.lineFeed()}),G._parser.setExecuteHandler(g.C0.CR,function(){return G.carriageReturn()}),G._parser.setExecuteHandler(g.C0.BS,function(){return G.backspace()}),G._parser.setExecuteHandler(g.C0.HT,function(){return G.tab()}),G._parser.setExecuteHandler(g.C0.SO,function(){return G.shiftOut()}),G._parser.setExecuteHandler(g.C0.SI,function(){return G.shiftIn()}),G._parser.setExecuteHandler(g.C1.IND,function(){return G.index()}),G._parser.setExecuteHandler(g.C1.NEL,function(){return G.nextLine()}),G._parser.setExecuteHandler(g.C1.HTS,function(){return G.tabSet()}),G._parser.setOscHandler(0,new N.OscHandler(function(h){G.setTitle(h),G.setIconName(h)})),G._parser.setOscHandler(1,new N.OscHandler(function(h){return G.setIconName(h)})),G._parser.setOscHandler(2,new N.OscHandler(function(h){return G.setTitle(h)})),G._parser.setEscHandler({final:"7"},function(){return G.saveCursor()}),G._parser.setEscHandler({final:"8"},function(){return G.restoreCursor()}),G._parser.setEscHandler({final:"D"},function(){return G.index()}),G._parser.setEscHandler({final:"E"},function(){return G.nextLine()}),G._parser.setEscHandler({final:"H"},function(){return G.tabSet()}),G._parser.setEscHandler({final:"M"},function(){return G.reverseIndex()}),G._parser.setEscHandler({final:"="},function(){return G.keypadApplicationMode()}),G._parser.setEscHandler({final:">"},function(){return G.keypadNumericMode()}),G._parser.setEscHandler({final:"c"},function(){return G.fullReset()}),G._parser.setEscHandler({final:"n"},function(){return G.setgLevel(2)}),G._parser.setEscHandler({final:"o"},function(){return G.setgLevel(3)}),G._parser.setEscHandler({final:"|"},function(){return G.setgLevel(3)}),G._parser.setEscHandler({final:"}"},function(){return G.setgLevel(2)}),G._parser.setEscHandler({final:"~"},function(){return G.setgLevel(1)}),G._parser.setEscHandler({intermediates:"%",final:"@"},function(){return G.selectDefaultCharset()}),G._parser.setEscHandler({intermediates:"%",final:"G"},function(){return G.selectDefaultCharset()});var C=function(h){Y._parser.setEscHandler({intermediates:"(",final:h},function(){return G.selectCharset("("+h)}),Y._parser.setEscHandler({intermediates:")",final:h},function(){return G.selectCharset(")"+h)}),Y._parser.setEscHandler({intermediates:"*",final:h},function(){return G.selectCharset("*"+h)}),Y._parser.setEscHandler({intermediates:"+",final:h},function(){return G.selectCharset("+"+h)}),Y._parser.setEscHandler({intermediates:"-",final:h},function(){return G.selectCharset("-"+h)}),Y._parser.setEscHandler({intermediates:".",final:h},function(){return G.selectCharset("."+h)}),Y._parser.setEscHandler({intermediates:"/",final:h},function(){return G.selectCharset("/"+h)})},Y=this;for(var J in b.CHARSETS)C(J);return G._parser.setEscHandler({intermediates:"#",final:"8"},function(){return G.screenAlignmentPattern()}),G._parser.setErrorHandler(function(h){return G._logService.error("Parsing error: ",h),h}),G._parser.setDcsHandler({intermediates:"$",final:"q"},new V(G._bufferService,G._coreService,G._logService,G._optionsService)),G}return v(t,h),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){h.prototype.dispose.call(this)},t.prototype.parse=function(h){var u=this._bufferService.buffer,d=u.x,p=u.y;if(this._logService.debug("parsing data",h),this._parseBuffer.length<h.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(h.length,131072))),this._dirtyRowService.clearRange(),h.length>131072)for(var v=0;v<h.length;v+=131072){var g=v+131072<h.length?v+131072:h.length,b="string"==typeof h?this._stringDecoder.decode(h.substring(v,g),this._parseBuffer):this._utf8Decoder.decode(h.subarray(v,g),this._parseBuffer);this._parser.parse(this._parseBuffer,b)}else b="string"==typeof h?this._stringDecoder.decode(h,this._parseBuffer):this._utf8Decoder.decode(h,this._parseBuffer),this._parser.parse(this._parseBuffer,b);(u=this._bufferService.buffer).x===d&&u.y===p||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(h,u,d){var p,v,g=this._bufferService.buffer,b=this._charsetService.charset,w=this._optionsService.options.screenReaderMode,E=this._bufferService.cols,x=this._coreService.decPrivateModes.wraparound,k=this._terminal.insertMode,T=this._curAttrData,W=g.lines.get(g.y+g.ybase);this._dirtyRowService.markDirty(g.y),g.x&&d-u>0&&2===W.getWidth(g.x-1)&&W.setCellFromCodePoint(g.x-1,0,1,T.fg,T.bg);for(var q=u;q<d;++q){if(p=h[q],v=this._unicodeService.wcwidth(p),p<127&&b){var N=b[String.fromCharCode(p)];N&&(p=N.charCodeAt(0))}if(w&&this._terminal.onA11yCharEmitter.fire(L.stringFromCodePoint(p)),v||!g.x){if(g.x+v-1>=E){if(x)g.x=0,g.y++,g.y===g.scrollBottom+1?(g.y--,this._terminal.scroll(this._eraseAttrData(),!0)):(g.y>=this._bufferService.rows&&(g.y=this._bufferService.rows-1),g.lines.get(g.y).isWrapped=!0),W=g.lines.get(g.y+g.ybase);else if(g.x=E-1,2===v)continue}if(k&&(W.insertCells(g.x,v,g.getNullCell(T),T),2===W.getWidth(E-1)&&W.setCellFromCodePoint(E-1,F.NULL_CELL_CODE,F.NULL_CELL_WIDTH,T.fg,T.bg)),W.setCellFromCodePoint(g.x++,p,v,T.fg,T.bg),v>0)for(;--v;)W.setCellFromCodePoint(g.x++,0,0,T.fg,T.bg)}else W.getWidth(g.x-1)?W.addCodepointToCell(g.x-1,p):W.addCodepointToCell(g.x-2,p)}d-u>0&&(W.loadCell(g.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),g.x<E&&d-u>0&&0===W.getWidth(g.x)&&!W.hasContent(g.x)&&W.setCellFromCodePoint(g.x,0,1,T.fg,T.bg),this._dirtyRowService.markDirty(g.y)},t.prototype.addCsiHandler=function(h,u){var d=this;return"t"!==h.final||h.prefix||h.intermediates?this._parser.addCsiHandler(h,u):this._parser.addCsiHandler(h,function(h){return!m(h.params[0],d._optionsService.options.windowOptions)||u(h)})},t.prototype.addDcsHandler=function(h,u){return this._parser.addDcsHandler(h,new U.DcsHandler(u))},t.prototype.addEscHandler=function(h,u){return this._parser.addEscHandler(h,u)},t.prototype.addOscHandler=function(h,u){return this._parser.addOscHandler(h,new N.OscHandler(u))},t.prototype.bell=function(){this._onRequestBell.fire()},t.prototype.lineFeed=function(){var h=this._bufferService.buffer;this._dirtyRowService.markDirty(h.y),this._optionsService.options.convertEol&&(h.x=0),h.y++,h.y===h.scrollBottom+1?(h.y--,this._terminal.scroll(this._eraseAttrData())):h.y>=this._bufferService.rows&&(h.y=this._bufferService.rows-1),h.x>=this._bufferService.cols&&h.x--,this._dirtyRowService.markDirty(h.y),this._onLineFeed.fire()},t.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},t.prototype.backspace=function(){this._restrictCursor(),this._bufferService.buffer.x>0&&this._bufferService.buffer.x--},t.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var h=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-h)}},t.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},t.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},t.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._setCursor=function(h,u){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=h,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+u):(this._bufferService.buffer.x=h,this._bufferService.buffer.y=u),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._moveCursor=function(h,u){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+h,this._bufferService.buffer.y+u)},t.prototype.cursorUp=function(h){var u=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;u>=0?this._moveCursor(0,-Math.min(u,h.params[0]||1)):this._moveCursor(0,-(h.params[0]||1))},t.prototype.cursorDown=function(h){var u=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;u>=0?this._moveCursor(0,Math.min(u,h.params[0]||1)):this._moveCursor(0,h.params[0]||1)},t.prototype.cursorForward=function(h){this._moveCursor(h.params[0]||1,0)},t.prototype.cursorBackward=function(h){this._moveCursor(-(h.params[0]||1),0)},t.prototype.cursorNextLine=function(h){this.cursorDown(h),this._bufferService.buffer.x=0},t.prototype.cursorPrecedingLine=function(h){this.cursorUp(h),this._bufferService.buffer.x=0},t.prototype.cursorCharAbsolute=function(h){this._setCursor((h.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.cursorPosition=function(h){this._setCursor(h.length>=2?(h.params[1]||1)-1:0,(h.params[0]||1)-1)},t.prototype.charPosAbsolute=function(h){this._setCursor((h.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.hPositionRelative=function(h){this._moveCursor(h.params[0]||1,0)},t.prototype.linePosAbsolute=function(h){this._setCursor(this._bufferService.buffer.x,(h.params[0]||1)-1)},t.prototype.vPositionRelative=function(h){this._moveCursor(0,h.params[0]||1)},t.prototype.hVPosition=function(h){this.cursorPosition(h)},t.prototype.tabClear=function(h){var u=h.params[0];0===u?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===u&&(this._bufferService.buffer.tabs={})},t.prototype.cursorForwardTab=function(h){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var u=h.params[0]||1;u--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},t.prototype.cursorBackwardTab=function(h){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var u=h.params[0]||1,d=this._bufferService.buffer;u--;)d.x=d.prevStop()},t.prototype._eraseInBufferLine=function(h,u,d,p){void 0===p&&(p=!1);var v=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+h);v.replaceCells(u,d,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),p&&(v.isWrapped=!1)},t.prototype._resetBufferLine=function(h){var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+h);u.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),u.isWrapped=!1},t.prototype.eraseInDisplay=function(h){var u;switch(this._restrictCursor(),h.params[0]){case 0:for(u=this._bufferService.buffer.y,this._dirtyRowService.markDirty(u),this._eraseInBufferLine(u++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);u<this._bufferService.rows;u++)this._resetBufferLine(u);this._dirtyRowService.markDirty(u);break;case 1:for(u=this._bufferService.buffer.y,this._dirtyRowService.markDirty(u),this._eraseInBufferLine(u,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(u+1).isWrapped=!1);u--;)this._resetBufferLine(u);this._dirtyRowService.markDirty(0);break;case 2:for(u=this._bufferService.rows,this._dirtyRowService.markDirty(u-1);u--;)this._resetBufferLine(u);this._dirtyRowService.markDirty(0);break;case 3:var d=this._bufferService.buffer.lines.length-this._bufferService.rows;d>0&&(this._bufferService.buffer.lines.trimStart(d),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-d,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-d,0),this._onScroll.fire(0))}},t.prototype.eraseInLine=function(h){switch(this._restrictCursor(),h.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype.insertLines=function(h){this._restrictCursor();var u=h.params[0]||1,d=this._bufferService.buffer;if(!(d.y>d.scrollBottom||d.y<d.scrollTop)){for(var p=d.y+d.ybase,v=this._bufferService.rows-1-d.scrollBottom,g=this._bufferService.rows-1+d.ybase-v+1;u--;)d.lines.splice(g-1,1),d.lines.splice(p,0,d.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(d.y,d.scrollBottom),d.x=0}},t.prototype.deleteLines=function(h){this._restrictCursor();var u=h.params[0]||1,d=this._bufferService.buffer;if(!(d.y>d.scrollBottom||d.y<d.scrollTop)){var p,v=d.y+d.ybase;for(p=this._bufferService.rows-1-d.scrollBottom,p=this._bufferService.rows-1+d.ybase-p;u--;)d.lines.splice(v,1),d.lines.splice(p,0,d.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(d.y,d.scrollBottom),d.x=0}},t.prototype.insertChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);u&&(u.insertCells(this._bufferService.buffer.x,h.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.deleteChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);u&&(u.deleteCells(this._bufferService.buffer.x,h.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.scrollUp=function(h){for(var u=h.params[0]||1,d=this._bufferService.buffer;u--;)d.lines.splice(d.ybase+d.scrollTop,1),d.lines.splice(d.ybase+d.scrollBottom,0,d.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(d.scrollTop,d.scrollBottom)},t.prototype.scrollDown=function(h){for(var u=h.params[0]||1,d=this._bufferService.buffer;u--;)d.lines.splice(d.ybase+d.scrollBottom,1),d.lines.splice(d.ybase+d.scrollTop,0,d.getBlankLine(k.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(d.scrollTop,d.scrollBottom)},t.prototype.scrollLeft=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var d=h.params[0]||1,p=u.scrollTop;p<=u.scrollBottom;++p){var v=u.lines.get(u.ybase+p);v.deleteCells(0,d,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),v.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.scrollRight=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var d=h.params[0]||1,p=u.scrollTop;p<=u.scrollBottom;++p){var v=u.lines.get(u.ybase+p);v.insertCells(0,d,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),v.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.insertColumns=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var d=h.params[0]||1,p=u.scrollTop;p<=u.scrollBottom;++p){var v=this._bufferService.buffer.lines.get(u.ybase+p);v.insertCells(u.x,d,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),v.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.deleteColumns=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var d=h.params[0]||1,p=u.scrollTop;p<=u.scrollBottom;++p){var v=u.lines.get(u.ybase+p);v.deleteCells(u.x,d,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),v.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.eraseChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);u&&(u.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(h.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.repeatPrecedingCharacter=function(h){if(this._parser.precedingCodepoint){for(var u=h.params[0]||1,d=new Uint32Array(u),p=0;p<u;++p)d[p]=this._parser.precedingCodepoint;this.print(d,0,d.length)}},t.prototype.sendDeviceAttributesPrimary=function(h){h.params[0]>0||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c"))},t.prototype.sendDeviceAttributesSecondary=function(h){h.params[0]>0||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(h.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c"))},t.prototype.setMode=function(h){for(var u=0;u<h.length;u++)4===h.params[u]&&(this._terminal.insertMode=!0)},t.prototype.setModePrivate=function(h){for(var u,d,p=0;p<h.length;p++)switch(h.params[p]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,null===(u=this._terminal.viewport)||void 0===u||u.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),null===(d=this._terminal.viewport)||void 0===d||d.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},t.prototype.resetMode=function(h){for(var u=0;u<h.length;u++)4===h.params[u]&&(this._terminal.insertMode=!1)},t.prototype.resetModePrivate=function(h){for(var u,d,p=0;p<h.length;p++)switch(h.params[p]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,null===(u=this._terminal.viewport)||void 0===u||u.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===h.params[p]&&this.restoreCursor(),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),null===(d=this._terminal.viewport)||void 0===d||d.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},t.prototype._extractColor=function(h,u,d){var p=[0,0,-1,0,0,0],v=0,g=0;do{if(p[g+v]=h.params[u+g],h.hasSubParams(u+g)){var b=h.getSubParams(u+g),w=0;do 5===p[1]&&(v=1),p[g+w+1+v]=b[w];while(++w<b.length&&w+g+1+v<p.length);break}if(5===p[1]&&g+v>=2||2===p[1]&&g+v>=5)break;p[1]&&(v=1)}while(++g+u<h.length&&g+v<p.length);for(w=2;w<p.length;++w)-1===p[w]&&(p[w]=0);return 38===p[0]?2===p[1]?(d.fg|=50331648,d.fg&=-16777216,d.fg|=q.AttributeData.fromColorRGB([p[3],p[4],p[5]])):5===p[1]&&(d.fg&=-50331904,d.fg|=33554432|255&p[3]):48===p[0]&&(2===p[1]?(d.bg|=50331648,d.bg&=-16777216,d.bg|=q.AttributeData.fromColorRGB([p[3],p[4],p[5]])):5===p[1]&&(d.bg&=-50331904,d.bg|=33554432|255&p[3])),g},t.prototype.charAttributes=function(h){if(1===h.length&&0===h.params[0])return this._curAttrData.fg=k.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=k.DEFAULT_ATTR_DATA.bg);for(var u,d=h.length,p=this._curAttrData,v=0;v<d;v++)(u=h.params[v])>=30&&u<=37?(p.fg&=-50331904,p.fg|=16777216|u-30):u>=40&&u<=47?(p.bg&=-50331904,p.bg|=16777216|u-40):u>=90&&u<=97?(p.fg&=-50331904,p.fg|=16777224|u-90):u>=100&&u<=107?(p.bg&=-50331904,p.bg|=16777224|u-100):0===u?(p.fg=k.DEFAULT_ATTR_DATA.fg,p.bg=k.DEFAULT_ATTR_DATA.bg):1===u?p.fg|=134217728:3===u?p.bg|=67108864:4===u?p.fg|=268435456:5===u?p.fg|=536870912:7===u?p.fg|=67108864:8===u?p.fg|=1073741824:2===u?p.bg|=134217728:22===u?(p.fg&=-134217729,p.bg&=-134217729):23===u?p.bg&=-67108865:24===u?p.fg&=-268435457:25===u?p.fg&=-536870913:27===u?p.fg&=-67108865:28===u?p.fg&=-1073741825:39===u?(p.fg&=-67108864,p.fg|=16777215&k.DEFAULT_ATTR_DATA.fg):49===u?(p.bg&=-67108864,p.bg|=16777215&k.DEFAULT_ATTR_DATA.bg):38===u||48===u?v+=this._extractColor(h,v,p):100===u?(p.fg&=-67108864,p.fg|=16777215&k.DEFAULT_ATTR_DATA.fg,p.bg&=-67108864,p.bg|=16777215&k.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",u)},t.prototype.deviceStatus=function(h){switch(h.params[0]){case 5:this._coreService.triggerDataEvent(g.C0.ESC+"[0n");break;case 6:var u=this._bufferService.buffer.y+1,d=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(g.C0.ESC+"["+u+";"+d+"R")}},t.prototype.deviceStatusPrivate=function(h){if(6===h.params[0]){var u=this._bufferService.buffer.y+1,d=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(g.C0.ESC+"[?"+u+";"+d+"R")}},t.prototype.softReset=function(h){var u;this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,null===(u=this._terminal.viewport)||void 0===u||u.syncScrollArea(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=k.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},t.prototype.setCursorStyle=function(h){var u=h.params[0]||1;switch(u){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}this._optionsService.options.cursorBlink=u%2==1},t.prototype.setScrollRegion=function(h){var u,d=h.params[0]||1;(h.length<2||(u=h.params[1])>this._bufferService.rows||0===u)&&(u=this._bufferService.rows),u>d&&(this._bufferService.buffer.scrollTop=d-1,this._bufferService.buffer.scrollBottom=u-1,this._setCursor(0,0))},t.prototype.windowOptions=function(h){if(m(h.params[0],this._optionsService.options.windowOptions)){var u=h.length>1?h.params[1]:0,d=this._instantiationService.getService(z.IRenderService);switch(h.params[0]){case 14:if(d&&2!==u){console.log(d.dimensions);var p=d.dimensions.scaledCanvasWidth.toFixed(0),v=d.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(g.C0.ESC+"[4;"+v+";"+p+"t")}break;case 16:d&&(p=d.dimensions.scaledCellWidth.toFixed(0),v=d.dimensions.scaledCellHeight.toFixed(0),this._coreService.triggerDataEvent(g.C0.ESC+"[6;"+v+";"+p+"t"));break;case 18:this._bufferService&&this._coreService.triggerDataEvent(g.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==u&&2!==u||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==u&&1!==u||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==u&&2!==u||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==u&&1!==u||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},t.prototype.saveCursor=function(h){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},t.prototype.restoreCursor=function(h){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},t.prototype.setTitle=function(h){this._windowTitle=h,this._terminal.handleTitle(h)},t.prototype.setIconName=function(h){this._iconName=h},t.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},t.prototype.keypadApplicationMode=function(){var h;this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,null===(h=this._terminal.viewport)||void 0===h||h.syncScrollArea()},t.prototype.keypadNumericMode=function(){var h;this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,null===(h=this._terminal.viewport)||void 0===h||h.syncScrollArea()},t.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET)},t.prototype.selectCharset=function(h){2===h.length?"/"!==h[0]&&this._charsetService.setgCharset(K[h[0]],b.CHARSETS[h[1]]||b.DEFAULT_CHARSET):this.selectDefaultCharset()},t.prototype.index=function(){this._restrictCursor();var h=this._bufferService.buffer;this._bufferService.buffer.y++,h.y===h.scrollBottom+1?(h.y--,this._terminal.scroll(this._eraseAttrData())):h.y>=this._bufferService.rows&&(h.y=this._bufferService.rows-1),this._restrictCursor()},t.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},t.prototype.reverseIndex=function(){this._restrictCursor();var h=this._bufferService.buffer;if(h.y===h.scrollTop){var u=h.scrollBottom-h.scrollTop;h.lines.shiftElements(h.y+h.ybase,u,1),h.lines.set(h.y+h.ybase,h.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(h.scrollTop,h.scrollBottom)}else h.y--,this._restrictCursor()},t.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},t.prototype.reset=function(){this._curAttrData=k.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=k.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(h){this._charsetService.setgLevel(h)},t.prototype.screenAlignmentPattern=function(){var h=new W.CellData;h.content=4194373,h.fg=this._curAttrData.fg,h.bg=this._curAttrData.bg;var u=this._bufferService.buffer;this._setCursor(0,0);for(var d=0;d<this._bufferService.rows;++d){var p=u.y+u.ybase+d;u.lines.get(p).fill(h),u.lines.get(p).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},t}(E.Disposable);u.InputHandler=G},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(2),b=d(15),w=d(19),E=d(20),x=d(22),L=function(){function e(h){this.table=new Uint8Array(h)}return e.prototype.setDefault=function(h,u){b.fill(this.table,h<<4|u)},e.prototype.add=function(h,u,d,p){this.table[u<<8|h]=d<<4|p},e.prototype.addMany=function(h,u,d,p){for(var v=0;v<h.length;v++)this.table[u<<8|h[v]]=d<<4|p},e}();u.TransitionTable=L,u.VT500_TRANSITION_TABLE=function(){var h=new L(4095),u=Array.apply(null,Array(256)).map(function(h,u){return u}),r=function(h,d){return u.slice(h,d)},d=r(32,127),p=r(0,24);p.push(25),p.push.apply(p,r(28,32));var v,g=r(0,14);for(v in h.setDefault(1,0),h.addMany(d,0,2,0),g)h.addMany([24,26,153,154],v,3,0),h.addMany(r(128,144),v,3,0),h.addMany(r(144,152),v,3,0),h.add(156,v,0,0),h.add(27,v,11,1),h.add(157,v,4,8),h.addMany([152,158,159],v,0,7),h.add(155,v,11,3),h.add(144,v,11,9);return h.addMany(p,0,3,0),h.addMany(p,1,3,1),h.add(127,1,0,1),h.addMany(p,8,0,8),h.addMany(p,3,3,3),h.add(127,3,0,3),h.addMany(p,4,3,4),h.add(127,4,0,4),h.addMany(p,6,3,6),h.addMany(p,5,3,5),h.add(127,5,0,5),h.addMany(p,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(d,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(r(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(d,7,0,7),h.addMany(p,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(r(64,127),3,7,0),h.addMany(r(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(r(48,60),4,8,4),h.addMany(r(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(r(32,64),6,0,6),h.add(127,6,0,6),h.addMany(r(64,127),6,0,0),h.addMany(r(32,48),3,9,5),h.addMany(r(32,48),5,9,5),h.addMany(r(48,64),5,0,6),h.addMany(r(64,127),5,7,0),h.addMany(r(32,48),4,9,5),h.addMany(r(32,48),1,9,2),h.addMany(r(32,48),2,9,2),h.addMany(r(48,127),2,10,0),h.addMany(r(48,80),1,10,0),h.addMany(r(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(r(96,127),1,10,0),h.add(80,1,11,9),h.addMany(p,9,0,9),h.add(127,9,0,9),h.addMany(r(28,32),9,0,9),h.addMany(r(32,48),9,9,12),h.addMany(r(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(p,11,0,11),h.addMany(r(32,128),11,0,11),h.addMany(r(28,32),11,0,11),h.addMany(p,10,0,10),h.add(127,10,0,10),h.addMany(r(28,32),10,0,10),h.addMany(r(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(r(32,48),10,9,12),h.addMany(p,12,0,12),h.add(127,12,0,12),h.addMany(r(28,32),12,0,12),h.addMany(r(32,48),12,9,12),h.addMany(r(48,64),12,0,11),h.addMany(r(64,127),12,12,13),h.addMany(r(64,127),10,12,13),h.addMany(r(64,127),9,12,13),h.addMany(p,13,13,13),h.addMany(d,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(160,0,2,0),h.add(160,8,5,8),h.add(160,6,0,6),h.add(160,11,0,11),h.add(160,13,13,13),h}();var k=function(h){function r(d){void 0===d&&(d=u.VT500_TRANSITION_TABLE);var p=h.call(this)||this;return p._transitions=d,p.initialState=0,p.currentState=p.initialState,p._params=new w.Params,p._params.addParam(0),p._collect=0,p.precedingCodepoint=0,p._printHandlerFb=function(h,u,d){},p._executeHandlerFb=function(h){},p._csiHandlerFb=function(h,u){},p._escHandlerFb=function(h){},p._errorHandlerFb=function(h){return h},p._printHandler=p._printHandlerFb,p._executeHandlers=Object.create(null),p._csiHandlers=Object.create(null),p._escHandlers=Object.create(null),p._oscParser=new E.OscParser,p._dcsParser=new x.DcsParser,p._errorHandler=p._errorHandlerFb,p.setEscHandler({final:"\\"},function(){}),p}return v(r,h),r.prototype._identifier=function(h,u){void 0===u&&(u=[64,126]);var d=0;if(h.prefix){if(h.prefix.length>1)throw Error("only one byte as prefix supported");if((d=h.prefix.charCodeAt(0))&&60>d||d>63)throw Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw Error("only two bytes as intermediates are supported");for(var p=0;p<h.intermediates.length;++p){var v=h.intermediates.charCodeAt(p);if(32>v||v>47)throw Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=v}}if(1!==h.final.length)throw Error("final must be a single byte");var g=h.final.charCodeAt(0);if(u[0]>g||g>u[1])throw Error("final must be in range "+u[0]+" .. "+u[1]);return(d<<=8)|g},r.prototype.identToString=function(h){for(var u=[];h;)u.push(String.fromCharCode(255&h)),h>>=8;return u.reverse().join("")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(h){this._printHandler=h},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.addEscHandler=function(h,u){var d=this._identifier(h,[48,126]);void 0===this._escHandlers[d]&&(this._escHandlers[d]=[]);var p=this._escHandlers[d];return p.push(u),{dispose:function(){var h=p.indexOf(u);-1!==h&&p.splice(h,1)}}},r.prototype.setEscHandler=function(h,u){this._escHandlers[this._identifier(h,[48,126])]=[u]},r.prototype.clearEscHandler=function(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]},r.prototype.setEscHandlerFallback=function(h){this._escHandlerFb=h},r.prototype.setExecuteHandler=function(h,u){this._executeHandlers[h.charCodeAt(0)]=u},r.prototype.clearExecuteHandler=function(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(h){this._executeHandlerFb=h},r.prototype.addCsiHandler=function(h,u){var d=this._identifier(h);void 0===this._csiHandlers[d]&&(this._csiHandlers[d]=[]);var p=this._csiHandlers[d];return p.push(u),{dispose:function(){var h=p.indexOf(u);-1!==h&&p.splice(h,1)}}},r.prototype.setCsiHandler=function(h,u){this._csiHandlers[this._identifier(h)]=[u]},r.prototype.clearCsiHandler=function(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]},r.prototype.setCsiHandlerFallback=function(h){this._csiHandlerFb=h},r.prototype.addDcsHandler=function(h,u){return this._dcsParser.addHandler(this._identifier(h),u)},r.prototype.setDcsHandler=function(h,u){this._dcsParser.setHandler(this._identifier(h),u)},r.prototype.clearDcsHandler=function(h){this._dcsParser.clearHandler(this._identifier(h))},r.prototype.setDcsHandlerFallback=function(h){this._dcsParser.setHandlerFallback(h)},r.prototype.addOscHandler=function(h,u){return this._oscParser.addHandler(h,u)},r.prototype.setOscHandler=function(h,u){this._oscParser.setHandler(h,u)},r.prototype.clearOscHandler=function(h){this._oscParser.clearHandler(h)},r.prototype.setOscHandlerFallback=function(h){this._oscParser.setHandlerFallback(h)},r.prototype.setErrorHandler=function(h){this._errorHandler=h},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},r.prototype.parse=function(h,u){for(var d=0,p=0,v=this.currentState,g=this._oscParser,b=this._dcsParser,w=this._collect,E=this._params,x=this._transitions.table,L=0;L<u;++L){switch((p=x[v<<8|((d=h[L])<160?d:160)])>>4){case 2:for(var k=L+1;;++k)if(k>=u||(d=h[k])<32||d>126&&d<160||++k>=u||(d=h[k])<32||d>126&&d<160||++k>=u||(d=h[k])<32||d>126&&d<160||++k>=u||(d=h[k])<32||d>126&&d<160){this._printHandler(h,L,k),L=k-1;break}break;case 3:this._executeHandlers[d]?this._executeHandlers[d]():this._executeHandlerFb(d),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:L,code:d,currentState:v,collect:w,params:E,abort:!1}).abort)return;break;case 7:for(var T=this._csiHandlers[w<<8|d],F=T?T.length-1:-1;F>=0&&!1===T[F](E);F--);F<0&&this._csiHandlerFb(w<<8|d,E),this.precedingCodepoint=0;break;case 8:do switch(d){case 59:E.addParam(0);break;case 58:E.addSubParam(-1);break;default:E.addDigit(d-48)}while(++L<u&&(d=h[L])>47&&d<60);L--;break;case 9:w<<=8,w|=d;break;case 10:for(var W=this._escHandlers[w<<8|d],q=W?W.length-1:-1;q>=0&&!1===W[q]();q--);q<0&&this._escHandlerFb(w<<8|d),this.precedingCodepoint=0;break;case 11:E.reset(),E.addParam(0),w=0;break;case 12:b.hook(w<<8|d,E);break;case 13:for(var N=L+1;;++N)if(N>=u||24===(d=h[N])||26===d||27===d||d>127&&d<160){b.put(h,L,N),L=N-1;break}break;case 14:b.unhook(24!==d&&26!==d),27===d&&(p|=1),E.reset(),E.addParam(0),w=0,this.precedingCodepoint=0;break;case 4:g.start();break;case 5:for(var U=L+1;;U++)if(U>=u||(d=h[U])<32||d>127&&d<=159){g.put(h,L,U),L=U-1;break}break;case 6:g.end(24!==d&&26!==d),27===d&&(p|=1),E.reset(),E.addParam(0),w=0,this.precedingCodepoint=0}v=15&p}this._collect=w,this.currentState=v},r}(g.Disposable);u.EscapeSequenceParser=k},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),g=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},b=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var w=d(40),E=d(46),x=d(47),L=d(48),k=d(27),T=d(2),F=d(4),W=d(1),q=d(23),N=d(0),U=1,z=function(h){function t(u,d,p,v,g,b,T,F,W){var q=h.call(this)||this;q._colors=u,q._screenElement=d,q.linkifier=p,q.linkifier2=v,q._bufferService=g,q._charSizeService=b,q._optionsService=T,q.coreService=F,q.coreBrowserService=W,q._id=U++,q._onRequestRefreshRows=new N.EventEmitter;var z=q._optionsService.options.allowTransparency;return q._characterJoinerRegistry=new k.CharacterJoinerRegistry(q._bufferService),q._renderLayers=[new w.TextRenderLayer(q._screenElement,0,q._colors,q._characterJoinerRegistry,z,q._id,q._bufferService,T),new E.SelectionRenderLayer(q._screenElement,1,q._colors,q._id,q._bufferService,T),new L.LinkRenderLayer(q._screenElement,2,q._colors,q._id,p,v,q._bufferService,T),new x.CursorRenderLayer(q._screenElement,3,q._colors,q._id,q._onRequestRefreshRows,q._bufferService,T,F,W)],q.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},q._devicePixelRatio=window.devicePixelRatio,q._updateDimensions(),q.onOptionsChanged(),q}return v(t,h),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){h.prototype.dispose.call(this),this._renderLayers.forEach(function(h){return h.dispose()}),q.removeTerminalFromCache(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(h){var u=this;this._colors=h,this._renderLayers.forEach(function(h){h.setColors(u._colors),h.reset()})},t.prototype.onResize=function(h,u){var d=this;this._updateDimensions(),this._renderLayers.forEach(function(h){return h.resize(d.dimensions)}),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation(function(h){return h.onBlur()})},t.prototype.onFocus=function(){this._runOperation(function(h){return h.onFocus()})},t.prototype.onSelectionChanged=function(h,u,d){void 0===d&&(d=!1),this._runOperation(function(p){return p.onSelectionChanged(h,u,d)})},t.prototype.onCursorMove=function(){this._runOperation(function(h){return h.onCursorMove()})},t.prototype.onOptionsChanged=function(){this._runOperation(function(h){return h.onOptionsChanged()})},t.prototype.clear=function(){this._runOperation(function(h){return h.reset()})},t.prototype._runOperation=function(h){this._renderLayers.forEach(function(u){return h(u)})},t.prototype.renderRows=function(h,u){this._renderLayers.forEach(function(d){return d.onGridChanged(h,u)})},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},t.prototype.registerCharacterJoiner=function(h){return this._characterJoinerRegistry.registerCharacterJoiner(h)},t.prototype.deregisterCharacterJoiner=function(h){return this._characterJoinerRegistry.deregisterCharacterJoiner(h)},g([b(4,W.IBufferService),b(5,F.ICharSizeService),b(6,W.IOptionsService),b(7,W.ICoreService),b(8,F.ICoreBrowserService)],t)}(T.Disposable);u.Renderer=z},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(41),b=d(13),w=d(6),E=d(3),x=d(27),L=d(5),k=function(h){function t(u,d,p,v,b,w,E,x){var k=h.call(this,u,"text",d,b,p,w,E,x)||this;return k.bufferService=E,k.optionsService=x,k._characterWidth=0,k._characterFont="",k._characterOverlapCache={},k._workCell=new L.CellData,k._state=new g.GridCache,k._characterJoinerRegistry=v,k}return v(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u);var d=this._getFont(!1,!1);this._characterWidth===u.scaledCharWidth&&this._characterFont===d||(this._characterWidth=u.scaledCharWidth,this._characterFont=d,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(h,u,d,p){for(var v=h;v<=u;v++)for(var g=v+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.lines.get(g),w=d?d.getJoinedCharacters(g):[],L=0;L<this._bufferService.cols;L++){b.loadCell(L,this._workCell);var k=this._workCell,T=!1,F=L;if(0!==k.getWidth()){if(w.length>0&&L===w[0][0]){T=!0;var W=w.shift();k=new x.JoinedCellData(this._workCell,b.translateToString(!0,W[0],W[1]),W[1]-W[0]),F=W[1]-1}!T&&this._isOverlapping(k)&&F<b.length-1&&b.getCodePoint(F+1)===E.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=8388608),p(k,L,v),L=F}}},t.prototype._drawBackground=function(h,u){var d=this,p=this._ctx,v=this._bufferService.cols,g=0,b=0,E=null;p.save(),this._forEachCell(h,u,null,function(h,u,x){var L=null;h.isInverse()?L=h.isFgDefault()?d._colors.foreground.css:h.isFgRGB()?"rgb("+w.AttributeData.toColorRGB(h.getFgColor()).join(",")+")":d._colors.ansi[h.getFgColor()].css:h.isBgRGB()?L="rgb("+w.AttributeData.toColorRGB(h.getBgColor()).join(",")+")":h.isBgPalette()&&(L=d._colors.ansi[h.getBgColor()].css),null===E&&(g=u,b=x),x!==b?(p.fillStyle=E||"",d._fillCells(g,b,v-g,1),g=u,b=x):E!==L&&(p.fillStyle=E||"",d._fillCells(g,b,u-g,1),g=u,b=x),E=L}),null!==E&&(p.fillStyle=E,this._fillCells(g,b,v-g,1)),p.restore()},t.prototype._drawForeground=function(h,u){var d=this;this._forEachCell(h,u,this._characterJoinerRegistry,function(h,u,p){if(!h.isInvisible()&&(d._drawChars(h,u,p),h.isUnderline())){if(d._ctx.save(),h.isInverse()){if(h.isBgDefault())d._ctx.fillStyle=d._colors.background.css;else if(h.isBgRGB())d._ctx.fillStyle="rgb("+w.AttributeData.toColorRGB(h.getBgColor()).join(",")+")";else{var v=h.getBgColor();d._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&v<8&&(v+=8),d._ctx.fillStyle=d._colors.ansi[v].css}}else if(h.isFgDefault())d._ctx.fillStyle=d._colors.foreground.css;else if(h.isFgRGB())d._ctx.fillStyle="rgb("+w.AttributeData.toColorRGB(h.getFgColor()).join(",")+")";else{var g=h.getFgColor();d._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&g<8&&(g+=8),d._ctx.fillStyle=d._colors.ansi[g].css}d._fillBottomLineAtCells(u,p,h.getWidth()),d._ctx.restore()}})},t.prototype.onGridChanged=function(h,u){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,h,this._bufferService.cols,u-h+1),this._drawBackground(h,u),this._drawForeground(h,u))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},t.prototype._isOverlapping=function(h){if(1!==h.getWidth()||256>h.getCode())return!1;var u=h.getChars();if(this._characterOverlapCache.hasOwnProperty(u))return this._characterOverlapCache[u];this._ctx.save(),this._ctx.font=this._characterFont;var d=Math.floor(this._ctx.measureText(u).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[u]=d,d},t}(b.BaseRenderLayer);u.TextRenderLayer=k},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this.cache=[]}return e.prototype.resize=function(h,u){for(var d=0;d<h;d++){this.cache.length<=d&&this.cache.push([]);for(var p=this.cache[d].length;p<u;p++)this.cache[d].push(void 0);this.cache[d].length=u}this.cache.length=h},e.prototype.clear=function(){for(var h=0;h<this.cache.length;h++)for(var u=0;u<this.cache[h].length;u++)this.cache[h][u]=void 0},e}();u.GridCache=p},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(9),b=d(43),w=d(25),E=d(45),x=d(11),L=d(26),k=d(10),T={css:"rgba(0, 0, 0, 0)",rgba:0};function _(h){return h.code<<21|h.bg<<12|h.fg<<3|(h.bold?0:4)+(h.dim?0:2)+(h.italic?0:1)}u.getGlyphCacheKey=_;var F=function(h){function t(u,d){var p=h.call(this)||this;p._config=d,p._drawToCacheCount=0,p._glyphsWaitingOnBitmap=[],p._bitmapCommitTimeout=null,p._bitmap=null,p._cacheCanvas=u.createElement("canvas"),p._cacheCanvas.width=1024,p._cacheCanvas.height=1024,p._cacheCtx=L.throwIfFalsy(p._cacheCanvas.getContext("2d",{alpha:!0}));var v=u.createElement("canvas");v.width=p._config.scaledCharWidth,v.height=p._config.scaledCharHeight,p._tmpCtx=L.throwIfFalsy(v.getContext("2d",{alpha:p._config.allowTransparency})),p._width=Math.floor(1024/p._config.scaledCharWidth),p._height=Math.floor(1024/p._config.scaledCharHeight);var g=p._width*p._height;return p._cacheMap=new E.LRUMap(g),p._cacheMap.prealloc(g),p}return v(t,h),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.draw=function(h,u,d,p){if(32===u.code)return!0;if(!this._canCache(u))return!1;var v=_(u),g=this._cacheMap.get(v);if(null!=g)return this._drawFromCache(h,g,d,p),!0;if(this._drawToCacheCount<100){b=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var b,w=this._drawToCache(u,b);return this._cacheMap.set(v,w),this._drawFromCache(h,w,d,p),!0}return!1},t.prototype._canCache=function(h){return h.code<256},t.prototype._toCoordinateX=function(h){return h%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(h){return Math.floor(h/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(h,u,d,p){if(!u.isEmpty){var v=this._toCoordinateX(u.index),g=this._toCoordinateY(u.index);h.drawImage(u.inBitmap?this._bitmap:this._cacheCanvas,v,g,this._config.scaledCharWidth,this._config.scaledCharHeight,d,p,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(h){return h<this._config.colors.ansi.length?this._config.colors.ansi[h]:w.DEFAULT_ANSI_COLORS[h]},t.prototype._getBackgroundColor=function(h){return this._config.allowTransparency?T:h.bg===g.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:h.bg<256?this._getColorFromAnsiIndex(h.bg):this._config.colors.background},t.prototype._getForegroundColor=function(h){return h.fg===g.INVERTED_DEFAULT_COLOR?k.color.opaque(this._config.colors.background):h.fg<256?this._getColorFromAnsiIndex(h.fg):this._config.colors.foreground},t.prototype._drawToCache=function(h,u){this._drawToCacheCount++,this._tmpCtx.save();var d=this._getBackgroundColor(h);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=d.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var p=h.bold?this._config.fontWeightBold:this._config.fontWeight,v=h.italic?"italic":"";this._tmpCtx.font=v+" "+p+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(h).css,h.dim&&(this._tmpCtx.globalAlpha=g.DIM_OPACITY),this._tmpCtx.fillText(h.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var b=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),w=!1;this._config.allowTransparency||(w=function(h,u){for(var d=!0,p=u.rgba>>>24,v=u.rgba>>>16&255,g=u.rgba>>>8&255,b=0;b<h.data.length;b+=4)h.data[b]===p&&h.data[b+1]===v&&h.data[b+2]===g?h.data[b+3]=0:d=!1;return d}(b,d));var E=this._toCoordinateX(u),x=this._toCoordinateY(u);this._cacheCtx.putImageData(b,E,x);var L={index:u,isEmpty:w,inBitmap:!1};return this._addGlyphToBitmap(L),L},t.prototype._addGlyphToBitmap=function(h){var u=this;"createImageBitmap"in window&&!x.isFirefox&&!x.isSafari&&(this._glyphsWaitingOnBitmap.push(h),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return u._generateBitmap()},100)))},t.prototype._generateBitmap=function(){var h=this,u=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(d){h._bitmap=d;for(var p=0;p<u.length;p++)u[p].inBitmap=!0}),this._bitmapCommitTimeout=null},t}(b.BaseCharAtlas);u.DynamicCharAtlas=F;var W=function(h){function t(u,d){return h.call(this)||this}return v(t,h),t.prototype.draw=function(h,u,d,p){return!1},t}(b.BaseCharAtlas);u.NoneCharAtlas=W},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.beginFrame=function(){},e}();u.BaseCharAtlas=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(h,u,d){this._rgba[h]||(this._rgba[h]={}),this._rgba[h][u]=d},e.prototype.getCss=function(h,u){return this._rgba[h]?this._rgba[h][u]:void 0},e.prototype.setColor=function(h,u,d){this._color[h]||(this._color[h]={}),this._color[h][u]=d},e.prototype.getColor=function(h,u){return this._color[h]?this._color[h][u]:void 0},e}();u.ColorContrastCache=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h){this.capacity=h,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(h){var u=h.prev,d=h.next;h===this._head&&(this._head=d),h===this._tail&&(this._tail=u),null!==u&&(u.next=d),null!==d&&(d.prev=u)},e.prototype._appendNode=function(h){var u=this._tail;null!==u&&(u.next=h),h.prev=u,h.next=null,this._tail=h,null===this._head&&(this._head=h)},e.prototype.prealloc=function(h){for(var u=this._nodePool,d=0;d<h;d++)u.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(h){var u=this._map[h];return void 0!==u?(this._unlinkNode(u),this._appendNode(u),u.value):null},e.prototype.peekValue=function(h){var u=this._map[h];return void 0!==u?u.value:null},e.prototype.peek=function(){var h=this._head;return null===h?null:h.value},e.prototype.set=function(h,u){var d=this._map[h];if(void 0!==d)d=this._map[h],this._unlinkNode(d),d.value=u;else if(this.size>=this.capacity)d=this._head,this._unlinkNode(d),delete this._map[d.key],d.key=h,d.value=u,this._map[h]=d;else{var p=this._nodePool;p.length>0?((d=p.pop()).key=h,d.value=u):d={prev:null,next:null,key:h,value:u},this._map[h]=d,this.size++}this._appendNode(d)},e}();u.LRUMap=p},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=function(h){function t(u,d,p,v,g,b){var w=h.call(this,u,"selection",d,!0,p,v,g,b)||this;return w.bufferService=g,w.optionsService=b,w._clearState(),w}return v(t,h),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(h,u,d){if(this._didStateChange(h,u,d,this._bufferService.buffer.ydisp)){if(this._clearAll(),h&&u){var p=h[1]-this._bufferService.buffer.ydisp,v=u[1]-this._bufferService.buffer.ydisp,g=Math.max(p,0),b=Math.min(v,this._bufferService.rows-1);if(!(g>=this._bufferService.rows||b<0)){if(this._ctx.fillStyle=this._colors.selection.css,d){var w=h[0],E=u[0]-w,x=b-g+1;this._fillCells(w,g,E,x)}else{w=p===g?h[0]:0;var L=g===b?u[0]:this._bufferService.cols;this._fillCells(w,g,L-w,1);var k=Math.max(b-g-1,0);if(this._fillCells(0,g+1,this._bufferService.cols,k),g!==b){var T=v===b?u[0]:this._bufferService.cols;this._fillCells(0,b,T,1)}}this._state.start=[h[0],h[1]],this._state.end=[u[0],u[1]],this._state.columnSelectMode=d,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()}},t.prototype._didStateChange=function(h,u,d,p){return!this._areCoordinatesEqual(h,this._state.start)||!this._areCoordinatesEqual(u,this._state.end)||d!==this._state.columnSelectMode||p!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(h,u){return!(!h||!u)&&h[0]===u[0]&&h[1]===u[1]},t}(d(13).BaseRenderLayer);u.SelectionRenderLayer=g},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(13),b=d(5),w=function(h){function t(u,d,p,v,g,w,E,x,L){var k=h.call(this,u,"cursor",d,!0,p,v,w,E)||this;return k._onRequestRefreshRowsEvent=g,k.bufferService=w,k.optionsService=E,k._coreService=x,k._coreBrowserService=L,k._cell=new b.CellData,k._state={x:0,y:0,isFocused:!1,style:"",width:0},k._cursorRenderers={bar:k._renderBarCursor.bind(k),block:k._renderBlockCursor.bind(k),underline:k._renderUnderlineCursor.bind(k)},k}return v(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var h,u=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new E(this._coreBrowserService.isFocused,function(){u._render(!0)})):(null===(h=this._cursorBlinkStateManager)||void 0===h||h.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(h,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(h){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=u-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(p,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var v=this._optionsService.options.cursorStyle;return v&&"block"!==v?this._cursorRenderers[v](p,d,this._cell):this._renderBlurCursor(p,d,this._cell),this._ctx.restore(),this._state.x=p,this._state.y=d,this._state.isFocused=!1,this._state.style=v,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===p&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](p,d,this._cell),this._ctx.restore(),this._state.x=p,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(h,u,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(h,u,this._optionsService.options.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(h,u,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(h,u,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,h,u),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(h,u,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(h,u),this._ctx.restore()},t.prototype._renderBlurCursor=function(h,u,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(h,u,d.getWidth(),1),this._ctx.restore()},t}(g.BaseRenderLayer);u.CursorRenderLayer=w;var E=function(){function e(h,u){this._renderCallback=u,this.isCursorVisible=!0,h&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var h=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){h._renderCallback(),h._animationFrame=void 0})))},e.prototype._restartInterval=function(h){var u=this;void 0===h&&(h=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(u._animationTimeRestarted){var h=600-(Date.now()-u._animationTimeRestarted);if(u._animationTimeRestarted=void 0,h>0)return void u._restartInterval(h)}u.isCursorVisible=!1,u._animationFrame=window.requestAnimationFrame(function(){u._renderCallback(),u._animationFrame=void 0}),u._blinkInterval=window.setInterval(function(){if(u._animationTimeRestarted){var h=600-(Date.now()-u._animationTimeRestarted);return u._animationTimeRestarted=void 0,void u._restartInterval(h)}u.isCursorVisible=!u.isCursorVisible,u._animationFrame=window.requestAnimationFrame(function(){u._renderCallback(),u._animationFrame=void 0})},600)},h)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(13),b=d(9),w=d(24),E=function(h){function t(u,d,p,v,g,b,w,E){var x=h.call(this,u,"link",d,!0,p,v,w,E)||this;return x.bufferService=w,x.optionsService=E,g.onLinkHover(function(h){return x._onLinkHover(h)}),g.onLinkLeave(function(h){return x._onLinkLeave(h)}),b.onLinkHover(function(h){return x._onLinkHover(h)}),b.onLinkLeave(function(h){return x._onLinkLeave(h)}),x}return v(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var h=this._state.y2-this._state.y1-1;h>0&&this._clearCells(0,this._state.y1+1,this._state.cols,h),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onLinkHover=function(h){if(h.fg===b.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:h.fg&&w.is256Color(h.fg)?this._ctx.fillStyle=this._colors.ansi[h.fg].css:this._ctx.fillStyle=this._colors.foreground.css,h.y1===h.y2)this._fillBottomLineAtCells(h.x1,h.y1,h.x2-h.x1);else{this._fillBottomLineAtCells(h.x1,h.y1,h.cols-h.x1);for(var u=h.y1+1;u<h.y2;u++)this._fillBottomLineAtCells(0,u,h.cols);this._fillBottomLineAtCells(0,h.y2,h.x2)}this._state=h},t.prototype._onLinkLeave=function(h){this._clearCurrentLink()},t}(g.BaseRenderLayer);u.LinkRenderLayer=E},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(0),v=function(){function e(h,u,d,v){this._bufferService=h,this._logService=u,this._optionsService=d,this._unicodeService=v,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new p.EventEmitter,this._onLinkLeave=new p.EventEmitter,this._onLinkTooltip=new p.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),e.prototype.attachToDom=function(h,u){this._element=h,this._mouseZoneManager=u},e.prototype.linkifyRows=function(h,u){var d=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(h,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return d._linkifyRows()},e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var u=h.ydisp+this._rowsToLinkify.start;if(!(u>=h.lines.length)){for(var d=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,p=Math.ceil(2e3/this._bufferService.cols),v=this._bufferService.buffer.iterator(!1,u,d,p,p);v.hasNext();)for(var g=v.next(),b=0;b<this._linkMatchers.length;b++)this._doLinkifyRow(g.range.first,g.content,this._linkMatchers[b]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(h,u,d){if(void 0===d&&(d={}),!u)throw Error("handler must be defined");var p={id:this._nextLinkMatcherId++,regex:h,handler:u,matchIndex:d.matchIndex,validationCallback:d.validationCallback,hoverTooltipCallback:d.tooltipCallback,hoverLeaveCallback:d.leaveCallback,willLinkActivate:d.willLinkActivate,priority:d.priority||0};return this._addLinkMatcherToList(p),p.id},e.prototype._addLinkMatcherToList=function(h){if(0!==this._linkMatchers.length){for(var u=this._linkMatchers.length-1;u>=0;u--)if(h.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},e.prototype.deregisterLinkMatcher=function(h){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===h)return this._linkMatchers.splice(u,1),!0;return!1},e.prototype._doLinkifyRow=function(h,u,d){for(var p,v=this,g=RegExp(d.regex.source,(d.regex.flags||"")+"g"),b=-1,w=this;null!==(p=g.exec(u))&&"break"!==function(){var E=p["number"!=typeof d.matchIndex?0:d.matchIndex];if(!E)return w._logService.debug("match found without corresponding matchIndex",p,d),"break";if(b=u.indexOf(E,b+1),g.lastIndex=b+E.length,b<0)return"break";var x=w._bufferService.buffer.stringIndexToBufferIndex(h,b);if(x[0]<0)return"break";var L=w._bufferService.buffer.lines.get(x[0]);if(!L)return"break";var k=L.getFg(x[1]),T=k?k>>9&511:void 0;d.validationCallback?d.validationCallback(E,function(h){v._rowsTimeoutId||h&&v._addLink(x[1],x[0]-v._bufferService.buffer.ydisp,E,d,T)}):w._addLink(x[1],x[0]-w._bufferService.buffer.ydisp,E,d,T)}(););},e.prototype._addLink=function(h,u,d,p,v){var g=this;if(this._mouseZoneManager&&this._element){var b=this._unicodeService.getStringCellWidth(d),w=h%this._bufferService.cols,E=u+Math.floor(h/this._bufferService.cols),x=(w+b)%this._bufferService.cols,L=E+Math.floor((w+b)/this._bufferService.cols);0===x&&(x=this._bufferService.cols,L--),this._mouseZoneManager.add(new o(w+1,E+1,x+1,L+1,function(h){if(p.handler)return p.handler(h,d);var u=window.open();u?(u.opener=null,u.location.href=d):console.warn("Opening link blocked as opener could not be cleared")},function(){g._onLinkHover.fire(g._createLinkHoverEvent(w,E,x,L,v)),g._element.classList.add("xterm-cursor-pointer")},function(h){g._onLinkTooltip.fire(g._createLinkHoverEvent(w,E,x,L,v)),p.hoverTooltipCallback&&p.hoverTooltipCallback(h,d,{start:{x:w,y:E},end:{x:x,y:L}})},function(){g._onLinkLeave.fire(g._createLinkHoverEvent(w,E,x,L,v)),g._element.classList.remove("xterm-cursor-pointer"),p.hoverLeaveCallback&&p.hoverLeaveCallback()},function(h){return!p.willLinkActivate||p.willLinkActivate(h,d)}))}},e.prototype._createLinkHoverEvent=function(h,u,d,p,v){return{x1:h,y1:u,x2:d,y2:p,cols:this._bufferService.cols,fg:v}},e._timeBeforeLatency=200,e}();u.Linkifier=v;var o=function(h,u,d,p,v,g,b,w,E){this.x1=h,this.y1=u,this.x2=d,this.y2=p,this.clickCallback=v,this.hoverCallback=g,this.tooltipCallback=b,this.leaveCallback=w,this.willLinkActivate=E};u.MouseZone=o},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(11),b=d(51),w=d(5),E=d(0),x=d(4),L=d(1),k=d(28),T=d(52),F=RegExp(String.fromCharCode(160),"g"),W=function(){function e(h,u,d,p,v,g,x,L){var k=this;this._scrollLines=h,this._element=u,this._screenElement=d,this._charSizeService=p,this._bufferService=v,this._coreService=g,this._mouseService=x,this._optionsService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new w.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new E.EventEmitter,this._onRedrawRequest=new E.EventEmitter,this._onSelectionChange=new E.EventEmitter,this._mouseMoveListener=function(h){return k._onMouseMove(h)},this._mouseUpListener=function(h){return k._onMouseUp(h)},this._coreService.onUserInput(function(){k.hasSelection&&k.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(function(h){return k._onTrim(h)}),this._bufferService.buffers.onBufferActivate(function(h){return k._onBufferActivate(h)}),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(e.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._removeMouseDownListeners()},e.prototype.reset=function(){this.clearSelection()},e.prototype.disable=function(){this.clearSelection(),this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},Object.defineProperty(e.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSelection",{get:function(){var h=this._model.finalSelectionStart,u=this._model.finalSelectionEnd;return!(!h||!u||h[0]===u[0]&&h[1]===u[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionText",{get:function(){var h=this._model.finalSelectionStart,u=this._model.finalSelectionEnd;if(!h||!u)return"";var d=this._bufferService.buffer,p=[];if(3===this._activeSelectionMode){if(h[0]===u[0])return"";for(var v=h[1];v<=u[1];v++){var b=d.translateBufferLineToString(v,!0,h[0],u[0]);p.push(b)}}else{var w=h[1]===u[1]?u[0]:void 0;for(p.push(d.translateBufferLineToString(h[1],!0,h[0],w)),v=h[1]+1;v<=u[1]-1;v++){var E=d.lines.get(v);b=d.translateBufferLineToString(v,!0),E&&E.isWrapped?p[p.length-1]+=b:p.push(b)}h[1]!==u[1]&&(E=d.lines.get(u[1]),b=d.translateBufferLineToString(u[1],!0,0,u[0]),E&&E.isWrapped?p[p.length-1]+=b:p.push(b))}return p.map(function(h){return h.replace(F," ")}).join(g.isWindows?"\r\n":"\n")},enumerable:!0,configurable:!0}),e.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},e.prototype.refresh=function(h){var u=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return u._refresh()})),g.isLinux&&h&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},e.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},e.prototype.isClickInSelection=function(h){var u=this._getMouseBufferCoords(h),d=this._model.finalSelectionStart,p=this._model.finalSelectionEnd;return!!(d&&p&&u)&&this._areCoordsInSelection(u,d,p)},e.prototype._areCoordsInSelection=function(h,u,d){return h[1]>u[1]&&h[1]<d[1]||u[1]===d[1]&&h[1]===u[1]&&h[0]>=u[0]&&h[0]<d[0]||u[1]<d[1]&&h[1]===d[1]&&h[0]<d[0]||u[1]<d[1]&&h[1]===u[1]&&h[0]>=u[0]},e.prototype.selectWordAtCursor=function(h){var u=this._getMouseBufferCoords(h);u&&(this._selectWordAt(u,!1),this._model.selectionEnd=void 0,this.refresh(!0))},e.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},e.prototype.selectLines=function(h,u){this._model.clearSelection(),h=Math.max(h,0),u=Math.min(u,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,h],this._model.selectionEnd=[this._bufferService.cols,u],this.refresh(),this._onSelectionChange.fire()},e.prototype._onTrim=function(h){this._model.onTrim(h)&&this.refresh()},e.prototype._getMouseBufferCoords=function(h){var u=this._mouseService.getCoords(h,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(u)return u[0]--,u[1]--,u[1]+=this._bufferService.buffer.ydisp,u},e.prototype._getMouseEventScrollAmount=function(h){var u=k.getCoordsRelativeToElement(h,this._screenElement)[1],d=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return u>=0&&u<=d?0:(u>d&&(u-=d),(u=Math.min(Math.max(u,-50),50)/50)/Math.abs(u)+Math.round(14*u))},e.prototype.shouldForceSelection=function(h){return g.isMac?h.altKey&&this._optionsService.options.macOptionClickForcesSelection:h.shiftKey},e.prototype.onMouseDown=function(h){if(this._mouseDownTimeStamp=h.timeStamp,(2!==h.button||!this.hasSelection)&&0===h.button){if(!this._enabled){if(!this.shouldForceSelection(h))return;h.stopPropagation()}h.preventDefault(),this._dragScrollAmount=0,this._enabled&&h.shiftKey?this._onIncrementalClick(h):1===h.detail?this._onSingleClick(h):2===h.detail?this._onDoubleClick(h):3===h.detail&&this._onTripleClick(h),this._addMouseDownListeners(),this.refresh(!0)}},e.prototype._addMouseDownListeners=function(){var h=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return h._dragScroll()},50)},e.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},e.prototype._onIncrementalClick=function(h){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(h))},e.prototype._onSingleClick=function(h){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(h)?3:0,this._model.selectionStart=this._getMouseBufferCoords(h),this._model.selectionStart){this._model.selectionEnd=void 0;var u=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);u&&u.length!==this._model.selectionStart[0]&&0===u.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},e.prototype._onDoubleClick=function(h){var u=this._getMouseBufferCoords(h);u&&(this._activeSelectionMode=1,this._selectWordAt(u,!0))},e.prototype._onTripleClick=function(h){var u=this._getMouseBufferCoords(h);u&&(this._activeSelectionMode=2,this._selectLineAt(u[1]))},e.prototype.shouldColumnSelect=function(h){return h.altKey&&!(g.isMac&&this._optionsService.options.macOptionClickForcesSelection)},e.prototype._onMouseMove=function(h){if(h.stopImmediatePropagation(),this._model.selectionStart){var u=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(h),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(h),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var d=this._bufferService.buffer;if(this._model.selectionEnd[1]<d.lines.length){var p=d.lines.get(this._model.selectionEnd[1]);p&&0===p.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}u&&u[0]===this._model.selectionEnd[0]&&u[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},e.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var h=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(h.ydisp+this._bufferService.rows,h.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=h.ydisp),this.refresh()}},e.prototype._onMouseUp=function(h){var u=h.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&u<500){if(h.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var d=this._mouseService.getCoords(h,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(d&&void 0!==d[0]&&void 0!==d[1]){var p=T.moveToCellSequence(d[0]-1,d[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(p,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},e.prototype._onBufferActivate=function(h){var u=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=h.activeBuffer.lines.onTrim(function(h){return u._onTrim(h)})},e.prototype._convertViewportColToCharacterIndex=function(h,u){for(var d=u[0],p=0;u[0]>=p;p++){var v=h.loadCell(p,this._workCell).getChars().length;0===this._workCell.getWidth()?d--:v>1&&u[0]!==p&&(d+=v-1)}return d},e.prototype.setSelection=function(h,u,d){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[h,u],this._model.selectionStartLength=d,this.refresh()},e.prototype._getWordAt=function(h,u,d,p){if(void 0===d&&(d=!0),void 0===p&&(p=!0),!(h[0]>=this._bufferService.cols)){var v=this._bufferService.buffer,g=v.lines.get(h[1]);if(g){var b=v.translateBufferLineToString(h[1],!1),w=this._convertViewportColToCharacterIndex(g,h),E=w,x=h[0]-w,L=0,k=0,T=0,F=0;if(" "===b.charAt(w)){for(;w>0&&" "===b.charAt(w-1);)w--;for(;E<b.length&&" "===b.charAt(E+1);)E++}else{var W=h[0],q=h[0];0===g.getWidth(W)&&(L++,W--),2===g.getWidth(q)&&(k++,q++);var N=g.getString(q).length;for(N>1&&(F+=N-1,E+=N-1);W>0&&w>0&&!this._isCharWordSeparator(g.loadCell(W-1,this._workCell));){g.loadCell(W-1,this._workCell);var U=this._workCell.getChars().length;0===this._workCell.getWidth()?(L++,W--):U>1&&(T+=U-1,w-=U-1),w--,W--}for(;q<g.length&&E+1<b.length&&!this._isCharWordSeparator(g.loadCell(q+1,this._workCell));){g.loadCell(q+1,this._workCell);var z=this._workCell.getChars().length;2===this._workCell.getWidth()?(k++,q++):z>1&&(F+=z-1,E+=z-1),E++,q++}}E++;var K=w+x-L+T,V=Math.min(this._bufferService.cols,E-w+L+k-T-F);if(u||""!==b.slice(w,E).trim()){if(d&&0===K&&32!==g.getCodePoint(0)){var G=v.lines.get(h[1]-1);if(G&&g.isWrapped&&32!==G.getCodePoint(this._bufferService.cols-1)){var Y=this._getWordAt([this._bufferService.cols-1,h[1]-1],!1,!0,!1);if(Y){var J=this._bufferService.cols-Y.start;K-=J,V+=J}}}if(p&&K+V===this._bufferService.cols&&32!==g.getCodePoint(this._bufferService.cols-1)){var X=v.lines.get(h[1]+1);if(X&&X.isWrapped&&32!==X.getCodePoint(0)){var Z=this._getWordAt([0,h[1]+1],!1,!1,!0);Z&&(V+=Z.length)}}return{start:K,length:V}}}}},e.prototype._selectWordAt=function(h,u){var d=this._getWordAt(h,u);if(d){for(;d.start<0;)d.start+=this._bufferService.cols,h[1]--;this._model.selectionStart=[d.start,h[1]],this._model.selectionStartLength=d.length}},e.prototype._selectToWordAt=function(h){var u=this._getWordAt(h,!0);if(u){for(var d=h[1];u.start<0;)u.start+=this._bufferService.cols,d--;if(!this._model.areSelectionValuesReversed())for(;u.start+u.length>this._bufferService.cols;)u.length-=this._bufferService.cols,d++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?u.start:u.start+u.length,d]}},e.prototype._isCharWordSeparator=function(h){return 0!==h.getWidth()&&this._optionsService.options.wordSeparator.indexOf(h.getChars())>=0},e.prototype._selectLineAt=function(h){var u=this._bufferService.buffer.getWrappedRangeForLine(h);this._model.selectionStart=[0,u.first],this._model.selectionEnd=[this._bufferService.cols,u.last],this._model.selectionStartLength=0},p([v(3,x.ICharSizeService),v(4,L.IBufferService),v(5,L.ICoreService),v(6,x.IMouseService),v(7,L.IOptionsService)],e)}();u.SelectionService=W},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var h=this.selectionStart,u=this.selectionEnd;return!(!h||!u)&&(h[1]>u[1]||h[1]===u[1]&&h[0]>u[0])},e.prototype.onTrim=function(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();u.SelectionModel=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(12);function n(h,u,d,p){return l(Math.abs(h-o(d,h)-(u-o(d,u)))-function(h,u,d){for(var p=0,v=h-o(d,h),g=u-o(d,u),b=0;b<Math.abs(v-g);b++){var w="A"==(h>u?"A":"B")?-1:1,E=d.buffer.lines.get(v+w*b);E&&E.isWrapped&&p++}return p}(h,u,d),c(h>u?"A":"B",p))}function o(h,u){for(var d=0,p=h.buffer.lines.get(u),v=p&&p.isWrapped;v&&u>=0&&u<h.rows;)d++,v=(p=h.buffer.lines.get(--u))&&p.isWrapped;return d}function a(h,u,d,p,v,g){for(var b=h,w=u,E="";b!==d||w!==p;)b+=v?1:-1,v&&b>g.cols-1?(E+=g.buffer.translateBufferLineToString(w,!1,h,b),b=0,h=0,w++):!v&&b<0&&(E+=g.buffer.translateBufferLineToString(w,!1,0,h+1),h=b=g.cols-1,w--);return E+g.buffer.translateBufferLineToString(w,!1,h,b)}function c(h,u){return p.C0.ESC+(u?"O":"[")+h}function l(h,u){h=Math.floor(h);for(var d="",p=0;p<h;p++)d+=u;return d}u.moveToCellSequence=function(h,u,d,p){var v,g,b,w,E,x=d.buffer.x,L=d.buffer.y;if(!d.buffer.hasScrollback)return(0===n(L,u,d,p).length?"":l(a(x,L,x,L-o(d,L),!1,d).length,c("D",p)))+n(L,u,d,p)+(g=n(L,u,d,p).length>0?u-o(d,u):L,v=n(h,u,d,p).length>0?u-o(d,u):L,b=x<h&&v<=u||x>=h&&v<u?"C":"D",l(a(x,g,h,u,"C"===b,d).length,c(b,p)));if(L===u)return E=x>h?"D":"C",l(Math.abs(x-h),c(E,p));E=L>u?"D":"C";var k=Math.abs(L-u);return l((w=L>u?h:x,d.cols-w+(k-1)*d.cols+1+((L>u?x:h)-1)),c(E,p))}},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=function(){function e(h){this._optionsService=h}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var h=window.AudioContext||window.webkitAudioContext;if(!h)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new h}return e._audioContext},enumerable:!0,configurable:!0}),e.prototype.playBellSound=function(){var h=e.audioContext;if(h){var u=h.createBufferSource();h.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(d){u.buffer=d,u.connect(h.destination),u.start(0)})}},e.prototype._base64ToArrayBuffer=function(h){for(var u=window.atob(h),d=u.length,p=new Uint8Array(d),v=0;v<d;v++)p[v]=u.charCodeAt(v);return p.buffer},e.prototype._removeMimeType=function(h){return h.split(",")[1]},e=p([v(0,g.IOptionsService)],e)}();u.SoundService=b},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),g=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},b=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var w=d(2),E=d(8),x=d(4),L=d(1),k=function(h){function t(u,d,p,v,g){var b=h.call(this)||this;return b._element=u,b._screenElement=d,b._bufferService=p,b._mouseService=v,b._selectionService=g,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register(E.addDisposableDomListener(b._element,"mousedown",function(h){return b._onMouseDown(h)})),b._mouseMoveListener=function(h){return b._onMouseMove(h)},b._mouseLeaveListener=function(h){return b._onMouseLeave(h)},b._clickListener=function(h){return b._onClick(h)},b}return v(t,h),t.prototype.dispose=function(){h.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(h){this._zones.push(h),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(h,u){if(0!==this._zones.length){h&&u||(h=0,u=this._bufferService.rows-1);for(var d=0;d<this._zones.length;d++){var p=this._zones[d];(p.y1>h&&p.y1<=u+1||p.y2>h&&p.y2<=u+1||p.y1<h&&p.y2>u+1)&&(this._currentZone&&this._currentZone===p&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(d--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(h){this._lastHoverCoords[0]===h.pageX&&this._lastHoverCoords[1]===h.pageY||(this._onHover(h),this._lastHoverCoords=[h.pageX,h.pageY])},t.prototype._onHover=function(h){var u=this,d=this._findZoneEventAt(h);d!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),d&&(this._currentZone=d,d.hoverCallback&&d.hoverCallback(h),this._tooltipTimeout=setTimeout(function(){return u._onTooltip(h)},500)))},t.prototype._onTooltip=function(h){this._tooltipTimeout=void 0;var u=this._findZoneEventAt(h);u&&u.tooltipCallback&&u.tooltipCallback(h)},t.prototype._onMouseDown=function(h){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var u=this._findZoneEventAt(h);(null==u?void 0:u.willLinkActivate(h))&&(h.preventDefault(),h.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(h){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(h){var u=this._findZoneEventAt(h),d=this._getSelectionLength();u&&d===this._initialSelectionLength&&(u.clickCallback(h),h.preventDefault(),h.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var h=this._selectionService.selectionText;return h?h.length:0},t.prototype._findZoneEventAt=function(h){var u=this._mouseService.getCoords(h,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(u)for(var d=u[0],p=u[1],v=0;v<this._zones.length;v++){var g=this._zones[v];if(g.y1===g.y2){if(p===g.y1&&d>=g.x1&&d<g.x2)return g}else if(p===g.y1&&d>=g.x1||p===g.y2&&d<g.x2||p>g.y1&&p<g.y2)return g}},g([b(2,L.IBufferService),b(3,x.IMouseService),b(4,x.ISelectionService)],t)}(w.Disposable);u.MouseZoneManager=k},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(17),b=d(11),w=d(29),E=d(8),x=d(2),L=d(30),k=function(h){function t(u,d){var p=h.call(this)||this;p._terminal=u,p._renderService=d,p._liveRegionLineCount=0,p._charsToConsume=[],p._charsToAnnounce="",p._accessibilityTreeRoot=document.createElement("div"),p._accessibilityTreeRoot.classList.add("xterm-accessibility"),p._rowContainer=document.createElement("div"),p._rowContainer.classList.add("xterm-accessibility-tree"),p._rowContainer.setAttribute("role","list"),p._rowElements=[];for(var v=0;v<p._terminal.rows;v++)p._rowElements[v]=p._createAccessibilityTreeNode(),p._rowContainer.appendChild(p._rowElements[v]);return p._topBoundaryFocusListener=function(h){return p._onBoundaryFocus(h,0)},p._bottomBoundaryFocusListener=function(h){return p._onBoundaryFocus(h,1)},p._rowElements[0].addEventListener("focus",p._topBoundaryFocusListener),p._rowElements[p._rowElements.length-1].addEventListener("focus",p._bottomBoundaryFocusListener),p._refreshRowsDimensions(),p._accessibilityTreeRoot.appendChild(p._rowContainer),p._renderRowsDebouncer=new w.RenderDebouncer(p._renderRows.bind(p)),p._refreshRows(),p._liveRegion=document.createElement("div"),p._liveRegion.classList.add("live-region"),p._liveRegion.setAttribute("aria-live","assertive"),p._accessibilityTreeRoot.appendChild(p._liveRegion),p._terminal.element.insertAdjacentElement("afterbegin",p._accessibilityTreeRoot),p.register(p._renderRowsDebouncer),p.register(p._terminal.onResize(function(h){return p._onResize(h.rows)})),p.register(p._terminal.onRender(function(h){return p._refreshRows(h.start,h.end)})),p.register(p._terminal.onScroll(function(){return p._refreshRows()})),p.register(p._terminal.onA11yChar(function(h){return p._onChar(h)})),p.register(p._terminal.onLineFeed(function(){return p._onChar("\n")})),p.register(p._terminal.onA11yTab(function(h){return p._onTab(h)})),p.register(p._terminal.onKey(function(h){return p._onKey(h.key)})),p.register(p._terminal.onBlur(function(){return p._clearLiveRegion()})),p.register(p._renderService.onDimensionsChange(function(){return p._refreshRowsDimensions()})),p._screenDprMonitor=new L.ScreenDprMonitor,p.register(p._screenDprMonitor),p._screenDprMonitor.setListener(function(){return p._refreshRowsDimensions()}),p.register(E.addDisposableDomListener(window,"resize",function(){return p._refreshRowsDimensions()})),p}return v(t,h),t.prototype.dispose=function(){h.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(h,u){var d,p,v=h.target,g=this._rowElements[0===u?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")!==(0===u?"1":""+this._terminal.buffer.lines.length)&&h.relatedTarget===g){if(0===u?(d=v,p=this._rowElements.pop(),this._rowContainer.removeChild(p)):(d=this._rowElements.shift(),p=v,this._rowContainer.removeChild(d)),d.removeEventListener("focus",this._topBoundaryFocusListener),p.removeEventListener("focus",this._bottomBoundaryFocusListener),0===u){var b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else b=this._createAccessibilityTreeNode(),this._rowElements.push(b),this._rowContainer.appendChild(b);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===u?-1:1),this._rowElements[0===u?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}},t.prototype._onResize=function(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h},t.prototype._onTab=function(h){for(var u=0;u<h;u++)this._onChar(" ")},t.prototype._onChar=function(h){var u=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,"\n"===h&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=g.tooMuchOutput)),b.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){u._accessibilityTreeRoot.appendChild(u._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,b.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},t.prototype._onKey=function(h){this._clearLiveRegion(),this._charsToConsume.push(h)},t.prototype._refreshRows=function(h,u){this._renderRowsDebouncer.refresh(h,u,this._terminal.rows)},t.prototype._renderRows=function(h,u){for(var d=this._terminal.buffer,p=d.lines.length.toString(),v=h;v<=u;v++){var g=d.translateBufferLineToString(d.ydisp+v,!0),b=(d.ydisp+v+1).toString(),w=this._rowElements[v];w&&(0===g.length?w.innerHTML="&nbsp;":w.textContent=g,w.setAttribute("aria-posinset",b),w.setAttribute("aria-setsize",p))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}},t.prototype._refreshRowDimensions=function(h){h.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(x.Disposable);u.AccessibilityManager=k},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),g=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},b=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var w=d(57),E=d(9),x=d(2),L=d(4),k=d(1),T=d(0),F=d(10),W=1,q=function(h){function t(u,d,p,v,g,b,E,x,L){var k=h.call(this)||this;return k._colors=u,k._element=d,k._screenElement=p,k._viewportElement=v,k._linkifier=g,k._linkifier2=b,k._charSizeService=E,k._optionsService=x,k._bufferService=L,k._terminalClass=W++,k._rowElements=[],k._onRequestRefreshRows=new T.EventEmitter,k._rowContainer=document.createElement("div"),k._rowContainer.classList.add("xterm-rows"),k._rowContainer.style.lineHeight="normal",k._rowContainer.setAttribute("aria-hidden","true"),k._refreshRowElements(k._bufferService.cols,k._bufferService.rows),k._selectionContainer=document.createElement("div"),k._selectionContainer.classList.add("xterm-selection"),k._selectionContainer.setAttribute("aria-hidden","true"),k.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},k._updateDimensions(),k._injectCss(),k._rowFactory=new w.DomRendererRowFactory(document,k._optionsService,k._colors),k._element.classList.add("xterm-dom-renderer-owner-"+k._terminalClass),k._screenElement.appendChild(k._rowContainer),k._screenElement.appendChild(k._selectionContainer),k._linkifier.onLinkHover(function(h){return k._onLinkHover(h)}),k._linkifier.onLinkLeave(function(h){return k._onLinkLeave(h)}),k._linkifier2.onLinkHover(function(h){return k._onLinkHover(h)}),k._linkifier2.onLinkLeave(function(h){return k._onLinkLeave(h)}),k}return v(t,h),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),h.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var h=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach(function(u){u.style.width=h.dimensions.canvasWidth+"px",u.style.height=h.dimensions.actualCellHeight+"px",u.style.lineHeight=h.dimensions.actualCellHeight+"px",u.style.overflow="hidden"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var u=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=u,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(h){this._colors=h,this._injectCss()},t.prototype._injectCss=function(){var h=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var u=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";u+=this._terminalSelector+" span:not(."+w.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+w.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+w.ITALIC_CLASS+" { font-style: italic;}@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}"+("@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: ")+this._colors.cursor.css+"; }}"+(this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+w.CURSOR_CLASS+"."+w.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+w.CURSOR_CLASS+"."+w.CURSOR_BLINK_CLASS+":not(."+w.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+w.CURSOR_CLASS+"."+w.CURSOR_BLINK_CLASS+"."+w.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+w.CURSOR_CLASS+"."+w.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+w.CURSOR_CLASS+"."+w.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+w.CURSOR_CLASS+"."+w.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 ")+this._colors.cursor.css+" inset;}"+(this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: ")+this._colors.selection.css+";}",this._colors.ansi.forEach(function(d,p){u+=h._terminalSelector+" .xterm-fg-"+p+" { color: "+d.css+"; }"+h._terminalSelector+" .xterm-bg-"+p+" { background-color: "+d.css+"; }"}),u+=this._terminalSelector+" .xterm-fg-"+E.INVERTED_DEFAULT_COLOR+" { color: "+F.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+E.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=u},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(h,u){for(var d=this._rowElements.length;d<=u;d++){var p=document.createElement("div");this._rowContainer.appendChild(p),this._rowElements.push(p)}for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(h,u){this._refreshRowElements(h,u),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},t.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},t.prototype.onSelectionChanged=function(h,u,d){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(h&&u){var p=h[1]-this._bufferService.buffer.ydisp,v=u[1]-this._bufferService.buffer.ydisp,g=Math.max(p,0),b=Math.min(v,this._bufferService.rows-1);if(!(g>=this._bufferService.rows||b<0)){var w=document.createDocumentFragment();if(d)w.appendChild(this._createSelectionElement(g,h[0],u[0],b-g+1));else{var E=p===g?h[0]:0,x=g===b?u[0]:this._bufferService.cols;w.appendChild(this._createSelectionElement(g,E,x));var L=b-g-1;if(w.appendChild(this._createSelectionElement(g+1,0,this._bufferService.cols,L)),g!==b){var k=v===b?u[0]:this._bufferService.cols;w.appendChild(this._createSelectionElement(b,0,k))}}this._selectionContainer.appendChild(w)}}},t.prototype._createSelectionElement=function(h,u,d,p){void 0===p&&(p=1);var v=document.createElement("div");return v.style.height=p*this.dimensions.actualCellHeight+"px",v.style.top=h*this.dimensions.actualCellHeight+"px",v.style.left=u*this.dimensions.actualCellWidth+"px",v.style.width=this.dimensions.actualCellWidth*(d-u)+"px",v},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){this._rowElements.forEach(function(h){return h.innerHTML=""})},t.prototype.renderRows=function(h,u){for(var d=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),v=this._optionsService.options.cursorBlink,g=h;g<=u;g++){var b=this._rowElements[g];b.innerHTML="";var w=g+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.lines.get(w),x=this._optionsService.options.cursorStyle;b.appendChild(this._rowFactory.createRow(E,w===d,x,p,v,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0}),t.prototype.registerCharacterJoiner=function(h){return -1},t.prototype.deregisterCharacterJoiner=function(h){return!1},t.prototype._onLinkHover=function(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!0)},t.prototype._onLinkLeave=function(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!1)},t.prototype._setCellUnderline=function(h,u,d,p,v,g){for(;h!==u||d!==p;){var b=this._rowElements[d];if(!b)return;var w=b.children[h];w&&(w.style.textDecoration=g?"underline":"none"),++h>=v&&(h=0,d++)}},g([b(6,L.ICharSizeService),b(7,k.IOptionsService),b(8,k.IBufferService)],t)}(x.Disposable);u.DomRenderer=q},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(9),v=d(3),g=d(5),b=d(10);u.BOLD_CLASS="xterm-bold",u.DIM_CLASS="xterm-dim",u.ITALIC_CLASS="xterm-italic",u.UNDERLINE_CLASS="xterm-underline",u.CURSOR_CLASS="xterm-cursor",u.CURSOR_BLINK_CLASS="xterm-cursor-blink",u.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",u.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",u.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var w=function(){function e(h,u,d){this._document=h,this._optionsService=u,this._colors=d,this._workCell=new g.CellData}return e.prototype.setColors=function(h){this._colors=h},e.prototype.createRow=function(h,d,g,w,E,x,L){for(var k=this._document.createDocumentFragment(),T=0,F=Math.min(h.length,L)-1;F>=0;F--)if(h.loadCell(F,this._workCell).getCode()!==v.NULL_CELL_CODE||d&&F===w){T=F+1;break}for(F=0;F<T;F++){h.loadCell(F,this._workCell);var W=this._workCell.getWidth();if(0!==W){var q=this._document.createElement("span");if(W>1&&(q.style.width=x*W+"px"),d&&F===w)switch(q.classList.add(u.CURSOR_CLASS),E&&q.classList.add(u.CURSOR_BLINK_CLASS),g){case"bar":q.classList.add(u.CURSOR_STYLE_BAR_CLASS);break;case"underline":q.classList.add(u.CURSOR_STYLE_UNDERLINE_CLASS);break;default:q.classList.add(u.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&q.classList.add(u.BOLD_CLASS),this._workCell.isItalic()&&q.classList.add(u.ITALIC_CLASS),this._workCell.isDim()&&q.classList.add(u.DIM_CLASS),this._workCell.isUnderline()&&q.classList.add(u.UNDERLINE_CLASS),this._workCell.isInvisible()?q.textContent=v.WHITESPACE_CELL_CHAR:q.textContent=this._workCell.getChars()||v.WHITESPACE_CELL_CHAR;var N=this._workCell.getFgColor(),U=this._workCell.getFgColorMode(),z=this._workCell.getBgColor(),K=this._workCell.getBgColorMode(),V=!!this._workCell.isInverse();if(V){var G=N;N=z,z=G;var Y=U;U=K,K=Y}switch(U){case 16777216:case 33554432:this._workCell.isBold()&&N<8&&this._optionsService.options.drawBoldTextInBrightColors&&(N+=8),this._applyMinimumContrast(q,this._colors.background,this._colors.ansi[N])||q.classList.add("xterm-fg-"+N);break;case 50331648:var J=b.rgba.toColor(N>>16&255,N>>8&255,255&N);this._applyMinimumContrast(q,this._colors.background,J)||this._addStyle(q,"color:#"+c(N.toString(16),"0",6));break;default:this._applyMinimumContrast(q,this._colors.background,this._colors.foreground)||V&&q.classList.add("xterm-fg-"+p.INVERTED_DEFAULT_COLOR)}switch(K){case 16777216:case 33554432:q.classList.add("xterm-bg-"+z);break;case 50331648:this._addStyle(q,"background-color:#"+c(z.toString(16),"0",6));break;default:V&&q.classList.add("xterm-bg-"+p.INVERTED_DEFAULT_COLOR)}k.appendChild(q)}}return k},e.prototype._applyMinimumContrast=function(h,u,d){if(1===this._optionsService.options.minimumContrastRatio)return!1;var p=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===p&&(p=b.color.ensureContrastRatio(u,d,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=p?p:null)),!!p&&(this._addStyle(h,"color:"+p.css),!0)},e.prototype._addStyle=function(h,u){h.setAttribute("style",""+(h.getAttribute("style")||"")+u+";")},e}();function c(h,u,d){for(;h.length<d;)h=u+h;return h}u.DomRendererRowFactory=w},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(12),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};u.evaluateKeyboardEvent=function(h,u,d,g){var b={type:0,cancel:!1,key:void 0},w=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:"UIKeyInputUpArrow"===h.key?b.key=u?p.C0.ESC+"OA":p.C0.ESC+"[A":"UIKeyInputLeftArrow"===h.key?b.key=u?p.C0.ESC+"OD":p.C0.ESC+"[D":"UIKeyInputRightArrow"===h.key?b.key=u?p.C0.ESC+"OC":p.C0.ESC+"[C":"UIKeyInputDownArrow"===h.key&&(b.key=u?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(h.shiftKey){b.key=p.C0.BS;break}if(h.altKey){b.key=p.C0.ESC+p.C0.DEL;break}b.key=p.C0.DEL;break;case 9:if(h.shiftKey){b.key=p.C0.ESC+"[Z";break}b.key=p.C0.HT,b.cancel=!0;break;case 13:b.key=p.C0.CR,b.cancel=!0;break;case 27:b.key=p.C0.ESC,b.cancel=!0;break;case 37:if(h.metaKey)break;w?(b.key=p.C0.ESC+"[1;"+(w+1)+"D",b.key===p.C0.ESC+"[1;3D"&&(b.key=p.C0.ESC+(d?"b":"[1;5D"))):b.key=u?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(h.metaKey)break;w?(b.key=p.C0.ESC+"[1;"+(w+1)+"C",b.key===p.C0.ESC+"[1;3C"&&(b.key=p.C0.ESC+(d?"f":"[1;5C"))):b.key=u?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(h.metaKey)break;w?(b.key=p.C0.ESC+"[1;"+(w+1)+"A",d||b.key!==p.C0.ESC+"[1;3A"||(b.key=p.C0.ESC+"[1;5A")):b.key=u?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(h.metaKey)break;w?(b.key=p.C0.ESC+"[1;"+(w+1)+"B",d||b.key!==p.C0.ESC+"[1;3B"||(b.key=p.C0.ESC+"[1;5B")):b.key=u?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(b.key=p.C0.ESC+"[2~");break;case 46:b.key=w?p.C0.ESC+"[3;"+(w+1)+"~":p.C0.ESC+"[3~";break;case 36:b.key=w?p.C0.ESC+"[1;"+(w+1)+"H":u?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:b.key=w?p.C0.ESC+"[1;"+(w+1)+"F":u?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:h.shiftKey?b.type=2:b.key=p.C0.ESC+"[5~";break;case 34:h.shiftKey?b.type=3:b.key=p.C0.ESC+"[6~";break;case 112:b.key=w?p.C0.ESC+"[1;"+(w+1)+"P":p.C0.ESC+"OP";break;case 113:b.key=w?p.C0.ESC+"[1;"+(w+1)+"Q":p.C0.ESC+"OQ";break;case 114:b.key=w?p.C0.ESC+"[1;"+(w+1)+"R":p.C0.ESC+"OR";break;case 115:b.key=w?p.C0.ESC+"[1;"+(w+1)+"S":p.C0.ESC+"OS";break;case 116:b.key=w?p.C0.ESC+"[15;"+(w+1)+"~":p.C0.ESC+"[15~";break;case 117:b.key=w?p.C0.ESC+"[17;"+(w+1)+"~":p.C0.ESC+"[17~";break;case 118:b.key=w?p.C0.ESC+"[18;"+(w+1)+"~":p.C0.ESC+"[18~";break;case 119:b.key=w?p.C0.ESC+"[19;"+(w+1)+"~":p.C0.ESC+"[19~";break;case 120:b.key=w?p.C0.ESC+"[20;"+(w+1)+"~":p.C0.ESC+"[20~";break;case 121:b.key=w?p.C0.ESC+"[21;"+(w+1)+"~":p.C0.ESC+"[21~";break;case 122:b.key=w?p.C0.ESC+"[23;"+(w+1)+"~":p.C0.ESC+"[23~";break;case 123:b.key=w?p.C0.ESC+"[24;"+(w+1)+"~":p.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey){if(d&&!g||!h.altKey||h.metaKey)d&&!h.altKey&&!h.ctrlKey&&h.metaKey?65===h.keyCode&&(b.type=1):!h.key||h.ctrlKey||h.altKey||h.metaKey||!(h.keyCode>=48)||1!==h.key.length?h.key&&h.ctrlKey&&"_"===h.key&&(b.key=p.C0.US):b.key=h.key;else{var E=v[h.keyCode],x=E&&E[h.shiftKey?1:0];if(x)b.key=p.C0.ESC+x;else if(h.keyCode>=65&&h.keyCode<=90){var L=h.ctrlKey?h.keyCode-64:h.keyCode+32;b.key=p.C0.ESC+String.fromCharCode(L)}}}else h.keyCode>=65&&h.keyCode<=90?b.key=String.fromCharCode(h.keyCode-64):32===h.keyCode?b.key=p.C0.NUL:h.keyCode>=51&&h.keyCode<=55?b.key=String.fromCharCode(h.keyCode-51+27):56===h.keyCode?b.key=p.C0.DEL:219===h.keyCode?b.key=p.C0.ESC:220===h.keyCode?b.key=p.C0.FS:221===h.keyCode&&(b.key=p.C0.GS)}return b}},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(3);u.updateWindowsModeWrappedState=function(h){var u=h.buffer.lines.get(h.buffer.ybase+h.buffer.y-1),d=null==u?void 0:u.get(h.cols-1),v=h.buffer.lines.get(h.buffer.ybase+h.buffer.y);v&&d&&(v.isWrapped=d[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&d[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),g=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},b=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var w=d(29),E=d(0),x=d(2),L=d(30),k=d(8),T=d(1),F=d(4),W=function(h){function t(u,d,p,v,g){var b=h.call(this)||this;if(b._renderer=u,b._rowCount=d,b.screenElement=p,b.optionsService=v,b.charSizeService=g,b._isPaused=!1,b._needsFullRefresh=!1,b._canvasWidth=0,b._canvasHeight=0,b._onDimensionsChange=new E.EventEmitter,b._onRender=new E.EventEmitter,b._onRefreshRequest=new E.EventEmitter,b._renderDebouncer=new w.RenderDebouncer(function(h,u){return b._renderRows(h,u)}),b.register(b._renderDebouncer),b._screenDprMonitor=new L.ScreenDprMonitor,b._screenDprMonitor.setListener(function(){return b.onDevicePixelRatioChange()}),b.register(b._screenDprMonitor),b.register(v.onOptionChange(function(){return b._renderer.onOptionsChanged()})),b.register(g.onCharSizeChange(function(){return b.onCharSizeChanged()})),b._renderer.onRequestRefreshRows(function(h){return b.refreshRows(h.start,h.end)}),b.register(k.addDisposableDomListener(window,"resize",function(){return b.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var x=new IntersectionObserver(function(h){return b._onIntersectionChange(h[h.length-1])},{threshold:0});x.observe(p),b.register({dispose:function(){return x.disconnect()}})}return b}return v(t,h),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),t.prototype._onIntersectionChange=function(h){this._isPaused=0===h.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(h,u){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(h,u,this._rowCount)},t.prototype._renderRows=function(h,u){this._renderer.renderRows(h,u),this._onRender.fire({start:h,end:u})},t.prototype.resize=function(h,u){this._rowCount=u,this._fireOnCanvasResize()},t.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){this._renderer.dispose(),h.prototype.dispose.call(this)},t.prototype.setRenderer=function(h){var u=this;this._renderer.dispose(),this._renderer=h,this._renderer.onRequestRefreshRows(function(h){return u.refreshRows(h.start,h.end)}),this.refreshRows(0,this._rowCount-1)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.setColors=function(h){this._renderer.setColors(h),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(h,u){this._renderer.onResize(h,u),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(h,u,d){this._renderer.onSelectionChanged(h,u,d)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},t.prototype.registerCharacterJoiner=function(h){return this._renderer.registerCharacterJoiner(h)},t.prototype.deregisterCharacterJoiner=function(h){return this._renderer.deregisterCharacterJoiner(h)},g([b(3,T.IOptionsService),b(4,F.ICharSizeService)],t)}(x.Disposable);u.RenderService=W},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(0),v=d(11),g=d(31);u.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",u.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:u.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:v.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var b=["cols","rows"],w=function(){function e(h){var d=this;this._onOptionChange=new p.EventEmitter,this.options=g.clone(u.DEFAULT_OPTIONS),Object.keys(h).forEach(function(u){if(u in d.options){var p=h[u];d.options[u]=p}})}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),e.prototype.setOption=function(h,d){if(!(h in u.DEFAULT_OPTIONS))throw Error('No option with key "'+h+'"');if(-1!==b.indexOf(h))throw Error('Option "'+h+'" can only be set in the constructor');this.options[h]!==d&&(d=this._sanitizeAndValidateOption(h,d),this.options[h]!==d&&(this.options[h]=d,this._onOptionChange.fire(h)))},e.prototype._sanitizeAndValidateOption=function(h,d){switch(h){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":d||(d=u.DEFAULT_OPTIONS[h]);break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw Error(h+" cannot be less than 1, value: "+d);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw Error(h+" cannot be less than 0, value: "+d);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw Error(h+" cannot be less than or equal to 0, value: "+d)}return d},e.prototype.getOption=function(h){if(!(h in u.DEFAULT_OPTIONS))throw Error('No option with key "'+h+'"');return this.options[h]},e}();u.OptionsService=w},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=d(0),w=function(){function e(h,u,d){this.document=h,this.parentElement=u,this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=new b.EventEmitter,this._measureStrategy=new E(h,u,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),e.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},p([v(2,g.IOptionsService)],e)}();u.CharSizeService=w;var E=function(){function e(h,u,d){this._document=h,this._parentElement=u,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return 0!==h.width&&0!==h.height&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},e}()},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=d(64);u.MINIMUM_COLS=2,u.MINIMUM_ROWS=1;var w=function(){function e(h){this._optionsService=h,this.cols=Math.max(h.options.cols,u.MINIMUM_COLS),this.rows=Math.max(h.options.rows,u.MINIMUM_ROWS),this.buffers=new b.BufferSet(h,this)}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),e.prototype.resize=function(h,u){this.cols=h,this.rows=u},e.prototype.reset=function(){this.buffers=new b.BufferSet(this._optionsService,this)},p([v(0,g.IOptionsService)],e)}();u.BufferService=w},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(65),v=d(0),g=function(){function e(h,u){this.optionsService=h,this.bufferService=u,this._onBufferActivate=new v.EventEmitter,this._normal=new p.Buffer(!0,h,u),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,h,u),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(e.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),e.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},e.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},e.prototype.resize=function(h,u){this._normal.resize(h,u),this._alt.resize(h,u)},e.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},e}();u.BufferSet=g},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(66),v=d(16),g=d(5),b=d(3),w=d(67),E=d(68),x=d(18);u.MAX_BUFFER_SIZE=4294967295;var L=function(){function e(h,u,d){this._hasScrollback=h,this._optionsService=u,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=x.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,b.WHITESPACE_CELL_CHAR,b.WHITESPACE_CELL_WIDTH,b.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},e.prototype.getWhitespaceCell=function(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},e.prototype.getBlankLine=function(h,u){return new v.BufferLine(this._bufferService.cols,this.getNullCell(h),u)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows},enumerable:!0,configurable:!0}),e.prototype._getCorrectBufferLength=function(h){if(!this._hasScrollback)return h;var d=h+this._optionsService.options.scrollback;return d>u.MAX_BUFFER_SIZE?u.MAX_BUFFER_SIZE:d},e.prototype.fillViewportRows=function(h){if(0===this.lines.length){void 0===h&&(h=v.DEFAULT_ATTR_DATA);for(var u=this._rows;u--;)this.lines.push(this.getBlankLine(h))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(h,u){var d=this.getNullCell(v.DEFAULT_ATTR_DATA),p=this._getCorrectBufferLength(u);if(p>this.lines.maxLength&&(this.lines.maxLength=p),this.lines.length>0){if(this._cols<h)for(var g=0;g<this.lines.length;g++)this.lines.get(g).resize(h,d);var b=0;if(this._rows<u)for(var w=this._rows;w<u;w++)this.lines.length<u+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new v.BufferLine(h,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(h,d)));else for(w=this._rows;w>u;w--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(p<this.lines.maxLength){var E=this.lines.length-p;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=p}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,u-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(h,u),this._cols>h))for(g=0;g<this.lines.length;g++)this.lines.get(g).resize(h,d);this._cols=h,this._rows=u},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),e.prototype._reflow=function(h,u){this._cols!==h&&(h>this._cols?this._reflowLarger(h,u):this._reflowSmaller(h,u))},e.prototype._reflowLarger=function(h,u){var d=w.reflowLargerGetLinesToRemove(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(d.length>0){var p=w.reflowLargerCreateNewLayout(this.lines,d);w.reflowLargerApplyNewLayout(this.lines,p.layout),this._reflowLargerAdjustViewport(h,u,p.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(h,u,d){for(var p=this.getNullCell(v.DEFAULT_ATTR_DATA),g=d;g-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new v.BufferLine(h,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)},e.prototype._reflowSmaller=function(h,u){for(var d=this.getNullCell(v.DEFAULT_ATTR_DATA),p=[],g=0,b=this.lines.length-1;b>=0;b--){var E=this.lines.get(b);if(!(!E||!E.isWrapped&&E.getTrimmedLength()<=h)){for(var x=[E];E.isWrapped&&b>0;)E=this.lines.get(--b),x.unshift(E);var L=this.ybase+this.y;if(!(L>=b&&L<b+x.length)){var k,T=x[x.length-1].getTrimmedLength(),F=w.reflowSmallerGetNewLineLengths(x,this._cols,h),W=F.length-x.length;k=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+W):Math.max(0,this.lines.length-this.lines.maxLength+W);for(var q=[],N=0;N<W;N++){var U=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);q.push(U)}q.length>0&&(p.push({start:b+x.length+g,newLines:q}),g+=q.length),x.push.apply(x,q);var z=F.length-1,K=F[z];0===K&&(K=F[--z]);for(var V=x.length-W-1,G=T;V>=0;){var Y=Math.min(G,K);if(x[z].copyCellsFrom(x[V],G-Y,K-Y,Y,!0),0==(K-=Y)&&(K=F[--z]),0==(G-=Y)){var J=Math.max(--V,0);G=w.getWrappedLineTrimmedLength(x,J,this._cols)}}for(N=0;N<x.length;N++)F[N]<h&&x[N].setCell(F[N],d);for(var X=W-k;X-- >0;)0===this.ybase?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+W,this.ybase+u-1)}}}if(p.length>0){var Z=[],$=[];for(N=0;N<this.lines.length;N++)$.push(this.lines.get(N));var Q=this.lines.length,ee=Q-1,et=0,er=p[0];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);var ei=0;for(N=Math.min(this.lines.maxLength-1,Q+g-1);N>=0;N--)if(er&&er.start>ee+ei){for(var en=er.newLines.length-1;en>=0;en--)this.lines.set(N--,er.newLines[en]);N++,Z.push({index:ee+1,amount:er.newLines.length}),ei+=er.newLines.length,er=p[++et]}else this.lines.set(N,$[ee--]);var eo=0;for(N=Z.length-1;N>=0;N--)Z[N].index+=eo,this.lines.onInsertEmitter.fire(Z[N]),eo+=Z[N].amount;var es=Math.max(0,Q+g-this.lines.maxLength);es>0&&this.lines.onTrimEmitter.fire(es)}},e.prototype.stringIndexToBufferIndex=function(h,u,d){for(void 0===d&&(d=!1);u;){var p=this.lines.get(h);if(!p)return[-1,-1];for(var v=d?p.getTrimmedLength():p.length,g=0;g<v;++g)if(p.get(g)[b.CHAR_DATA_WIDTH_INDEX]&&(u-=p.get(g)[b.CHAR_DATA_CHAR_INDEX].length||1),u<0)return[h,g];h++}return[h,0]},e.prototype.translateBufferLineToString=function(h,u,d,p){void 0===d&&(d=0);var v=this.lines.get(h);return v?v.translateToString(u,d,p):""},e.prototype.getWrappedRangeForLine=function(h){for(var u=h,d=h;u>0&&this.lines.get(u).isWrapped;)u--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:u,last:d}},e.prototype.setupTabStops=function(h){for(null!=h?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.options.tabStopWidth)this.tabs[h]=!0},e.prototype.prevStop=function(h){for(null==h&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h},e.prototype.nextStop=function(h){for(null==h&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h},e.prototype.addMarker=function(h){var u=this,d=new E.Marker(h);return this.markers.push(d),d.register(this.lines.onTrim(function(h){d.line-=h,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(function(h){d.line>=h.index&&(d.line+=h.amount)})),d.register(this.lines.onDelete(function(h){d.line>=h.index&&d.line<h.index+h.amount&&d.dispose(),d.line>h.index&&(d.line-=h.amount)})),d.register(d.onDispose(function(){return u._removeMarker(d)})),d},e.prototype._removeMarker=function(h){this.markers.splice(this.markers.indexOf(h),1)},e.prototype.iterator=function(h,u,d,p,v){return new k(this,h,u,d,p,v)},e}();u.Buffer=L;var k=function(){function e(h,u,d,p,v,g){void 0===d&&(d=0),void 0===p&&(p=h.lines.length),void 0===v&&(v=0),void 0===g&&(g=0),this._buffer=h,this._trimRight=u,this._startIndex=d,this._endIndex=p,this._startOverscan=v,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var h=this._buffer.getWrappedRangeForLine(this._current);h.first<this._startIndex-this._startOverscan&&(h.first=this._startIndex-this._startOverscan),h.last>this._endIndex+this._endOverscan&&(h.last=this._endIndex+this._endOverscan),h.first=Math.max(h.first,0),h.last=Math.min(h.last,this._buffer.lines.length);for(var u="",d=h.first;d<=h.last;++d)u+=this._buffer.translateBufferLineToString(d,this._trimRight);return this._current=h.last+1,{range:h,content:u}},e}();u.BufferStringIterator=k},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(0),v=function(){function e(h){this._maxLength=h,this.onDeleteEmitter=new p.EventEmitter,this.onInsertEmitter=new p.EventEmitter,this.onTrimEmitter=new p.EventEmitter,this._array=Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var u=Array(h),d=0;d<Math.min(h,this.length);d++)u[d]=this._array[this._getCyclicIndex(d)];this._array=u,this._maxLength=h,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var u=this._length;u<h;u++)this._array[u]=void 0;this._length=h},enumerable:!0,configurable:!0}),e.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},e.prototype.set=function(h,u){this._array[this._getCyclicIndex(h)]=u},e.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(h,u){for(var d=[],p=2;p<arguments.length;p++)d[p-2]=arguments[p];if(u){for(var v=h;v<this._length-u;v++)this._array[this._getCyclicIndex(v)]=this._array[this._getCyclicIndex(v+u)];this._length-=u}for(v=this._length-1;v>=h;v--)this._array[this._getCyclicIndex(v+d.length)]=this._array[this._getCyclicIndex(v)];for(v=0;v<d.length;v++)this._array[this._getCyclicIndex(h+v)]=d[v];if(this._length+d.length>this._maxLength){var g=this._length+d.length-this._maxLength;this._startIndex+=g,this._length=this._maxLength,this.onTrimEmitter.fire(g)}else this._length+=d.length},e.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},e.prototype.shiftElements=function(h,u,d){if(!(u<=0)){if(h<0||h>=this._length)throw Error("start argument out of range");if(h+d<0)throw Error("Cannot shift elements in list beyond index 0");if(d>0){for(var p=u-1;p>=0;p--)this.set(h+p+d,this.get(h+p));var v=h+u+d-this._length;if(v>0)for(this._length+=v;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(p=0;p<u;p++)this.set(h+p+d,this.get(h+p))}},e.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},e}();u.CircularList=v},function(h,u,d){function i(h,u,d){if(u===h.length-1)return h[u].getTrimmedLength();var p=!h[u].hasContent(d-1)&&1===h[u].getWidth(d-1),v=2===h[u+1].getWidth(0);return p&&v?d-1:d}Object.defineProperty(u,"__esModule",{value:!0}),u.reflowLargerGetLinesToRemove=function(h,u,d,p,v){for(var g=[],b=0;b<h.length-1;b++){var w=b,E=h.get(++w);if(E.isWrapped){for(var x=[h.get(b)];w<h.length&&E.isWrapped;)x.push(E),E=h.get(++w);if(p>=b&&p<w)b+=x.length-1;else{for(var L=0,k=i(x,L,u),T=1,F=0;T<x.length;){var W=i(x,T,u),q=Math.min(W-F,d-k);x[L].copyCellsFrom(x[T],F,k,q,!1),(k+=q)===d&&(L++,k=0),(F+=q)===W&&(T++,F=0),0===k&&0!==L&&2===x[L-1].getWidth(d-1)&&(x[L].copyCellsFrom(x[L-1],d-1,k++,1,!1),x[L-1].setCell(d-1,v))}x[L].replaceCells(k,d,v);for(var N=0,U=x.length-1;U>0&&(U>L||0===x[U].getTrimmedLength());U--)N++;N>0&&(g.push(b+x.length-N),g.push(N)),b+=x.length-1}}}return g},u.reflowLargerCreateNewLayout=function(h,u){for(var d=[],p=0,v=u[p],g=0,b=0;b<h.length;b++)if(v===b){var w=u[++p];h.onDeleteEmitter.fire({index:b-g,amount:w}),b+=w-1,g+=w,v=u[++p]}else d.push(b);return{layout:d,countRemoved:g}},u.reflowLargerApplyNewLayout=function(h,u){for(var d=[],p=0;p<u.length;p++)d.push(h.get(u[p]));for(p=0;p<d.length;p++)h.set(p,d[p]);h.length=u.length},u.reflowSmallerGetNewLineLengths=function(h,u,d){for(var p=[],v=h.map(function(d,p){return i(h,p,u)}).reduce(function(h,u){return h+u}),g=0,b=0,w=0;w<v;){if(v-w<d){p.push(v-w);break}g+=d;var E=i(h,b,u);g>E&&(g-=E,b++);var x=2===h[b].getWidth(g-1);x&&g--;var L=x?d-1:d;p.push(L),w+=L}return p},u.getWrappedLineTrimmedLength=i},function(h,u,d){var p,v=this&&this.__extends||(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var g=d(0),b=function(h){function t(u){var d=h.call(this)||this;return d.line=u,d._id=t._nextId++,d.isDisposed=!1,d._onDispose=new g.EventEmitter,d}return v(t,h),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},t._nextId=1,t}(d(2).Disposable);u.Marker=b},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(4),b=d(28),w=function(){function e(h,u){this._renderService=h,this._charSizeService=u}return e.prototype.getCoords=function(h,u,d,p,v){return b.getCoords(h,u,d,p,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,v)},e.prototype.getRawByteCoords=function(h,u,d,p){var v=this.getCoords(h,u,d,p);return b.getRawByteCoords(v)},p([v(0,g.IRenderService),v(1,g.ICharSizeService)],e)}();u.MouseService=w},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=d(0),w=d(31),E=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,origin:!1,wraparound:!0}),x=function(){function e(h,u,d,p){this._scrollToBottom=h,this._bufferService=u,this._logService=d,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=new b.EventEmitter,this._onUserInput=new b.EventEmitter,this._onBinary=new b.EventEmitter,this.decPrivateModes=w.clone(E)}return Object.defineProperty(e.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.decPrivateModes=w.clone(E)},e.prototype.triggerDataEvent=function(h,u){if(void 0===u&&(u=!1),!this._optionsService.options.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+h+'"',function(){return h.split("").map(function(h){return h.charCodeAt(0)})}),this._onData.fire(h)}},e.prototype.triggerBinaryEvent=function(h){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+h+'"',function(){return h.split("").map(function(h){return h.charCodeAt(0)})}),this._onBinary.fire(h))},p([v(1,g.IBufferService),v(2,g.ILogService),v(3,g.IOptionsService)],e)}();u.CoreService=x},function(h,u,d){var p,v=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},g=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}},b=this&&this.__spreadArrays||function(){for(var h=0,u=0,d=arguments.length;u<d;u++)h+=arguments[u].length;var p=Array(h),v=0;for(u=0;u<d;u++)for(var g=arguments[u],b=0,w=g.length;b<w;b++,v++)p[v]=g[b];return p};Object.defineProperty(u,"__esModule",{value:!0});var w,E=d(1);(p=w=u.LogLevel||(u.LogLevel={}))[p.DEBUG=0]="DEBUG",p[p.INFO=1]="INFO",p[p.WARN=2]="WARN",p[p.ERROR=3]="ERROR",p[p.OFF=4]="OFF";var x={debug:w.DEBUG,info:w.INFO,warn:w.WARN,error:w.ERROR,off:w.OFF},L=function(){function e(h){var u=this;this._optionsService=h,this._updateLogLevel(),this._optionsService.onOptionChange(function(h){"logLevel"===h&&u._updateLogLevel()})}return e.prototype._updateLogLevel=function(){this._logLevel=x[this._optionsService.options.logLevel]},e.prototype._evalLazyOptionalParams=function(h){for(var u=0;u<h.length;u++)"function"==typeof h[u]&&(h[u]=h[u]())},e.prototype._log=function(h,u,d){this._evalLazyOptionalParams(d),h.call.apply(h,b([console,"xterm.js: "+u],d))},e.prototype.debug=function(h){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];this._logLevel<=w.DEBUG&&this._log(console.log,h,u)},e.prototype.info=function(h){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];this._logLevel<=w.INFO&&this._log(console.info,h,u)},e.prototype.warn=function(h){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];this._logLevel<=w.WARN&&this._log(console.warn,h,u)},e.prototype.error=function(h){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];this._logLevel<=w.ERROR&&this._log(console.error,h,u)},v([g(0,E.IOptionsService)],e)}();u.LogService=L},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=function(){function e(h){this._bufferService=h,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(h){h<this._start?this._start=h:h>this._end&&(this._end=h)},e.prototype.markRangeDirty=function(h,u){if(h>u){var d=h;h=u,u=d}h<this._start&&(this._start=h),u>this._end&&(this._end=u)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},p([v(0,g.IBufferService)],e)}();u.DirtyRowService=b},function(h,u,d){var p=this&&this.__spreadArrays||function(){for(var h=0,u=0,d=arguments.length;u<d;u++)h+=arguments[u].length;var p=Array(h),v=0;for(u=0;u<d;u++)for(var g=arguments[u],b=0,w=g.length;b<w;b++,v++)p[v]=g[b];return p};Object.defineProperty(u,"__esModule",{value:!0});var v=d(1),g=d(14),b=function(){function e(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];this._entries=new Map;for(var d=0;d<h.length;d++){var p=h[d],v=p[0],g=p[1];this.set(v,g)}}return e.prototype.set=function(h,u){var d=this._entries.get(h);return this._entries.set(h,u),d},e.prototype.forEach=function(h){this._entries.forEach(function(u,d){return h(d,u)})},e.prototype.has=function(h){return this._entries.has(h)},e.prototype.get=function(h){return this._entries.get(h)},e}();u.ServiceCollection=b;var w=function(){function e(){this._services=new b,this._services.set(v.IInstantiationService,this)}return e.prototype.setService=function(h,u){this._services.set(h,u)},e.prototype.getService=function(h){return this._services.get(h)},e.prototype.createInstance=function(h){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];for(var v=g.getServiceDependencies(h).sort(function(h,u){return h.index-u.index}),b=[],w=0;w<v.length;w++){var E=v[w],x=this._services.get(E.id);if(!x)throw Error("[createInstance] "+h.name+" depends on UNKNOWN service "+E.id+".");b.push(x)}var L=v.length>0?v[0].index:u.length;if(u.length!==L)throw Error("[createInstance] First service dependency of "+h.name+" at position "+(L+1)+" conflicts with "+u.length+" static arguments");return new(h.bind.apply(h,p([void 0],p(u,b))))},e}();u.InstantiationService=w},function(h,u,d){var p=this&&this.__decorate||function(h,u,d,p){var v,g=arguments.length,b=g<3?u:null===p?p=Object.getOwnPropertyDescriptor(u,d):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,u,d,p);else for(var w=h.length-1;w>=0;w--)(v=h[w])&&(b=(g<3?v(b):g>3?v(u,d,b):v(u,d))||b);return g>3&&b&&Object.defineProperty(u,d,b),b},v=this&&this.__param||function(h,u){return function(d,p){u(d,p,h)}};Object.defineProperty(u,"__esModule",{value:!0});var g=d(1),b=d(0),w={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(h){return 4!==h.button&&1===h.action&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)}},VT200:{events:19,restrict:function(h){return 32!==h.action}},DRAG:{events:23,restrict:function(h){return 32!==h.action||3!==h.button}},ANY:{events:31,restrict:function(h){return!0}}};function c(h,u){var d=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return 4===h.button?(d|=64,d|=h.action):(d|=3&h.button,4&h.button&&(d|=64),8&h.button&&(d|=128),32===h.action?d|=32:0!==h.action||u||(d|=3)),d}var E=String.fromCharCode,x={DEFAULT:function(h){var u=[c(h,!1)+32,h.col+32,h.row+32];return u[0]>255||u[1]>255||u[2]>255?"":"\x1b[M"+E(u[0])+E(u[1])+E(u[2])},SGR:function(h){var u=0===h.action&&4!==h.button?"m":"M";return"\x1b[<"+c(h,!0)+";"+h.col+";"+h.row+u}},L=function(){function e(h,u){var d=this;this._bufferService=h,this._coreService=u,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new b.EventEmitter,this._lastEvent=null,Object.keys(w).forEach(function(h){return d.addProtocol(h,w[h])}),Object.keys(x).forEach(function(h){return d.addEncoding(h,x[h])}),this.reset()}return e.prototype.addProtocol=function(h,u){this._protocols[h]=u},e.prototype.addEncoding=function(h,u){this._encodings[h]=u},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(h){if(!this._protocols[h])throw Error('unknown protocol "'+h+'"');this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(h){if(!this._encodings[h])throw Error('unknown encoding "'+h+'"');this._activeEncoding=h},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),e.prototype.triggerMouseEvent=function(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||4===h.button&&32===h.action||3===h.button&&32!==h.action||4!==h.button&&(2===h.action||3===h.action)||(h.col++,h.row++,32===h.action&&this._lastEvent&&this._compareEvents(this._lastEvent,h))||!this._protocols[this._activeProtocol].restrict(h))return!1;var u=this._encodings[this._activeEncoding](h);return u&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(u):this._coreService.triggerDataEvent(u,!0)),this._lastEvent=h,!0},e.prototype.explainEvents=function(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}},e.prototype._compareEvents=function(h,u){return h.col===u.col&&h.row===u.row&&h.button===u.button&&h.action===u.action&&h.ctrl===u.ctrl&&h.alt===u.alt&&h.shift===u.shift},p([v(0,g.IBufferService),v(1,g.ICoreService)],e)}();u.CoreMouseService=L},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h){this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return e.prototype.writeSync=function(h){if(this._writeBuffer.length){for(var u=this._bufferOffset;u<this._writeBuffer.length;++u){var d=this._writeBuffer[u],p=this._callbacks[u];this._action(d),p&&p()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(h)},e.prototype.write=function(h,u){var d=this;if(this._pendingData>5e7)throw Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return d._innerWrite()})),this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(u)},e.prototype._innerWrite=function(){for(var h=this,u=Date.now();this._writeBuffer.length>this._bufferOffset;){var d=this._writeBuffer[this._bufferOffset],p=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(d),this._pendingData-=d.length,p&&p(),Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return h._innerWrite()},0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},e}();u.WriteBuffer=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(0),v=function(){function e(h){this._bufferService=h,this._linkProviders=[],this._linkCacheDisposables=[],this._onLinkHover=new p.EventEmitter,this._onLinkLeave=new p.EventEmitter}return Object.defineProperty(e.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),e.prototype.registerLinkProvider=function(h){var u=this;return this._linkProviders.push(h),{dispose:function(){var d=u._linkProviders.indexOf(h);-1!==d&&u._linkProviders.splice(d,1)}}},e.prototype.attachToDom=function(h,u,d){this._element=h,this._mouseService=u,this._renderService=d,this._element.addEventListener("mousemove",this._onMouseMove.bind(this)),this._element.addEventListener("click",this._onMouseDown.bind(this))},e.prototype._onMouseMove=function(h){if(this._lastMouseEvent=h,this._element&&this._mouseService){var u=this._positionFromMouseEvent(h,this._element,this._mouseService);u&&(this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._onHover(u),this._lastBufferCell=u))}},e.prototype._onHover=function(h){this._currentLink?this._linkAtPosition(this._currentLink,h)||(this._clearCurrentLink(),this._askForLink(h)):this._askForLink(h)},e.prototype._askForLink=function(h){var u=this,d=new Map,p=!1;this._linkProviders.forEach(function(v,g){v.provideLink(h,function(h){d.set(g,h);for(var v=!1,b=0;b<g;b++)d.has(b)&&!d.get(b)||(v=!0);if(!v&&h&&(p=!0,u._handleNewLink(h)),d.size===u._linkProviders.length&&!p)for(b=0;b<d.size;b++){var w=d.get(b);if(w){u._handleNewLink(w);break}}})})},e.prototype._onMouseDown=function(h){if(this._element&&this._mouseService&&this._currentLink){var u=this._positionFromMouseEvent(h,this._element,this._mouseService);u&&this._linkAtPosition(this._currentLink,u)&&this._currentLink.activate(h,this._currentLink.text)}},e.prototype._clearCurrentLink=function(h,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!h||!u||this._currentLink.range.start.y>=h&&this._currentLink.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink,this._lastMouseEvent),this._currentLink=void 0,this._linkCacheDisposables.forEach(function(h){return h.dispose()}),this._linkCacheDisposables=[])},e.prototype._handleNewLink=function(h){var u=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(h,d)&&(this._currentLink=h,this._linkHover(this._element,h,this._lastMouseEvent),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRender(function(h){u._clearCurrentLink(h.start+1+u._bufferService.buffer.ydisp,h.end+1+u._bufferService.buffer.ydisp)})))}},e.prototype._linkHover=function(h,u,d){var p=u.range,v=this._bufferService.buffer.ydisp;this._onLinkHover.fire(this._createLinkHoverEvent(p.start.x-1,p.start.y-v-1,p.end.x,p.end.y-v-1,void 0)),h.classList.add("xterm-cursor-pointer"),u.hover&&u.hover(d,u.text)},e.prototype._linkLeave=function(h,u,d){var p=u.range,v=this._bufferService.buffer.ydisp;this._onLinkLeave.fire(this._createLinkHoverEvent(p.start.x-1,p.start.y-v-1,p.end.x,p.end.y-v-1,void 0)),h.classList.remove("xterm-cursor-pointer"),u.leave&&u.leave(d,u.text)},e.prototype._linkAtPosition=function(h,u){var d=h.range.start.y===h.range.end.y,p=h.range.start.y<u.y,v=h.range.end.y>u.y;return(d&&h.range.start.x<=u.x&&h.range.end.x>=u.x||p&&h.range.end.x>=u.x||v&&h.range.start.x<=u.x||p&&v)&&h.range.start.y<=u.y&&h.range.end.y>=u.y},e.prototype._positionFromMouseEvent=function(h,u,d){var p=d.getCoords(h,u,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}},e.prototype._createLinkHoverEvent=function(h,u,d,p,v){return{x1:h,y1:u,x2:d,y2:p,cols:this._bufferService.cols,fg:v}},e}();u.Linkifier2=v},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(h){this._textarea=h}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),e}();u.CoreBrowserService=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=d(0),v=d(79),g=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter;var h=new v.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(h){if(!this._providers[h])throw Error('unknown Unicode version "'+h+'"');this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)},enumerable:!0,configurable:!0}),e.prototype.register=function(h){this._providers[h.version]=h},e.prototype.wcwidth=function(h){return this._activeProvider.wcwidth(h)},e.prototype.getStringCellWidth=function(h){for(var u=0,d=h.length,p=0;p<d;++p){var v=h.charCodeAt(p);if(55296<=v&&v<=56319){if(++p>=d)return u+this.wcwidth(v);var g=h.charCodeAt(p);56320<=g&&g<=57343?v=1024*(v-55296)+g-56320+65536:u+=this.wcwidth(g)}u+=this.wcwidth(v)}return u},e}();u.UnicodeService=g},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p,v=d(15),g=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],b=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],w=function(){function e(){if(this.version="6",!p){p=new Uint8Array(65536),v.fill(p,1),p[0]=0,v.fill(p,0,1,32),v.fill(p,0,127,160),v.fill(p,2,4352,4448),p[9001]=2,p[9002]=2,v.fill(p,2,11904,42192),p[12351]=1,v.fill(p,2,44032,55204),v.fill(p,2,63744,64256),v.fill(p,2,65040,65050),v.fill(p,2,65072,65136),v.fill(p,2,65280,65377),v.fill(p,2,65504,65511);for(var h=0;h<g.length;++h)v.fill(p,0,g[h][0],g[h][1]+1)}}return e.prototype.wcwidth=function(h){return h<32?0:h<127?1:h<65536?p[h]:!function(h,u){var d,p=0,v=u.length-1;if(h<u[0][0]||h>u[v][1])return!1;for(;v>=p;)if(h>u[d=p+v>>1][1])p=d+1;else{if(!(h<u[d][0]))return!0;v=d-1}return!1}(h,b)?h>=131072&&h<=196605||h>=196608&&h<=262141?2:1:0},e}();u.UnicodeV6=w},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this.charsets=[],this.glevel=0}return e.prototype.reset=function(){this.charset=void 0,this.charsets=[],this.glevel=0},e.prototype.setgLevel=function(h){this.glevel=h,this.charset=this.charsets[h]},e.prototype.setgCharset=function(h,u){this.charsets[h]=u,this.glevel===h&&(this.charset=u)},e}();u.CharsetService=p},function(h,u,d){Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()},e.prototype.loadAddon=function(h,u){var d=this,p={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(p),u.dispose=function(){return d._wrappedAddonDispose(p)},u.activate(h)},e.prototype._wrappedAddonDispose=function(h){if(!h.isDisposed){for(var u=-1,d=0;d<this._addons.length;d++)if(this._addons[d]===h){u=d;break}if(-1===u)throw Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(u,1)}},e}();u.AddonManager=p}])},function(h,u,d){var p=d(30),v=d(26);p({target:"Array",proto:!0,forced:[].forEach!=v},{forEach:v})},function(h,u,d){var p=d(1),v=d(10).f,g=d(6),b=d(34),w=d(9),E=d(39),x=d(49);h.exports=function(h,u){var d,L,k,T,F,W=h.target,q=h.global,N=h.stat;if(d=q?p:N?p[W]||w(W,{}):(p[W]||{}).prototype)for(L in u){if(T=u[L],k=h.noTargetGet?(F=v(d,L))&&F.value:d[L],!x(q?L:W+(N?".":"#")+L,h.forced)&&void 0!==k){if(typeof T==typeof k)continue;E(T,k)}(h.sham||k&&k.sham)&&g(T,"sham",!0),b(d,L,T,h)}}},function(h,u){var d;d=function(){return this}();try{d=d||Function("return this")()}catch(h){d=window}h.exports=d},function(h,u,d){var p={}.propertyIsEnumerable,v=Object.getOwnPropertyDescriptor,g=v&&!p.call({1:2},1);u.f=g?function(h){var u=v(this,h);return!!u&&u.enumerable}:p},function(h,u,d){var p=d(1),v=d(5),g=p.document,b=v(g)&&v(g.createElement);h.exports=function(h){return b?g.createElement(h):{}}},function(h,u,d){var p=d(1),v=d(6),g=d(3),b=d(9),w=d(19),E=d(35),x=E.get,L=E.enforce,k=String(String).split("String");(h.exports=function(h,u,d,w){var E=!!w&&!!w.unsafe,x=!!w&&!!w.enumerable,T=!!w&&!!w.noTargetGet;"function"==typeof d&&("string"!=typeof u||g(d,"name")||v(d,"name",u),L(d).source=k.join("string"==typeof u?u:"")),h!==p?(E?!T&&h[u]&&(x=!0):delete h[u],x?h[u]=d:v(h,u,d)):x?h[u]=d:b(u,d)})(Function.prototype,"toString",function(){return"function"==typeof this&&x(this).source||w(this)})},function(h,u,d){var p,v,g,b=d(36),w=d(1),E=d(5),x=d(6),L=d(3),k=d(37),T=d(23),F=w.WeakMap;if(b){var W=new F,q=W.get,N=W.has,U=W.set;p=function(h,u){return U.call(W,h,u),u},v=function(h){return q.call(W,h)||{}},g=function(h){return N.call(W,h)}}else{var z=k("state");T[z]=!0,p=function(h,u){return x(h,z,u),u},v=function(h){return L(h,z)?h[z]:{}},g=function(h){return L(h,z)}}h.exports={set:p,get:v,has:g,enforce:function(h){return g(h)?v(h):p(h,{})},getterFor:function(h){return function(u){var d;if(!E(u)||(d=v(u)).type!==h)throw TypeError("Incompatible receiver, "+h+" required");return d}}}},function(h,u,d){var p=d(1),v=d(19),g=p.WeakMap;h.exports="function"==typeof g&&/native code/.test(v(g))},function(h,u,d){var p=d(21),v=d(22),g=p("keys");h.exports=function(h){return g[h]||(g[h]=v(h))}},function(h,u){h.exports=!1},function(h,u,d){var p=d(3),v=d(40),g=d(10),b=d(17);h.exports=function(h,u){for(var d=v(u),w=b.f,E=g.f,x=0;x<d.length;x++){var L=d[x];p(h,L)||w(h,L,E(u,L))}}},function(h,u,d){var p=d(41),v=d(43),g=d(48),b=d(18);h.exports=p("Reflect","ownKeys")||function(h){var u=v.f(b(h)),d=g.f;return d?u.concat(d(h)):u}},function(h,u,d){var p=d(42),v=d(1),o=function(h){return"function"==typeof h?h:void 0};h.exports=function(h,u){return arguments.length<2?o(p[h])||o(v[h]):p[h]&&p[h][u]||v[h]&&v[h][u]}},function(h,u,d){var p=d(1);h.exports=p},function(h,u,d){var p=d(44),v=d(47).concat("length","prototype");u.f=Object.getOwnPropertyNames||function(h){return p(h,v)}},function(h,u,d){var p=d(3),v=d(8),g=d(45).indexOf,b=d(23);h.exports=function(h,u){var d,w=v(h),E=0,x=[];for(d in w)!p(b,d)&&p(w,d)&&x.push(d);for(;u.length>E;)p(w,d=u[E++])&&(~g(x,d)||x.push(d));return x}},function(h,u,d){var p=d(8),v=d(24),g=d(46),s=function(h){return function(u,d,b){var w,E=p(u),x=v(E.length),L=g(b,x);if(h&&d!=d){for(;x>L;)if((w=E[L++])!=w)return!0}else for(;x>L;L++)if((h||L in E)&&E[L]===d)return h||L||0;return!h&&-1}};h.exports={includes:s(!0),indexOf:s(!1)}},function(h,u,d){var p=d(25),v=Math.max,g=Math.min;h.exports=function(h,u){var d=p(h);return d<0?v(d+u,0):g(d,u)}},function(h,u){h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(h,u){u.f=Object.getOwnPropertySymbols},function(h,u,d){var p=d(2),v=/#|\.prototype\./,o=function(h,u){var d=b[g(h)];return d==E||d!=w&&("function"==typeof u?p(u):!!u)},g=o.normalize=function(h){return String(h).replace(v,".").toLowerCase()},b=o.data={},w=o.NATIVE="N",E=o.POLYFILL="P";h.exports=o},function(h,u,d){var p=d(51),v=d(12),g=d(53),b=d(24),w=d(54),E=[].push,l=function(h){var u=1==h,d=2==h,x=3==h,L=4==h,k=6==h,T=5==h||k;return function(F,W,q,N){for(var U,z,K=g(F),V=v(K),G=p(W,q,3),Y=b(V.length),J=0,X=N||w,Z=u?X(F,Y):d?X(F,0):void 0;Y>J;J++)if((T||J in V)&&(z=G(U=V[J],J,K),h)){if(u)Z[J]=z;else if(z)switch(h){case 3:return!0;case 5:return U;case 6:return J;case 2:E.call(Z,U)}else if(L)return!1}return k?-1:x||L?L:Z}};h.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(h,u,d){var p=d(52);h.exports=function(h,u,d){if(p(h),void 0===u)return h;switch(d){case 0:return function(){return h.call(u)};case 1:return function(d){return h.call(u,d)};case 2:return function(d,p){return h.call(u,d,p)};case 3:return function(d,p,v){return h.call(u,d,p,v)}}return function(){return h.apply(u,arguments)}}},function(h,u){h.exports=function(h){if("function"!=typeof h)throw TypeError(String(h)+" is not a function");return h}},function(h,u,d){var p=d(14);h.exports=function(h){return Object(p(h))}},function(h,u,d){var p=d(5),v=d(55),g=d(56)("species");h.exports=function(h,u){var d;return v(h)&&("function"==typeof(d=h.constructor)&&(d===Array||v(d.prototype))?d=void 0:p(d)&&null===(d=d[g])&&(d=void 0)),new(void 0===d?Array:d)(0===u?0:u)}},function(h,u,d){var p=d(13);h.exports=Array.isArray||function(h){return"Array"==p(h)}},function(h,u,d){var p=d(1),v=d(21),g=d(3),b=d(22),w=d(27),E=d(57),x=v("wks"),L=p.Symbol,k=E?L:L&&L.withoutSetter||b;h.exports=function(h){return g(x,h)||(w&&g(L,h)?x[h]=L[h]:x[h]=k("Symbol."+h)),x[h]}},function(h,u,d){var p=d(27);h.exports=p&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(h,u,d){var p=d(2);h.exports=function(h,u){var d=[][h];return!!d&&p(function(){d.call(null,u||function(){throw 1},1)})}},function(h,u,d){var p=d(4),v=d(2),g=d(3),b=Object.defineProperty,w={},c=function(h){throw h};h.exports=function(h,u){if(g(w,h))return w[h];u||(u={});var d=[][h],E=!!g(u,"ACCESSORS")&&u.ACCESSORS,x=g(u,0)?u[0]:c,L=g(u,1)?u[1]:void 0;return w[h]=!!d&&!v(function(){if(E&&!p)return!0;var h={length:-1};E?b(h,1,{enumerable:!0,get:c}):h[1]=1,d.call(h,x,L)})}},function(h,u,d){var p=d(1),v=d(61),g=d(26),b=d(6);for(var w in v){var E=p[w],x=E&&E.prototype;if(x&&x.forEach!==g)try{b(x,"forEach",g)}catch(h){x.forEach=g}}},function(h,u){h.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(h,u,d){/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p=d(63),v="function"==typeof Symbol&&Symbol.for,g=v?Symbol.for("react.element"):60103,b=v?Symbol.for("react.portal"):60106,w=v?Symbol.for("react.fragment"):60107,E=v?Symbol.for("react.strict_mode"):60108,x=v?Symbol.for("react.profiler"):60114,L=v?Symbol.for("react.provider"):60109,k=v?Symbol.for("react.context"):60110,T=v?Symbol.for("react.forward_ref"):60112,F=v?Symbol.for("react.suspense"):60113,W=v?Symbol.for("react.memo"):60115,q=v?Symbol.for("react.lazy"):60116,N="function"==typeof Symbol&&Symbol.iterator;function y(h){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+h,d=1;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+h+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z={};function m(h,u,d){this.props=h,this.context=u,this.refs=z,this.updater=d||U}function S(){}function C(h,u,d){this.props=h,this.context=u,this.refs=z,this.updater=d||U}m.prototype.isReactComponent={},m.prototype.setState=function(h,u){if("object"!=typeof h&&"function"!=typeof h&&null!=h)throw Error(y(85));this.updater.enqueueSetState(this,h,u,"setState")},m.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")},S.prototype=m.prototype;var K=C.prototype=new S;K.constructor=C,p(K,m.prototype),K.isPureReactComponent=!0;var V={current:null},G=Object.prototype.hasOwnProperty,Y={key:!0,ref:!0,__self:!0,__source:!0};function A(h,u,d){var p,v={},b=null,w=null;if(null!=u)for(p in void 0!==u.ref&&(w=u.ref),void 0!==u.key&&(b=""+u.key),u)G.call(u,p)&&!Y.hasOwnProperty(p)&&(v[p]=u[p]);var E=arguments.length-2;if(1===E)v.children=d;else if(1<E){for(var x=Array(E),L=0;L<E;L++)x[L]=arguments[L+2];v.children=x}if(h&&h.defaultProps)for(p in E=h.defaultProps)void 0===v[p]&&(v[p]=E[p]);return{$$typeof:g,type:h,key:b,ref:w,props:v,_owner:V.current}}function R(h){return"object"==typeof h&&null!==h&&h.$$typeof===g}var J=/\/+/g,X=[];function O(h,u,d,p){if(X.length){var v=X.pop();return v.result=h,v.keyPrefix=u,v.func=d,v.context=p,v.count=0,v}return{result:h,keyPrefix:u,func:d,context:p,count:0}}function D(h){h.result=null,h.keyPrefix=null,h.func=null,h.context=null,h.count=0,10>X.length&&X.push(h)}function M(h,u,d){return null==h?0:function e(h,u,d,p){var v=typeof h;"undefined"!==v&&"boolean"!==v||(h=null);var w=!1;if(null===h)w=!0;else switch(v){case"string":case"number":w=!0;break;case"object":switch(h.$$typeof){case g:case b:w=!0}}if(w)return d(p,h,""===u?"."+P(h,0):u),1;if(w=0,u=""===u?".":u+":",Array.isArray(h))for(var E=0;E<h.length;E++){var x=u+P(v=h[E],E);w+=e(v,x,d,p)}else if("function"==typeof(x=null===h||"object"!=typeof h?null:"function"==typeof(x=N&&h[N]||h["@@iterator"])?x:null))for(h=x.call(h),E=0;!(v=h.next()).done;)w+=e(v=v.value,x=u+P(v,E++),d,p);else if("object"===v)throw Error(y(31,"[object Object]"==(d=""+h)?"object with keys {"+Object.keys(h).join(", ")+"}":d,""));return w}(h,"",u,d)}function P(h,u){var d,p;return"object"==typeof h&&null!==h&&null!=h.key?(d=h.key,p={"=":"=0",":":"=2"},"$"+(""+d).replace(/[=:]/g,function(h){return p[h]})):u.toString(36)}function H(h,u){h.func.call(h.context,u,h.count++)}function I(h,u,d){var p,v,b=h.result,w=h.keyPrefix;Array.isArray(h=h.func.call(h.context,u,h.count++))?B(h,b,d,function(h){return h}):null!=h&&(R(h)&&(p=h,v=w+(!h.key||u&&u.key===h.key?"":(""+h.key).replace(J,"$&/")+"/")+d,h={$$typeof:g,type:p.type,key:v,ref:p.ref,props:p.props,_owner:p._owner}),b.push(h))}function B(h,u,d,p,v){var g="";null!=d&&(g=(""+d).replace(J,"$&/")+"/"),M(h,I,u=O(u,g,p,v)),D(u)}var Z={current:null};function j(){var h=Z.current;if(null===h)throw Error(y(321));return h}u.Children={map:function(h,u,d){if(null==h)return h;var p=[];return B(h,p,null,u,d),p},forEach:function(h,u,d){if(null==h)return h;M(h,H,u=O(null,null,u,d)),D(u)},count:function(h){return M(h,function(){return null},null)},toArray:function(h){var u=[];return B(h,u,null,function(h){return h}),u},only:function(h){if(!R(h))throw Error(y(143));return h}},u.Component=m,u.Fragment=w,u.Profiler=x,u.PureComponent=C,u.StrictMode=E,u.Suspense=F,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:V,IsSomeRendererActing:{current:!1},assign:p},u.cloneElement=function(h,u,d){if(null==h)throw Error(y(267,h));var v=p({},h.props),b=h.key,w=h.ref,E=h._owner;if(null!=u){if(void 0!==u.ref&&(w=u.ref,E=V.current),void 0!==u.key&&(b=""+u.key),h.type&&h.type.defaultProps)var x=h.type.defaultProps;for(L in u)G.call(u,L)&&!Y.hasOwnProperty(L)&&(v[L]=void 0===u[L]&&void 0!==x?x[L]:u[L])}var L=arguments.length-2;if(1===L)v.children=d;else if(1<L){x=Array(L);for(var k=0;k<L;k++)x[k]=arguments[k+2];v.children=x}return{$$typeof:g,type:h.type,key:b,ref:w,props:v,_owner:E}},u.createContext=function(h,u){return void 0===u&&(u=null),(h={$$typeof:k,_calculateChangedBits:u,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:L,_context:h},h.Consumer=h},u.createElement=A,u.createFactory=function(h){var u=A.bind(null,h);return u.type=h,u},u.createRef=function(){return{current:null}},u.forwardRef=function(h){return{$$typeof:T,render:h}},u.isValidElement=R,u.lazy=function(h){return{$$typeof:q,_ctor:h,_status:-1,_result:null}},u.memo=function(h,u){return{$$typeof:W,type:h,compare:void 0===u?null:u}},u.useCallback=function(h,u){return j().useCallback(h,u)},u.useContext=function(h,u){return j().useContext(h,u)},u.useDebugValue=function(){},u.useEffect=function(h,u){return j().useEffect(h,u)},u.useImperativeHandle=function(h,u,d){return j().useImperativeHandle(h,u,d)},u.useLayoutEffect=function(h,u){return j().useLayoutEffect(h,u)},u.useMemo=function(h,u){return j().useMemo(h,u)},u.useReducer=function(h,u,d){return j().useReducer(h,u,d)},u.useRef=function(h){return j().useRef(h)},u.useState=function(h){return j().useState(h)},u.version="16.13.1"},function(h,u,d){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;h.exports=!function(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de","5"===Object.getOwnPropertyNames(h)[0])return!1;for(var u={},d=0;d<10;d++)u["_"+String.fromCharCode(d)]=d;if("0123456789"!==Object.getOwnPropertyNames(u).map(function(h){return u[h]}).join(""))return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(h){p[h]=h}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},p)).join("")}catch(h){return!1}}()?function(h,u){for(var d,b,w=function(h){if(null==h)throw TypeError("Object.assign cannot be called with null or undefined");return Object(h)}(h),E=1;E<arguments.length;E++){for(var x in d=Object(arguments[E]))v.call(d,x)&&(w[x]=d[x]);if(p){b=p(d);for(var L=0;L<b.length;L++)g.call(d,b[L])&&(w[b[L]]=d[b[L]])}}return w}:Object.assign},function(h,u,d){var p=d(65);function n(){}function o(){}o.resetWarningCache=n,h.exports=function(){function e(h,u,d,v,g,b){if(b!==p){var w=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}function t(){return e}e.isRequired=e;var h={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return h.PropTypes=h,h}},function(h,u,d){h.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(h,u,d){var p=d(67),v=d(68);"string"==typeof(v=v.__esModule?v.default:v)&&(v=[[h.i,v,""]]),p(v,{insert:"head",singleton:!1}),h.exports=v.locals||{}},function(h,u,d){var p,v,g=(p={},function(h){if(void 0===p[h]){var u=document.querySelector(h);if(window.HTMLIFrameElement&&u instanceof window.HTMLIFrameElement)try{u=u.contentDocument.head}catch(h){u=null}p[h]=u}return p[h]}),b=[];function a(h){for(var u=-1,d=0;d<b.length;d++)if(b[d].identifier===h){u=d;break}return u}function c(h,u){for(var d={},p=[],v=0;v<h.length;v++){var g=h[v],w=u.base?g[0]+u.base:g[0],E=d[w]||0,k="".concat(w," ").concat(E);d[w]=E+1;var T=a(k),F={css:g[1],media:g[2],sourceMap:g[3]};-1!==T?(b[T].references++,b[T].updater(F)):b.push({identifier:k,updater:function(h,u){var d,p,v;if(u.singleton){var g=L++;p=f.bind(null,d=x||(x=l(u)),g,!1),v=f.bind(null,d,g,!0)}else p=_.bind(null,d=l(u),u),v=function(){var h;null!==(h=d).parentNode&&h.parentNode.removeChild(h)};return p(h),function(u){u?(u.css!==h.css||u.media!==h.media||u.sourceMap!==h.sourceMap)&&p(h=u):v()}}(F,u),references:1}),p.push(k)}return p}function l(h){var u=document.createElement("style"),p=h.attributes||{};if(void 0===p.nonce){var v=d.nc;v&&(p.nonce=v)}if(Object.keys(p).forEach(function(h){u.setAttribute(h,p[h])}),"function"==typeof h.insert)h.insert(u);else{var b=g(h.insert||"head");if(!b)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");b.appendChild(u)}return u}var w,E=(w=[],function(h,u){return w[h]=u,w.filter(Boolean).join("\n")});function f(h,u,d,p){var v=d?"":p.media?"@media ".concat(p.media," {").concat(p.css,"}"):p.css;if(h.styleSheet)h.styleSheet.cssText=E(u,v);else{var g=document.createTextNode(v),b=h.childNodes;b[u]&&h.removeChild(b[u]),b.length?h.insertBefore(g,b[u]):h.appendChild(g)}}function _(h,u,d){var p=d.css,v=d.media,g=d.sourceMap;if(v?h.setAttribute("media",v):h.removeAttribute("media"),g&&btoa&&(p+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(g))))," */")),h.styleSheet)h.styleSheet.cssText=p;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(p))}}var x=null,L=0;h.exports=function(h,u){(u=u||{}).singleton||"boolean"==typeof u.singleton||(u.singleton=(void 0===v&&(v=!!(window&&document&&document.all&&!window.atob)),v));var d=c(h=h||[],u);return function(h){if(h=h||[],"[object Array]"===Object.prototype.toString.call(h)){for(var p=0;p<d.length;p++){var v=a(d[p]);b[v].references--}for(var g=c(h,u),w=0;w<d.length;w++){var E=a(d[w]);0===b[E].references&&(b[E].updater(),b.splice(E,1))}d=g}}}},function(h,u,d){(u=d(69)(!1)).push([h.i,'/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */\n\n/**\n *  Default styles for xterm.js\n */\n\n.xterm {\n    font-feature-settings: "liga" 0;\n    position: relative;\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\n.xterm.focus,\n.xterm:focus {\n    outline: none;\n}\n\n.xterm .xterm-helpers {\n    position: absolute;\n    top: 0;\n    /**\n     * The z-index of the helpers must be higher than the canvases in order for\n     * IMEs to appear on top.\n     */\n    z-index: 5;\n}\n\n.xterm .xterm-helper-textarea {\n    /*\n     * HACK: to fix IE\'s blinking cursor\n     * Move textarea out of the screen to the far left, so that the cursor is not visible.\n     */\n    position: absolute;\n    opacity: 0;\n    left: -9999em;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -5;\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\n    white-space: nowrap;\n    overflow: hidden;\n    resize: none;\n}\n\n.xterm .composition-view {\n    /* TODO: Composition position got messed up somewhere */\n    background: #000;\n    color: #FFF;\n    display: none;\n    position: absolute;\n    white-space: nowrap;\n    z-index: 1;\n}\n\n.xterm .composition-view.active {\n    display: block;\n}\n\n.xterm .xterm-viewport {\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\n    background-color: #000;\n    overflow-y: scroll;\n    cursor: default;\n    position: absolute;\n    right: 0;\n    left: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.xterm .xterm-screen {\n    position: relative;\n}\n\n.xterm .xterm-screen canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.xterm .xterm-scroll-area {\n    visibility: hidden;\n}\n\n.xterm-char-measure-element {\n    display: inline-block;\n    visibility: hidden;\n    position: absolute;\n    top: 0;\n    left: -9999em;\n    line-height: normal;\n}\n\n.xterm {\n    cursor: text;\n}\n\n.xterm.enable-mouse-events {\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n    cursor: default;\n}\n\n.xterm.xterm-cursor-pointer {\n    cursor: pointer;\n}\n\n.xterm.column-select.focus {\n    /* Column selection mode */\n    cursor: crosshair;\n}\n\n.xterm .xterm-accessibility,\n.xterm .xterm-message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    color: transparent;\n}\n\n.xterm .live-region {\n    position: absolute;\n    left: -9999px;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n}\n\n.xterm-dim {\n    opacity: 0.5;\n}\n\n.xterm-underline {\n    text-decoration: underline;\n}\n',""]),h.exports=u},function(h,u,d){h.exports=function(h){var u=[];return u.toString=function(){return this.map(function(u){var d=function(h,u){var d,p,v=h[1]||"",g=h[3];if(!g)return v;if(u&&"function"==typeof btoa){var b=(d=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),p="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(d),"/*# ".concat(p," */"));return[v].concat(g.sources.map(function(h){return"/*# sourceURL=".concat(g.sourceRoot||"").concat(h," */")})).concat([b]).join("\n")}return[v].join("\n")}(u,h);return u[2]?"@media ".concat(u[2]," {").concat(d,"}"):d}).join("")},u.i=function(h,d,p){"string"==typeof h&&(h=[[null,h,""]]);var v={};if(p)for(var g=0;g<this.length;g++){var b=this[g][0];null!=b&&(v[b]=!0)}for(var w=0;w<h.length;w++){var E=[].concat(h[w]);p&&v[E[0]]||(d&&(E[2]?E[2]="".concat(d," and ").concat(E[2]):E[2]=d),u.push(E))}},u}},function(h,u,d){d.r(u),d.d(u,"XTerm",function(){return x}),d(29),d(60);var p,v=d(7),g=d(0),b=d.n(g),w=(d(66),d(28)),E=(p=function(h,u){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d])})(h,u)},function(h,u){function r(){this.constructor=h}p(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),x=function(h){function t(u){var d=h.call(this,u)||this;return d.terminalRef=v.createRef(),d.onData=d.onData.bind(d),d.onCursorMove=d.onCursorMove.bind(d),d.onKey=d.onKey.bind(d),d.onBinary=d.onBinary.bind(d),d.onLineFeed=d.onLineFeed.bind(d),d.onScroll=d.onScroll.bind(d),d.onSelectionChange=d.onSelectionChange.bind(d),d.onRender=d.onRender.bind(d),d.onResize=d.onResize.bind(d),d.onTitleChange=d.onTitleChange.bind(d),d.setupTerminal(),d}return E(t,h),t.prototype.setupTerminal=function(){var h=this;this.terminal=new w.Terminal(this.props.options),this.props.addons&&this.props.addons.forEach(function(u){h.terminal.loadAddon(u)}),this.terminal.onBinary(this.onBinary),this.terminal.onCursorMove(this.onCursorMove),this.terminal.onData(this.onData),this.terminal.onKey(this.onKey),this.terminal.onLineFeed(this.onLineFeed),this.terminal.onScroll(this.onScroll),this.terminal.onSelectionChange(this.onSelectionChange),this.terminal.onRender(this.onRender),this.terminal.onResize(this.onResize),this.terminal.onTitleChange(this.onTitleChange),this.props.customKeyEventHandler&&this.terminal.attachCustomKeyEventHandler(this.props.customKeyEventHandler)},t.prototype.componentDidMount=function(){this.terminalRef.current&&this.terminal.open(this.terminalRef.current)},t.prototype.componentWillUnmount=function(){this.terminal.dispose()},t.prototype.onBinary=function(h){this.props.onBinary&&this.props.onBinary(h)},t.prototype.onCursorMove=function(){this.props.onCursorMove&&this.props.onCursorMove()},t.prototype.onData=function(h){this.props.onData&&this.props.onData(h)},t.prototype.onKey=function(h){this.props.onKey&&this.props.onKey(h)},t.prototype.onLineFeed=function(){this.props.onLineFeed&&this.props.onLineFeed()},t.prototype.onScroll=function(h){this.props.onScroll&&this.props.onScroll(h)},t.prototype.onSelectionChange=function(){this.props.onSelectionChange&&this.props.onSelectionChange()},t.prototype.onRender=function(h){this.props.onRender&&this.props.onRender(h)},t.prototype.onResize=function(h){this.props.onResize&&this.props.onResize(h)},t.prototype.onTitleChange=function(h){this.props.onTitleChange&&this.props.onTitleChange(h)},t.prototype.render=function(){return v.createElement("div",{className:this.props.className,ref:this.terminalRef})},t.propTypes={className:b.a.string,options:b.a.object,addons:b.a.array,onBinary:b.a.func,onCursorMove:b.a.func,onData:b.a.func,onKey:b.a.func,onLineFeed:b.a.func,onScroll:b.a.func,onSelectionChange:b.a.func,onRender:b.a.func,onResize:b.a.func,onTitleChange:b.a.func,customKeyEventHandler:b.a.func},t}(v.Component)}]);let v=p.XTerm}}]);
//# sourceMappingURL=efec6970.5f6ba0693fcf667c.js.map